(function(){"use strict";var e={4273:function(e,t,o){o(987);var n=JSON.parse('{"name":"@gogoend/svg-filter-graph-builder","version":"0.1.1","private":true,"scripts":{"serve":"vue-cli-service serve","build":"vue-cli-service build","lint":"vue-cli-service lint","ci:deploy-gh-pages":"node ./scripts/deploy-gh-pages.mjs","ci:deploy-local":"node ./scripts/deploy-local.mjs","ci:test-stage-branch":"node ./scripts/test-stage-branch.mjs"},"dependencies":{"@element-plus/icons-vue":"^2.0.10","dexie":"^3.2.2","dom-to-image":"^2.6.0","element-plus":"^2.2.21","lu2":"^2021.12.21","register-service-worker":"^1.7.2","vue":"^3.2.41"},"devDependencies":{"@types/dom-to-image":"^2.6.4","@types/jest":"^24.0.19","@typescript-eslint/eslint-plugin":"^5.41.0","@typescript-eslint/parser":"^5.41.0","@vue/cli-plugin-babel":"~5.0.8","@vue/cli-plugin-eslint":"~5.0.8","@vue/cli-plugin-pwa":"~5.0.0","@vue/cli-plugin-typescript":"~5.0.8","@vue/cli-plugin-unit-jest":"~5.0.8","@vue/cli-service":"~5.0.8","@vue/compiler-sfc":"^3.2.41","@vue/eslint-config-typescript":"^11.0.2","@vue/test-utils":"^2.2.1","core-js":"^3.26.0","eslint":"^8.26.0","eslint-plugin-vue":"^9.6.0","sass":"^1.43.5","sass-loader":"^8.0.2","typescript":"~4.8.4","vue-jest":"^5.0.0-0"},"volta":{"node":"16.18.0"}}');const l=(()=>{const e=n.name.split("/");return e[e.length-1]})();var a,r=o(9520);o(7658);(function(e){e[e["ERROR"]=1]="ERROR",e[e["WARNING"]=2]="WARNING",e[e["LOG"]=3]="LOG",e[e["DEBUG"]=4]="DEBUG"})(a||(a={}));const i=3,s=(...e)=>{const t=[];return e.forEach((e=>{if(["string","number","boolean","undefined","bigint"].includes(typeof e)||null===e)t.push(e);else if("symbol"===typeof e)t.push(`Symbol(${e.description})`);else if("function"===typeof e)t.push(e.toString());else if(e instanceof Error)t.push({message:e.message,stack:e.stack});else{let n={};try{n=JSON.parse(JSON.stringify(e))}catch(o){t.push({message:o.message,stack:o.stack})}t.push(n)}})),t},u={async debug(...e){const t=console.log(...e);return i>=a.DEBUG&&await m.add(s(a[a.DEBUG],Number(new Date),(await h.get("lastUserProfileId"))?.value,...e)),t},async log(...e){const t=console.log(...e);return i>=a.LOG&&await m.add(s(a[a.LOG],Number(new Date),(await h.get("lastUserProfileId"))?.value,...e)),t},async warn(...e){const t=console.warn(...e);return i>=a.WARNING&&await m.add(s(a[a.WARNING],Number(new Date),(await h.get("lastUserProfileId"))?.value,...e)),t},async error(...e){const t=console.error(...e);return i>=a.ERROR&&await m.add(s(a[a.ERROR],Number(new Date),(await h.get("lastUserProfileId"))?.value,...e)),t}};var d=u;const c=new r.ZP("gogoend");c.version(1).stores({products:"id,name"}),c.table("products").where("id").equals(l).toArray().then((e=>{if(0===e.length)return c.table("products").add({id:l,name:"SVG滤镜节点编辑器",version:n.version,buildVersion:1})})).catch((e=>{d.error(e)}));const p=[];for(let El=0;El<256;El++)p[El]=(El<16?"0":"")+El.toString(16);function f(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,o=4294967295*Math.random()|0,n=4294967295*Math.random()|0,l=p[255&e]+p[e>>8&255]+p[e>>16&255]+p[e>>24&255]+"-"+p[255&t]+p[t>>8&255]+"-"+p[t>>16&15|64]+p[t>>24&255]+"-"+p[63&o|128]+p[o>>8&255]+"-"+p[o>>16&255]+p[o>>24&255]+p[255&n]+p[n>>8&255]+p[n>>16&255]+p[n>>24&255];return l.toUpperCase()}const g=new r.ZP(l);g.version(2).stores({files:"id",userProfiles:"id",logs:"++id",app:"key"}),g.table("userProfiles").toArray().then((e=>{if(0===e.length)return g.table("userProfiles").add({id:f(),name:"Default User",createdTime:Number(new Date),lastModifiedTime:Number(new Date)})})).then((()=>g.table("app").get("lastUserProfileId"))).then((e=>e?g.table("userProfiles").get(e.value):g.table("userProfiles").toCollection().first())).then((e=>g.table("app").put({key:"lastUserProfileId",value:e.id},["key"]))).catch((e=>{d.error(e)}));const v=g.table("files"),m=(g.table("userProfiles"),g.table("logs")),h=g.table("app");window.addEventListener("error",(e=>{d.error(e.error),e.preventDefault()})),window.addEventListener("unhandledrejection",(e=>{d.error(e.reason),e.preventDefault()}));o(7763);var y=o(3096),_=o(5781),w={install(e){e.component("ElIcon",y.gn);for(const[t,o]of Object.entries(_))e.component(t,o)}},b=o(9963),D=o(6252);function E(e,t,o,n,l,a){const r=(0,D.up)("app-main");return(0,D.wg)(),(0,D.j4)(r)}var C=o(2262);const P=Symbol("Canvas上的所有节点"),I=Symbol("添加节点函数"),F=Symbol("移除节点函数"),S=Symbol("Canvas上的所有连线"),k=Symbol("节点对应所有出、入连线的映射关系"),B=Symbol("删除连线函数"),A=Symbol("添加连线函数"),N=Symbol("向 节点id->出、入连线 的映射中添加连线关系"),x=Symbol("Node组件映射"),R=Symbol("各节点表单内容"),M=Symbol("序列化的连线"),O=Symbol("清空Canvas上的所有内容");function V(){const{$eventHub:e}=(0,D.FN)().appContext.config.globalProperties,t=(0,C.iH)({});(0,D.JJ)(P,t);const o=e=>{t.value[e.id]=e};(0,D.JJ)(I,o);const n=e=>{const t=[...u.value[e]?.in?.map((e=>e.id))??[],...u.value[e]?.out?.map((e=>e.id))??[]];t.forEach((e=>{c(e)})),delete u.value[e]},l=o=>{n(o),delete t.value[o],e.emit("svg-canvas:node-removed",o)};(0,D.JJ)(F,l);const a=(0,C.iH)({});(0,D.JJ)(x,a);const r=(0,D.Fl)((()=>{const e={};return Object.entries(a.value).forEach((([t,o])=>{e[t]=o.nodeConfigRef.feAttrValue})),e}));(0,D.JJ)(R,r);const i=(0,C.iH)({});(0,D.JJ)(M,i);const s=(0,C.iH)([]);(0,D.JJ)(S,s);const u=(0,C.iH)({});(0,D.JJ)(k,u);const d=e=>{s.value.push(e),i.value[e.id]={id:e.id,from:{vmId:e.from.vm.nodeId,attr:e.from.attr},to:{vmId:e.to.vm.nodeId,attr:e.to.attr}}};(0,D.JJ)(A,d);const c=e=>{const t=s.value.findIndex((t=>t.id===e)),[o]=s.value.splice(t,1);delete i.value[e],Object.values(u.value).forEach((t=>{for(let o=0;o<t.in.length;)t.in[o].id!==e?o++:t.in.splice(o,1);for(let o=0;o<t.out.length;)t.out[o].id!==e?o++:t.out.splice(o,1)})),o.to.vm.afterPathRemoved?.(o)};(0,D.JJ)(B,c);const p=(e,t,o)=>{u.value[(0,C.SU)(t).vm.nodeId]||(u.value[(0,C.SU)(t).vm.nodeId]={in:[],out:[]}),u.value[(0,C.SU)(t).vm.nodeId].out.push(e),u.value[(0,C.SU)(o).vm.nodeId]||(u.value[(0,C.SU)(o).vm.nodeId]={in:[],out:[]}),u.value[(0,C.SU)(o).vm.nodeId].in.push(e)};(0,D.JJ)(N,p);const f=()=>{Object.keys(t.value).forEach((e=>{l(e)}))};(0,D.JJ)(O,f)}const U=Symbol("正在拖拽的项目"),T=Symbol("鬼影节点引用");function j(){const e=(0,C.iH)(null);(0,D.JJ)(U,e);const t=(0,C.iH)(null);(0,D.JJ)(T,t)}const H=Symbol("被聚焦的节点");function G(){const e=(0,C.iH)(null),t=t=>{e.value=t},{$eventHub:o}=(0,D.FN)().appContext.config.globalProperties;o.on("svg-canvas:node-removed",(o=>{e.value?.nodeId===o&&t(null)})),(0,D.JJ)(H,[e,t])}const $=Symbol("SvgCanvas组件实例"),L=Symbol("设置SvgCanvas组件实例");function W(){const e=(0,C.XI)();(0,D.JJ)($,e);const t=t=>{e.value=t};(0,D.JJ)(L,t)}var J=o(8985),q=o(3577);const Z={class:"file-list"},z=["value"],Y={class:"file-list__footer"},X=["disabled"];var K=(0,D.aZ)({__name:"FileList",props:{handleConfirm:{type:Function,required:!0},handleCancel:{type:Function,required:!0}},setup(e){const t=(0,C.iH)([]),o=(0,C.iH)(""),n=async()=>await v.toArray();return n().then((e=>{t.value=e})),(n,l)=>((0,D.wg)(),(0,D.iD)("div",Z,[(0,D._)("form",{class:"file-list__form",onSubmit:l[1]||(l[1]=(0,b.iM)((()=>{}),["prevent"]))},[(0,D.wy)((0,D._)("select",{"onUpdate:modelValue":l[0]||(l[0]=e=>o.value=e),class:"file-list__select"},[((0,D.wg)(!0),(0,D.iD)(D.HY,null,(0,D.Ko)(t.value,((e,t)=>((0,D.wg)(),(0,D.iD)("option",{key:t,value:e.id},(0,q.zw)(e.project.name),9,z)))),128))],512),[[b.bM,o.value]])],32),((0,D.wg)(),(0,D.j4)((0,D.LL)("template"),{class:"file-list__footer-template"},{default:(0,D.w5)((()=>[(0,D._)("div",Y,[(0,D._)("button",{is:"ui-button",disabled:!o.value,onClick:l[2]||(l[2]=(0,b.iM)((t=>e.handleConfirm(o.value)),["prevent"]))},"Open",8,X),(0,D._)("button",{is:"ui-button",onClick:l[3]||(l[3]=(0,b.iM)((t=>e.handleCancel()),["prevent"]))},"Cancel")])])),_:1}))]))}}),Q=o(3744);const ee=(0,Q.Z)(K,[["__scopeId","data-v-7a3fd6c0"]]);var te=ee;function oe(){let e,t,o=null;const n=new Promise(((o,n)=>{e=o,t=n}));return new J.Z({title:"Choose a file",content:'<div class="file-chooser-dialog" />',async onShow(){const n=this.querySelector(".file-chooser-dialog");o=(0,b.ri)(te,{handleConfirm:t=>{e(t),this.hide()},handleCancel:()=>{t(new Error("[File Chooser] 用户没有选择文件")),this.hide()}}),o.mount(n),await(0,D.Y3)();const l=this.querySelector(".ui-dialog-footer"),a=this.querySelector(".file-list__footer-template");while(a.children.length)l.appendChild(a.children[0])},onHide(){o.unmount(),o=null,this.remove()}}),n}const ne={id:"CAF2FD8E-77B0-4A5B-A967-C301614D0DEB",stuff:{nodes:{"040822F7-D416-4325-B428-8BE8433B166C":{is:"feComponentTransfer",id:"040822F7-D416-4325-B428-8BE8433B166C",position:[285.00372314453125,54.0089111328125]},"0D126B0D-841E-4193-95F1-D67412EFAD6E":{is:"SourceGraphic",id:"0D126B0D-841E-4193-95F1-D67412EFAD6E",position:[30.000030517578125,20.00787353515625]},"A432BA04-FCA6-4546-9E01-188D4125BB6B":{is:"feMorphology",id:"A432BA04-FCA6-4546-9E01-188D4125BB6B",position:[525.0057983398438,51.008575439453125]},"6EF3BF7F-03DE-4D91-AB81-8D1B0E8F340D":{is:"feFuncXUsingGamma",id:"6EF3BF7F-03DE-4D91-AB81-8D1B0E8F340D",position:[30,104.00851440429688]},"E4B91ED1-5995-48A1-8574-F352B937FE2E":{is:"feBlend",id:"E4B91ED1-5995-48A1-8574-F352B937FE2E",position:[1026.0023193359375,8.00787353515625]},"547A7FE0-3D96-4932-9683-0D5936C5CEF0":{is:"feColorMatrixUsingMatrix",id:"547A7FE0-3D96-4932-9683-0D5936C5CEF0",position:[763,65]},"509C12B3-D2B1-478D-9335-5697A716D24E":{is:"matrixInFeColorMatrix",id:"509C12B3-D2B1-478D-9335-5697A716D24E",position:[494,197]},"CC8C51D7-5C24-4E44-B25E-FD8A6483A77C":{is:"StringLiteral",id:"CC8C51D7-5C24-4E44-B25E-FD8A6483A77C",position:[753,265]}},nodeForms:{"040822F7-D416-4325-B428-8BE8433B166C":{},"A432BA04-FCA6-4546-9E01-188D4125BB6B":{in:"",operator:"dilate",radius:"5.8"},"6EF3BF7F-03DE-4D91-AB81-8D1B0E8F340D":{},"E4B91ED1-5995-48A1-8574-F352B937FE2E":{in:"",in2:"",mode:"hard-light"},"547A7FE0-3D96-4932-9683-0D5936C5CEF0":{in:"",type:"matrix",values:"1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"},"509C12B3-D2B1-478D-9335-5697A716D24E":["1","0",0,"0",0,"0","1.1","0",0,0,"0","0","1","0",0,0,0,"0","1",0],"CC8C51D7-5C24-4E44-B25E-FD8A6483A77C":{value:"hard-light"}},links:{"8FD762D2-9CBF-4272-A9AA-C2F597E218CB":{id:"8FD762D2-9CBF-4272-A9AA-C2F597E218CB",from:{vmId:"0D126B0D-841E-4193-95F1-D67412EFAD6E",attr:"result"},to:{vmId:"040822F7-D416-4325-B428-8BE8433B166C",attr:"in"}},"6A85F753-933F-43F2-87D2-B9E59159E0DE":{id:"6A85F753-933F-43F2-87D2-B9E59159E0DE",from:{vmId:"040822F7-D416-4325-B428-8BE8433B166C",attr:"result"},to:{vmId:"A432BA04-FCA6-4546-9E01-188D4125BB6B",attr:"in"}},"B634C54D-646D-49F2-BD68-D28001BA1E72":{id:"B634C54D-646D-49F2-BD68-D28001BA1E72",from:{vmId:"6EF3BF7F-03DE-4D91-AB81-8D1B0E8F340D",attr:"result"},to:{vmId:"040822F7-D416-4325-B428-8BE8433B166C",attr:"B"}},"AE0B9E89-5332-4B9E-A87D-70E367E93BC9":{id:"AE0B9E89-5332-4B9E-A87D-70E367E93BC9",from:{vmId:"0D126B0D-841E-4193-95F1-D67412EFAD6E",attr:"result"},to:{vmId:"E4B91ED1-5995-48A1-8574-F352B937FE2E",attr:"in"}},"A71F700A-465C-4358-8D6F-A6E3B4E3DA61":{id:"A71F700A-465C-4358-8D6F-A6E3B4E3DA61",from:{vmId:"509C12B3-D2B1-478D-9335-5697A716D24E",attr:"result"},to:{vmId:"547A7FE0-3D96-4932-9683-0D5936C5CEF0",attr:"values"}},"7EAEA517-FEA0-4B18-87DE-854CBFB9EA8B":{id:"7EAEA517-FEA0-4B18-87DE-854CBFB9EA8B",from:{vmId:"A432BA04-FCA6-4546-9E01-188D4125BB6B",attr:"result"},to:{vmId:"547A7FE0-3D96-4932-9683-0D5936C5CEF0",attr:"in"}},"A7C2B894-0422-411D-BF06-D8C9CEC45BB3":{id:"A7C2B894-0422-411D-BF06-D8C9CEC45BB3",from:{vmId:"547A7FE0-3D96-4932-9683-0D5936C5CEF0",attr:"result"},to:{vmId:"E4B91ED1-5995-48A1-8574-F352B937FE2E",attr:"in2"}},"1F6E3EE6-AFB7-484D-954C-22C01E1C3382":{id:"1F6E3EE6-AFB7-484D-954C-22C01E1C3382",from:{vmId:"CC8C51D7-5C24-4E44-B25E-FD8A6483A77C",attr:"result"},to:{vmId:"E4B91ED1-5995-48A1-8574-F352B937FE2E",attr:"mode"}}}},product:{name:"@gogoend/svg-filter-graph-builder",version:"0.1.1",buildVersion:0},project:{authorIds:["E5D9F285-4610-47AC-8703-6D8D12184B28"],createdTime:1668689298273,lastModifierId:"E5D9F285-4610-47AC-8703-6D8D12184B28",lastModifiedTime:1668689298273,name:"Hello World"}},le=[ne];var ae=le;const re=Symbol("保存项目"),ie=Symbol("另存为项目"),se=Symbol("已打开的项目"),ue=Symbol("设置已打开的项目"),de=(Symbol("关闭并新建项目"),Symbol("关闭项目")),ce=Symbol("尝试打开打开文件对话框"),pe=Symbol("尝试打开示例项目文件");function fe(){const e=(0,D.FN)().proxy,t=e.$.provides[O],o=e.$.provides[$],l=(0,C.XI)();(0,D.JJ)(se,l);const a=e=>{l.value=e};(0,D.JJ)(ue,a);const r=()=>{t(),a(null)},i=async()=>{await new Promise(((e,t)=>{(new J.Z).confirm("<h6>ATTENTION</h6><p>Any unsaved changes will be lost. Continue?</p>",{buttons:[{value:"Continue",events(t){e(void 0),t.dialog.remove()}},{value:"Cancel",events(e){t(new Error("[关闭文件提示] 用户取消了操作")),e.dialog.remove()}}]})})),r()};(0,D.JJ)(de,i);const s=async()=>{await i();const e=await oe();if(e===l.value?.id)return;const[t]=await v.where({id:e}).toArray();if(!t)return Promise.reject(new Error("[打开文件弹窗] 未找到此项目，程序可能发生了内部错误"));r(),await(0,D.Y3)(),a(t),o.value.loadCanvasStuffFromSerializedData(t)};(0,D.JJ)(ce,s);const u=async()=>{const t=e.$.provides[P],o=e.$.provides[R],a=e.$.provides[M],r={nodes:t.value,nodeForms:o.value,links:a.value},i={name:n.name,version:n.version,buildVersion:0},s=(await h.get("lastUserProfileId")).value,u={authorIds:[...new Set([...l.value?.project.authorIds??[],s])],createdTime:l.value?.project.createdTime??Number(new Date),lastModifiedTime:Number(new Date),lastModifierId:s,name:""},d={id:l.value?.id,stuff:r,product:i,project:u};return JSON.parse(JSON.stringify(d))},d=async()=>{const e=l.value?.id;if(e){const t=await u();await v.where("id").equals(e).modify(((e,o)=>{o.value=t}))}else await c()};(0,D.JJ)(re,d);const c=async()=>{const e=await u();e.id=f();let t="";while(""===t?.trim())t=window.prompt("Enter the name of the your project");if(null===t)return Promise.reject(new Error("[projectInfoState][另存为] 用户取消保存"));e.project.name=t;const o={id:f(),...e};await v.add(o),a(o)};(0,D.JJ)(ie,c);const p=async e=>{const t=ae.find((t=>t.id===e));await i(),o.value.loadCanvasStuffFromSerializedData(t)};(0,D.JJ)(pe,p)}const ge=Symbol("安装PWA"),ve=Symbol("PWA等待安装事件对象");function me(){const e=(0,C.XI)(null);async function t(){if(e.value){e.value.prompt();const t=await e.value.userChoice;d.log("[pwa 安装程序] 安装结果：",t),"accepted"===t.outcome&&(console.log("User accepted the A2HS prompt"),e.value=null)}}window.addEventListener("beforeinstallprompt",(t=>{t.preventDefault(),console.log(t),d.log("[pwa 安装程序] 用户未在本机安装pwa"),e.value=t})),(0,D.JJ)(ve,e),(0,D.JJ)(ge,t)}function he(){[me,V,j,G,W,fe].forEach((e=>e()))}const ye={class:"app-wrap"};function _e(e,t,o,n,l,a){const r=(0,D.up)("ping-ping"),i=(0,D.up)("top-menu-bar"),s=(0,D.up)("svg-canvas"),u=(0,D.up)("svg-canvas-overlay-tip"),d=(0,D.up)("node-library-panel"),c=(0,D.up)("stuff-config-panel"),p=(0,D.up)("output-preview-panel");return(0,D.wg)(),(0,D.iD)("div",ye,[(0,D.Wm)(r),(0,D.Wm)(i,{class:"top-menu-bar",style:(0,q.j5)({height:`${e.topMenuBarHeight}px`})},null,8,["style"]),(0,D._)("div",{class:"workbench-wrap",style:(0,q.j5)({top:`${e.topMenuBarHeight}px`})},[(0,D.Wm)(s,{class:"svg-canvas",style:(0,q.j5)({left:e.filterLibraryPanelWidth+"px",width:`calc(100% - ${e.stuffConfigPanelWidth}px - ${e.filterLibraryPanelWidth}px)`}),onVnodeMounted:t[0]||(t[0]=t=>{e.setSvgCanvasVm(t.component.proxy)})},null,8,["style"]),(0,D.Wm)(u,{class:"svg-canvas__overlay-tip",style:(0,q.j5)({left:e.filterLibraryPanelWidth+"px",width:`calc(100% - ${e.stuffConfigPanelWidth}px - ${e.filterLibraryPanelWidth}px)`})},null,8,["style"]),(0,D.Wm)(d,{class:"node-library-panel",style:(0,q.j5)({left:0,right:`calc(100% - ${e.filterLibraryPanelWidth}px)`})},null,8,["style"]),(0,D.Wm)(c,{class:"stuff-config-panel",style:(0,q.j5)({right:0,left:`calc(100% - ${e.stuffConfigPanelWidth}px)`})},null,8,["style"]),(0,D.Wm)(p,{class:"output-preview-panel",style:{width:"640px",height:"384px"},onVnodeMounted:e.handleOutputPreviewPanelMounted},null,8,["onVnodeMounted"])],4)])}const we={ref:"canvasScrollEl"},be={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 4000 4000","xml:space":"preserve",class:"svg-canvas-board"},De={class:"ghost"},Ee=["d"];function Ce(e,t,o,n,l,a){const r=(0,D.up)("io-node"),i=(0,D.up)("io-path");return(0,D.wg)(),(0,D.iD)("div",we,[((0,D.wg)(),(0,D.iD)("svg",be,[((0,D.wg)(!0),(0,D.iD)(D.HY,null,(0,D.Ko)(e.nodes,(t=>((0,D.wg)(),(0,D.j4)(r,{ref_for:!0,ref:e.setNodeRefMap,key:t.id,is:t.is,"node-id":t.id,onPortStart:e.handlePortStart,onPortMove:e.handlePortMove,onPortConnect:e.handlePortConnect,onPortCancel:e.handlePortCancel,onDestinationChange:e.handleDestinationChange,"relative-paths":e.relativePathMapIndexedByNodeId[t.id]??e.defaultRelativePath,onNodeMove:e.handleNodeMove,position:t.position,"onUpdate:position":e=>t.position=e},null,8,["is","node-id","onPortStart","onPortMove","onPortConnect","onPortCancel","onDestinationChange","relative-paths","onNodeMove","position","onUpdate:position"])))),128)),((0,D.wg)(!0),(0,D.iD)(D.HY,null,(0,D.Ko)(e.linkedPaths,(e=>((0,D.wg)(),(0,D.j4)(i,{key:e.id,"path-id":e.id,"path-d-arguments":e.pathDArguments,from:e.from,to:e.to},null,8,["path-id","path-d-arguments","from","to"])))),128)),(0,D._)("g",De,[(0,D._)("path",{class:"ghost-path",d:e.ghostPathD},null,8,Ee),e.ghostNodeType?((0,D.wg)(),(0,D.j4)(r,{key:0,ref:"ghostNodeRef",style:{opacity:"0.5"},is:e.ghostNodeType,nodeId:"0",position:e.ghostNodePosition,"onUpdate:position":t[0]||(t[0]=t=>e.ghostNodePosition=t),relativePaths:e.defaultRelativePath},null,8,["is","position","relativePaths"])):(0,D.kq)("",!0)])]))],512)}o(2801),o(1295);const Pe=["transform"],Ie={class:"io-node__inner"},Fe={class:"io-node__head"},Se={transform:"matrix(1 0 0 1 0 8)",class:"fill-fff module-name"};function ke(e,t,o,n,l,a){const r=(0,D.up)("Delete"),i=(0,D.up)("el-icon"),s=(0,D.Q2)("pingping");return(0,D.wg)(),(0,D.iD)("g",{class:(0,q.C_)(["io-node",{"io-node--focused":e.isFocused}]),onMousedown:t[6]||(t[6]=(0,b.iM)(((...t)=>e.handleNodeMousedown&&e.handleNodeMousedown(...t)),["stop"])),transform:`translate(${e.position[0]}, ${e.position[1]})`,ref:"ioNodeEl"},[((0,D.wg)(),(0,D.iD)("foreignObject",Ie,[(0,D._)("div",{class:"io-node__body",xmlns:"http://www.w3.org/1999/xhtml",onClick:t[5]||(t[5]=(0,b.iM)(((...t)=>e.handleNodeBodyClick&&e.handleNodeBodyClick(...t)),["exact","stop"]))},[(0,D.kq)("",!0),(0,D._)("div",Fe,[(0,D._)("em",{class:"port out","data-port-type":"out",style:(0,q.j5)({width:2*e.POINT_R+"px",height:2*e.POINT_R+"px",borderWidth:`${e.POINT_BORDER_W}px`}),"data-fe-attr":"result",ref:e.setFeAttrEls,onMouseenter:t[0]||(t[0]=(...t)=>e.handlePortMouseenter&&e.handlePortMouseenter(...t))},null,36),(0,D._)("span",Se,(0,q.zw)(e.is),1)]),((0,D.wg)(),(0,D.j4)((0,D.LL)(e.InternalNodeImplement),(0,D.dG)({ref:"nodeConfigRef"},{is:e.is,nodeId:e.nodeId,relativePaths:e.relativePaths}),null,16)),(0,D._)("div",{class:"io-node__toolbox",onClick:t[4]||(t[4]=(0,b.iM)((()=>{}),["stop"]))},[(0,D.wy)(((0,D.wg)(),(0,D.iD)("button",{class:"io-node__toolbox-button lu-ui__extend-small",is:"ui-button",onClick:t[1]||(t[1]=t=>e.copySvgFilterCode(e.nodeId)),title:"Copy SVG Filter Code"},[(0,D.Uk)(" <SVG> ")])),[[s,{remark:`[io-node] ${e.is} 按下了复制SVG滤镜代码按钮`}]]),(0,D.wy)(((0,D.wg)(),(0,D.iD)("button",{class:"io-node__toolbox-button lu-ui__extend-small",is:"ui-button",onClick:t[2]||(t[2]=t=>e.copyCssRule(e.nodeId)),title:"Copy CSS Rule"},[(0,D.Uk)(" CSS Rule ")])),[[s,{remark:`[io-node] ${e.is} 按下了复制CSS规则按钮`}]]),(0,D.wy)(((0,D.wg)(),(0,D.iD)("button",{class:"io-node__toolbox-button lu-ui__extend-small",is:"ui-button",onClick:t[3]||(t[3]=t=>e.removeNode(e.nodeId)),title:"Remove Node","data-type":"danger"},[(0,D.Wm)(i,null,{default:(0,D.w5)((()=>[(0,D.Wm)(r)])),_:1})])),[[s,{remark:`[io-node] ${e.is} 按下了删除按钮`}]])])])]))],42,Pe)}const Be=function(e,t){const o=t?.start||(()=>{}),n=t?.move||(()=>{}),l=t?.up||(()=>{}),a=e.target;o(e,{originEl:a});const r=e=>{switch(e.type){case"mousemove":n(e,{originEl:a});break;case"mouseup":document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",r),l(e,{originEl:a});break}};document.addEventListener("mousemove",r),document.addEventListener("mouseup",r)};var Ae=Be;const Ne={type:"source",ports:{}},xe={type:"source",ports:{}},Re={type:"normal",ports:{in:{showInConfigPanel:!1},kernelMatrix:{defaultValue:"0 1 0, 1 1 1, 0 1 0"},order:{defaultValue:"3, 3"},divisor:{type:"range",range:[.01,100],step:.01,defaultValue:1},bias:{type:"range",range:[-1,1],step:.01,defaultValue:0},targetX:{type:"range",range:[0,10],step:1,defaultValue:0},targetY:{type:"range",range:[0,10],step:1,defaultValue:0},edgeMode:{type:"text",defaultValue:"duplicate",enum:["duplicate","wrap","none"]},kernelUnitLength:{type:"range",range:[1,100],step:1,defaultValue:2},preserveAlpha:{type:"text",defaultValue:"true",enum:["true","false"]}}},Me={type:"normal",ports:{type:{type:"text",defaultValue:"fractalNoise",enum:[{label:"fractalNoise",value:"fractalNoise"},{label:"turbulence",value:"turbulence"}]},baseFrequency:{type:"range",defaultValue:.05,range:[0,1],step:.01},numOctaves:{type:"range",defaultValue:1,step:1,range:[0,20]},stitchTiles:{defaultValue:"stitch",enum:["stitch","noStitch"]},seed:{type:"range",defaultValue:0,step:.01,range:[-1e4,1e4]}}},Oe={type:"normal",ports:{in:{showInConfigPanel:!1},dx:{type:"range",defaultValue:0,step:.01,range:[-1e3,1e3]},dy:{type:"range",defaultValue:0,step:.01,range:[-1e3,1e3]},stdDeviation:{type:"range",defaultValue:0,step:.01,range:[0,100]},"flood-color":{type:"color"},"flood-opacity":{type:"range",defaultValue:1,step:.01,range:[0,1]}}},Ve={type:"merge",ports:{in:{showInConfigPanel:!1}}},Ue={type:"normal",ports:{in:{showInConfigPanel:!1},dx:{type:"range",defaultValue:0,step:.01,range:[-1e3,1e3]},dy:{type:"range",defaultValue:0,step:.01,range:[-1e3,1e3]}}},Te={type:"normal",tag:"feColorMatrix",ports:{in:{showInConfigPanel:!1},type:{showInConfigPanel:!1,showOnNode:!1,defaultValue:"matrix"},values:{defaultValue:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0].join(" ")}}},je={type:"matrix-in-fe-color-matrix",ports:{}},He={tag:"feColorMatrix",type:"normal",ports:{in:{showInConfigPanel:!1},type:{showInConfigPanel:!1,showOnNode:!1,defaultValue:"saturate"},values:{type:"range",defaultValue:1,step:.01,range:[-10,10]}}},Ge={tag:"feColorMatrix",type:"normal",ports:{in:{showInConfigPanel:!1},type:{showInConfigPanel:!1,showOnNode:!1,defaultValue:"hueRotate"},values:{type:"range",defaultValue:0,step:.01,range:[0,360]}}},$e={tag:"feColorMatrix",type:"normal",ports:{in:{showInConfigPanel:!1},type:{showInConfigPanel:!1,showOnNode:!1,defaultValue:"luminanceToAlpha"},values:{}}},Le={type:"normal",ports:{in:{showInConfigPanel:!1}}},We={type:"normal",ports:{in:{showInConfigPanel:!1},in2:{showInConfigPanel:!1},scale:{type:"range",defaultValue:0,step:.01,range:[-100,100]},xChannelSelector:{defaultValue:"A",enum:["R","G","B","A"]},yChannelSelector:{defaultValue:"A",enum:["R","G","B","A"]}}},Je={type:"normal",ports:{href:{}}},qe={type:"normal",ports:{in:{showInConfigPanel:!1},in2:{showInConfigPanel:!1},mode:{defaultValue:"normal",enum:["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}}},Ze={type:"normal",tag:"feComposite",ports:{in:{showInConfigPanel:!1},in2:{showInConfigPanel:!1},operator:{enum:["over","in","out","atop","xor","lighter"]}}},ze={type:"normal",tag:"feComposite",ports:{in:{showInConfigPanel:!1},in2:{showInConfigPanel:!1},operator:{showInConfigPanel:!1,showOnNode:!1,defaultValue:"arithmetic"},k1:{type:"range",range:[-5,5],defaultValue:.5},k2:{type:"range",range:[-5,5],defaultValue:.5},k3:{type:"range",range:[-5,5],defaultValue:.5},k4:{type:"range",range:[-5,5],defaultValue:.5}}},Ye={type:"normal",ports:{"flood-color":{type:"color"},"flood-opacity":{type:"range",defaultValue:1,step:.01,range:[0,1]}}},Xe={type:"normal",ports:{in:{showInConfigPanel:!1},stdDeviation:{type:"range",defaultValue:0,step:.01,range:[0,100]},edgeMode:{type:"text",enum:["duplicate","wrap","none"],defaultValue:"none"}}},Ke={type:"normal",ports:{in:{showInConfigPanel:!1},operator:{enum:["erode","dilate"],defaultValue:"erode"},radius:{type:"range",defaultValue:0,step:.01,range:[0,50]}}},Qe={type:"component-transfer-root",ports:{in:{showInConfigPanel:!1},R:{showInConfigPanel:!1},G:{showInConfigPanel:!1},B:{showInConfigPanel:!1},A:{showInConfigPanel:!1}}},et={type:"component-transfer-child",ports:{type:{defaultValue:"identity",showInConfigPanel:!1,showOnNode:!1}}},tt={type:"component-transfer-child",ports:{type:{defaultValue:"table",showInConfigPanel:!1,showOnNode:!1},tableValues:{defaultValue:"1 1 1 1"}}},ot={type:"component-transfer-child",ports:{type:{defaultValue:"linear",enum:["linear","discrete"]},slope:{type:"number",defaultValue:1},intercept:{type:"number",defaultValue:0}}},nt={type:"component-transfer-child",ports:{type:{defaultValue:"gamma",showInConfigPanel:!1,showOnNode:!1},amplitude:{type:"number",defaultValue:1},exponent:{type:"number",defaultValue:0},offset:{type:"number",defaultValue:0}}},lt={type:"string-literal",ports:{value:{type:"text"}}};var at={SourceGraphic:Ne,SourceAlpha:xe,feConvolveMatrix:Re,feTurbulence:Me,feDropShadow:Oe,feMerge:Ve,feOffset:Ue,feColorMatrixUsingMatrix:Te,matrixInFeColorMatrix:je,feColorMatrixUsingSaturate:He,feColorMatrixUsingHueRotate:Ge,feColorMatrixUsingLuminanceToAlpha:$e,feTile:Le,feDisplacementMap:We,feImage:Je,feBlend:qe,feCompositeWithoutK:Ze,feCompositeWithK:ze,feFlood:Ye,feGaussianBlur:Xe,feMorphology:Ke,feComponentTransfer:Qe,feFuncXUsingIdentity:et,feFuncXUsingTable:tt,feFuncXUsingLinearOrDiscrete:ot,feFuncXUsingGamma:nt,StringLiteral:lt};const rt=Symbol("SvgCanvas组件的范围");function it(e){return e.dataset.portType}function st(e){return["in","out"].includes(e.dataset.portType)}function ut(e){const{props:t,type:o}=e;let n=e.children;const l=document.createElementNS("http://www.w3.org/2000/svg",o);return t&&Object.keys(t).forEach((e=>{["number","string"].includes(typeof t?.[e])&&String(t?.[e]).length&&l.setAttribute(e,t?.[e])})),"object"===typeof n&&null!==n?Array.isArray(n)||(n=[n]):n=[],(n||[]).forEach((e=>{l.append(ut(e))})),l}const dt=e=>{const t=new Map,o=new Map;e.forEach((e=>{const[n,l]=[e.from.vm,e.to.vm];t.has(n)||(t.set(n,0),o.set(n,[])),t.has(l)||(t.set(l,0),o.set(l,[])),t.set(l,t.get(l)+1),o.get(n).push(l)}));const n=[],l=[];for(const a of t)0===a[1]&&n.push(a[0]);while(n.length){const e=n.shift();l.push(e);const a=o.get(e);a.forEach((e=>{t.set(e,t.get(e)-1),0===t.get(e)&&n.push(e)}))}return l},ct=(...e)=>{},pt={key:0,class:"io-node__li"},ft=["data-fe-attr"],gt={class:"io-node__port-text"},vt={class:"port-name"};function mt(e,t,o,n,l,a){return(0,D.wg)(!0),(0,D.iD)(D.HY,null,(0,D.Ko)(e.fe[e.is].ports,((o,n)=>((0,D.wg)(),(0,D.iD)(D.HY,{key:n},[!1!==o.showOnNode?((0,D.wg)(),(0,D.iD)("div",pt,[(0,D._)("em",{class:"port in",style:(0,q.j5)({width:2*e.POINT_R+"px",height:2*e.POINT_R+"px",borderWidth:`${e.POINT_BORDER_W}px`}),"data-port-type":"in",r:"10","data-fe-attr":n,ref_for:!0,ref:e.setFeAttrEls,onMouseenter:t[0]||(t[0]=(...t)=>e.handlePortMouseenter&&e.handlePortMouseenter(...t))},null,44,ft),(0,D._)("label",gt,[(0,D._)("span",vt,(0,q.zw)(n),1)])])):(0,D.kq)("",!0)],64)))),128)}var ht=()=>{const e=(0,D.f3)("fromPort"),t=(0,D.f3)("toPort"),o=(0,C.iH)(),n=(0,C.iH)([]),l=e=>{e&&n.value.push(e)};(0,D.Xn)((()=>{n.value=[]}));const a=(0,D.f3)("allDescendants"),r=(0,D.f3)("orderedAllDescendants"),i=(0,D.f3)("handlePortMouseenter"),s=(0,D.Fl)((()=>{const e="data:image/svg+xml,",t=(0,D.h)("filter",{id:"filter"},(r?.value??[]).map(((e,t)=>e.getVNodeFragment(e,t)))),o=`\n<svg xmlns="http://www.w3.org/2000/svg" id="SVGFilter" width="40" height="40" viewBox="0 0 256 256">\n<defs>${ut(t).outerHTML}</defs>\n<g filter="url(#filter)">\n  <linearGradient id="SVGID_1_" gradientUnits="userSpaceOnUse" x1="0" y1="64" x2="64" y2="64">\n    <stop offset="0" style="stop-color:#EE7E77" /><stop offset="0.5" style="stop-color:#E7334C" /><stop offset="1" style="stop-color:#DA0439" />\n  </linearGradient>\n  <rect style="fill:url(#SVGID_1_);" width="64" height="128" />\n  <linearGradient id="SVGID_2_" gradientUnits="userSpaceOnUse" x1="64" y1="64" x2="128" y2="64">\n    <stop offset="0" style="stop-color:#F29847" /><stop offset="0.5" style="stop-color:#EE7300" /><stop offset="1" style="stop-color:#D45E12" />\n  </linearGradient>\n  <rect x="64" style="fill:url(#SVGID_2_);" width="64" height="128" />\n  <linearGradient id="SVGID_3_" gradientUnits="userSpaceOnUse" x1="128" y1="64" x2="192" y2="64">\n    <stop offset="0" style="stop-color:#FFF9AC" /><stop offset="0.5" style="stop-color:#FFF000" /><stop offset="1" style="stop-color:#FFDC00" />\n  </linearGradient>\n  <rect x="128" style="fill:url(#SVGID_3_);" width="64" height="128" />\n  <linearGradient id="SVGID_4_" gradientUnits="userSpaceOnUse" x1="192" y1="64" x2="256" y2="64">\n    <stop offset="0" style="stop-color:#66BC81" /><stop offset="0.5" style="stop-color:#009944" /><stop offset="1" style="stop-color:#008A43" />\n  </linearGradient>\n  <rect x="192" style="fill:url(#SVGID_4_);" width="64" height="128" />\n  <linearGradient id="SVGID_5_" gradientUnits="userSpaceOnUse" x1="0" y1="192" x2="64" y2="192">\n    <stop offset="0" style="stop-color:#3EAFCD" /><stop offset="0.5" style="stop-color:#0091B8" /><stop offset="1" style="stop-color:#00767F" />\n  </linearGradient>\n  <rect y="128" style="fill:url(#SVGID_5_);" width="64" height="128" />\n  <linearGradient id="SVGID_6_" gradientUnits="userSpaceOnUse" x1="64" y1="192" x2="128" y2="192">\n    <stop offset="0" style="stop-color:#584C9D" /><stop offset="0.5" style="stop-color:#1D2088" /><stop offset="1" style="stop-color:#39396C" />\n  </linearGradient>\n  <rect x="64" y="128" style="fill:url(#SVGID_6_);" width="64" height="128" />\n  <linearGradient id="SVGID_7_" gradientUnits="userSpaceOnUse" x1="128" y1="192" x2="192" y2="192">\n    <stop offset="0" style="stop-color:#B87FB5" /><stop offset="0.5" style="stop-color:#8E2E8C" /><stop offset="1" style="stop-color:#731485" />\n  </linearGradient>\n  <rect x="128" y="128" style="fill:url(#SVGID_7_);" width="64" height="128" />\n  <linearGradient id="SVGID_8_" gradientUnits="userSpaceOnUse" x1="192" y1="192" x2="256" y2="192">\n    <stop offset="0" style="stop-color:#EB70A6" /><stop offset="0.5" style="stop-color:#E4007F" /><stop offset="1" style="stop-color:#CE0080" />\n  </linearGradient>\n  <rect x="192" y="128" style="fill:url(#SVGID_8_);" width="64" height="128" />\n</g>\n</svg>\n`;return e+encodeURIComponent(o)}));return{fromPort:e,toPort:t,ioNodeEl:o,feAttrEls:n,setFeAttrEls:l,allDescendants:a,handlePortMouseenter:i,filterThumbUrl:s}};const yt=150,_t=300,wt=32,bt=10,Dt=4,Et=150,Ct=4;var Pt=(0,D.aZ)({name:"NormalNode",props:{is:{type:String,required:!0},nodeId:{type:String,required:!0},relativePaths:{type:Object,required:!0}},setup(e){const{fromPort:t,toPort:o,ioNodeEl:n,setFeAttrEls:l,allDescendants:a,handlePortMouseenter:r,filterThumbUrl:i}=ht(),s=(0,C.iH)({}),u=(0,D.Fl)((()=>{const t={};return e.relativePaths.in.forEach((e=>{t[e.to.attr]=e.from.vm.mergedFeAttrValue[e.from.attr]})),t})),c=(0,D.Fl)((()=>({...s.value,...u.value,result:e.nodeId}))),p=(e,t)=>{const o=e.is,{mergedFeAttrValue:n}=e,l={};Object.keys(n||{}).forEach((e=>{void 0!==n[e]&&(l[e]=n[e]||""),l.in===l.result&&delete l.in,Object.prototype.hasOwnProperty.call(at[o].ports,"in")&&!l.in&&(l.in="SourceGraphic"),Object.prototype.hasOwnProperty.call(at[o].ports,"in2")&&!l.in2&&(l.in2="SourceGraphic")}));const a=at[o].tag??o;return(0,D.h)(a,l)};if(d.debug(at[e.is]),["normal",void 0].includes(at[e.is].type)){const{ports:t}=at[e.is];Object.keys(t).forEach((e=>{["number","range"].includes(t[e].type)?s.value[e]=t[e].defaultValue??0:s.value[e]=t[e].defaultValue??""}))}return{POINT_R:bt,POINT_BORDER_W:Dt,fromPort:t,ioNodeEl:n,setFeAttrEls:l,feAttrValue:s,foreignPortValue:u,mergedFeAttrValue:c,afterPathConnected:ct,afterPathRemoved:ct,handlePortMouseenter:r,fe:at,allDescendants:a,filterThumbUrl:i,getVNodeFragment:p}}});const It=(0,Q.Z)(Pt,[["render",mt],["__scopeId","data-v-e7beee26"]]);var Ft=It;const St=e=>((0,D.dD)("data-v-b64b5bd0"),e=e(),(0,D.Cn)(),e),kt=["data-fe-attr"],Bt=St((()=>(0,D._)("label",{class:"io-node__port-text"},[(0,D._)("span",{class:"port-name"},"in")],-1)));function At(e,t,o,n,l,a){return(0,D.wg)(!0),(0,D.iD)(D.HY,null,(0,D.Ko)(e.feAttrValue,((o,n)=>((0,D.wg)(),(0,D.iD)("div",{class:"io-node__li",key:n},[(0,D._)("em",{class:"port in",style:(0,q.j5)({width:2*e.POINT_R+"px",height:2*e.POINT_R+"px",borderWidth:`${e.POINT_BORDER_W}px`}),"data-port-type":"in",r:"10","data-fe-attr":n,ref_for:!0,ref:e.setFeAttrEls,onMouseenter:t[0]||(t[0]=(...t)=>e.handlePortMouseenter&&e.handlePortMouseenter(...t))},null,44,kt),Bt])))),128)}var Nt=(0,D.aZ)({name:"MergeNode",props:{is:{type:String,required:!0},nodeId:{type:String,required:!0},relativePaths:{type:Object,required:!0}},setup(e){const{toPort:t,fromPort:o,ioNodeEl:n,setFeAttrEls:l,allDescendants:a,handlePortMouseenter:r,filterThumbUrl:i}=ht(),s=(0,C.iH)([""]),u=(0,D.Fl)((()=>({result:e.nodeId}))),c=(0,D.FN)().parent?.proxy,p=()=>{d.debug(t?.value,o?.value);const{attr:e}=[t?.value,o?.value].find((e=>e?.vm===c)),n=Number(e);s.value[n]=o.value.vm.nodeId,s.value[n+1]||(s.value[n+1]="")},f=e=>{const{attr:t}=e.to;s.value[Number(t)]=""},g=()=>{const{is:t,nodeId:o}=e;return(0,D.h)(t,{result:o},(0,C.SU)(s).filter((e=>!!e)).map((e=>(0,D.h)("feMergeNode",{in:e}))))};return{POINT_R:bt,POINT_BORDER_W:Dt,fromPort:o,ioNodeEl:n,setFeAttrEls:l,feAttrValue:s,mergedFeAttrValue:u,afterPathConnected:p,afterPathRemoved:f,handlePortMouseenter:r,allDescendants:a,filterThumbUrl:i,getVNodeFragment:g}}});const xt=(0,Q.Z)(Nt,[["render",At],["__scopeId","data-v-b64b5bd0"]]);var Rt=xt;function Mt(e,t,o,n,l,a){return(0,D.wg)(),(0,D.iD)("div")}var Ot=(0,D.aZ)({name:"SourceNode",props:{is:{type:String,required:!0},nodeId:{type:String,required:!0},relativePaths:{type:Object,required:!0}},setup(e){const{fromPort:t,ioNodeEl:o,setFeAttrEls:n,handlePortMouseenter:l,filterThumbUrl:a}=ht(),r=(0,C.OT)({result:e.is}),i=()=>(0,D.h)("feOffset",{in:e.is});return{POINT_R:bt,POINT_BORDER_W:Dt,fromPort:t,ioNodeEl:o,setFeAttrEls:n,mergedFeAttrValue:r,handlePortMouseenter:l,filterThumbUrl:a,getVNodeFragment:i}}});const Vt=(0,Q.Z)(Ot,[["render",Mt],["__scopeId","data-v-4ebf66e6"]]);var Ut=Vt;function Tt(e,t,o,n,l,a){return(0,D.wy)(((0,D.wg)(),(0,D.iD)("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.feAttrValue.value=t)},null,512)),[[b.nr,e.feAttrValue.value,void 0,{lazy:!0}]])}var jt=(0,D.aZ)({name:"SourceNode",props:{is:{type:String,required:!0},nodeId:{type:String,required:!0},relativePaths:{type:Object,required:!0}},setup(e){const{fromPort:t,ioNodeEl:o,setFeAttrEls:n,handlePortMouseenter:l,filterThumbUrl:a}=ht(),r=(0,C.iH)({value:""}),i=(0,D.Fl)((()=>({result:(0,C.SU)(r).value}))),s=()=>null;return{POINT_R:bt,POINT_BORDER_W:Dt,fromPort:t,ioNodeEl:o,setFeAttrEls:n,mergedFeAttrValue:i,handlePortMouseenter:l,filterThumbUrl:a,getVNodeFragment:s,feAttrValue:r}}});const Ht=(0,Q.Z)(jt,[["render",Tt],["__scopeId","data-v-68f4c358"]]);var Gt=Ht;const $t=["onUpdate:modelValue"];function Lt(e,t,o,n,l,a){return(0,D.wg)(),(0,D.iD)("div",null,[((0,D.wg)(!0),(0,D.iD)(D.HY,null,(0,D.Ko)(e.feAttrValue,((t,o)=>(0,D.wy)(((0,D.wg)(),(0,D.iD)("input",{key:o,"onUpdate:modelValue":t=>e.feAttrValue[o]=t,class:"input"},null,8,$t)),[[b.nr,e.feAttrValue[o]]]))),128))])}var Wt=(0,D.aZ)({name:"SourceNode",props:{is:{type:String,required:!0},nodeId:{type:String,required:!0},relativePaths:{type:Object,required:!0}},setup(e){const{fromPort:t,ioNodeEl:o,setFeAttrEls:n,handlePortMouseenter:l,filterThumbUrl:a}=ht(),r=(0,C.iH)((()=>{const e=new Array(20);return e.fill(0),e[0]=e[6]=e[12]=e[18]=1,e})()),i=(0,D.Fl)((()=>({result:r.value.join(" ")}))),s=()=>null;return{POINT_R:bt,POINT_BORDER_W:Dt,fromPort:t,ioNodeEl:o,setFeAttrEls:n,feAttrValue:r,mergedFeAttrValue:i,handlePortMouseenter:l,filterThumbUrl:a,getVNodeFragment:s}}});const Jt=(0,Q.Z)(Wt,[["render",Lt],["__scopeId","data-v-f802b5d6"]]);var qt=Jt;const Zt={key:0,class:"io-node__li"},zt=["data-fe-attr"],Yt={class:"io-node__port-text"},Xt={class:"port-name"};function Kt(e,t,o,n,l,a){return(0,D.wg)(!0),(0,D.iD)(D.HY,null,(0,D.Ko)(e.fe[e.is].ports,((o,n)=>((0,D.wg)(),(0,D.iD)(D.HY,{key:n},[!1!==o.showOnNode?((0,D.wg)(),(0,D.iD)("div",Zt,[(0,D._)("em",{class:"port in",style:(0,q.j5)({width:2*e.POINT_R+"px",height:2*e.POINT_R+"px",borderWidth:`${e.POINT_BORDER_W}px`}),"data-port-type":"in",r:"10","data-fe-attr":n,ref_for:!0,ref:e.setFeAttrEls,onMouseenter:t[0]||(t[0]=(...t)=>e.handlePortMouseenter&&e.handlePortMouseenter(...t))},null,44,zt),(0,D._)("label",Yt,[(0,D._)("span",Xt,(0,q.zw)(n),1)])])):(0,D.kq)("",!0)],64)))),128)}var Qt=(0,D.aZ)({name:"NormalNode",props:{is:{type:String,required:!0},nodeId:{type:String,required:!0},relativePaths:{type:Object,required:!0}},setup(e){const{fromPort:t,toPort:o,ioNodeEl:n,setFeAttrEls:l,allDescendants:a,handlePortMouseenter:r,filterThumbUrl:i}=ht(),s=(0,C.iH)({}),u=(0,D.Fl)((()=>{const t={};return e.relativePaths.in.forEach((e=>{t[e.to.attr]=e.from.vm.mergedFeAttrValue[e.from.attr]})),t})),c=(0,D.Fl)((()=>({in:u.value.in,result:e.nodeId}))),p=(0,D.f3)(x),f=e=>{const t=e.is,{mergedFeAttrValue:o}=e,n={};Object.keys(o||{}).forEach((e=>{void 0!==o[e]&&(n[e]=o[e]||""),n.in===n.result&&delete n.in,Object.prototype.hasOwnProperty.call(at[t].ports,"in")&&!n.in&&(n.in="SourceGraphic"),Object.prototype.hasOwnProperty.call(at[t].ports,"in2")&&!n.in2&&(n.in2="SourceGraphic")}));const l=at[t].tag??t,a={R:{type:"identity"},G:{type:"identity"},B:{type:"identity"},A:{type:"identity"}};return Object.keys(a).forEach((e=>{u.value[e]&&Object.assign(a[e],p.value[u.value[e]].mergedFeAttrValue)})),(0,D.h)(l,n,Object.entries(a).map((([e,t])=>(0,D.h)(`feFunc${e}`,t))))};if(d.debug(at[e.is]),["normal",void 0].includes(at[e.is].type)){const{ports:t}=at[e.is];Object.keys(t).forEach((e=>{["number","range"].includes(t[e].type)?s.value[e]=t[e].defaultValue??0:s.value[e]=t[e].defaultValue??""}))}return{POINT_R:bt,POINT_BORDER_W:Dt,fromPort:t,ioNodeEl:n,setFeAttrEls:l,feAttrValue:s,foreignPortValue:u,mergedFeAttrValue:c,afterPathConnected:ct,afterPathRemoved:ct,handlePortMouseenter:r,fe:at,allDescendants:a,filterThumbUrl:i,getVNodeFragment:f}}});const eo=(0,Q.Z)(Qt,[["render",Kt],["__scopeId","data-v-4866aacc"]]);var to=eo;const oo={key:0,class:"io-node__li"},no=["data-fe-attr"],lo={class:"io-node__port-text"},ao={class:"port-name"};function ro(e,t,o,n,l,a){return(0,D.wg)(!0),(0,D.iD)(D.HY,null,(0,D.Ko)(e.fe[e.is].ports,((o,n)=>((0,D.wg)(),(0,D.iD)(D.HY,{key:n},[!1!==o.showOnNode?((0,D.wg)(),(0,D.iD)("div",oo,[(0,D._)("em",{class:"port in",style:(0,q.j5)({width:2*e.POINT_R+"px",height:2*e.POINT_R+"px",borderWidth:`${e.POINT_BORDER_W}px`}),"data-port-type":"in",r:"10","data-fe-attr":n,ref_for:!0,ref:e.setFeAttrEls,onMouseenter:t[0]||(t[0]=(...t)=>e.handlePortMouseenter&&e.handlePortMouseenter(...t))},null,44,no),(0,D._)("label",lo,[(0,D._)("span",ao,(0,q.zw)(n),1)])])):(0,D.kq)("",!0)],64)))),128)}var io=(0,D.aZ)({name:"NormalNode",props:{is:{type:String,required:!0},nodeId:{type:String,required:!0},relativePaths:{type:Object,required:!0}},setup(e){const{fromPort:t,toPort:o,ioNodeEl:n,setFeAttrEls:l,allDescendants:a,handlePortMouseenter:r,filterThumbUrl:i}=ht(),s=(0,C.iH)({}),u=(0,D.Fl)((()=>{const t={};return e.relativePaths.in.forEach((e=>{t[e.to.attr]=e.from.vm.mergedFeAttrValue[e.from.attr]})),t})),c=(0,D.Fl)((()=>({type:at[e.is].ports.type.defaultValue,...s.value,...u.value,result:e.nodeId}))),p=()=>null;if(d.debug(at[e.is]),["normal",void 0].includes(at[e.is].type)){const{ports:t}=at[e.is];Object.keys(t).forEach((e=>{["number","range"].includes(t[e].type)?s.value[e]=t[e].defaultValue??0:s.value[e]=t[e].defaultValue??""}))}return{POINT_R:bt,POINT_BORDER_W:Dt,fromPort:t,ioNodeEl:n,setFeAttrEls:l,feAttrValue:s,foreignPortValue:u,mergedFeAttrValue:c,afterPathConnected:ct,afterPathRemoved:ct,handlePortMouseenter:r,fe:at,allDescendants:a,filterThumbUrl:i,getVNodeFragment:p}}});const so=(0,Q.Z)(io,[["render",ro],["__scopeId","data-v-2d4cd09e"]]);var uo=so,co=o(7282);const po=(0,D.aZ)({components:{NormalNode:Ft,MergeNode:Rt,SourceNode:Ut,StringLiteralNode:Gt,MatrixInFeColorMatrixNode:qt,ComponentTransferRootNode:to,ComponentTransferChildNode:uo},name:"IoNode",props:{is:{type:String,required:!0},nodeId:{type:String,required:!0},relativePaths:{type:Object,required:!0},position:{type:Array,required:!0}},setup(e,{emit:t}){const o=(0,D.FN)().proxy,n=(0,D.f3)(rt),l=(0,D.f3)("fromPort"),a=(0,D.f3)("toPort"),r=(0,C.iH)(),i=(0,C.iH)([0,0]),s=(0,C.iH)([]),u=e=>{e&&s.value.push(e)};(0,D.Xn)((()=>{s.value=[]}));const d=(0,D.Fl)((()=>{const t=e.is;return["normal",void 0].includes(at[t].type)?Ft:["merge"].includes(at[t].type)?Rt:["source"].includes(at[t].type)?Ut:["string-literal"].includes(at[t].type)?Gt:["matrix-in-fe-color-matrix"].includes(at[t].type)?qt:["component-transfer-root"].includes(at[t].type)?to:["component-transfer-child"].includes(at[t].type)?uo:"div"})),c=(0,C.iH)(),p=(0,D.Fl)((()=>c.value?.filterThumbUrl??"")),f=(0,D.Fl)((()=>c.value?.mergedFeAttrValue??{})),g=(0,D.Fl)((()=>c.value?.getVNodeFragment)),v=(0,D.Fl)((()=>c.value?.afterPathConnected??(()=>{}))),m=(0,D.Fl)((()=>c.value?.afterPathRemoved??(()=>{}))),h=(0,D.f3)("canvasScrollEl"),y=function(s){Ae(s,{start(e,{originEl:n}){if(st(n))t("port-start",{ev:e,originEl:n,vm:o});else{const t=r.value?.getBoundingClientRect();i.value=[e.pageX-t?.left-h.value.scrollLeft,e.pageY-t?.top-h.value.scrollTop]}},move(l,{originEl:a}){if(st(a))t("port-move",{ev:l,originEl:a,vm:o});else{const o=[l.pageX-i.value[0]-n.value.left,l.pageY-i.value[1]-n.value.top];t("update:position",o),(0,D.Y3)((()=>{const o=r.value?.getBoundingClientRect();i.value=[l.pageX-o?.left-h.value.scrollLeft,l.pageY-o?.top-h.value.scrollTop],t("node-move",e.relativePaths)}))}},up(e,{originEl:n}){st(n)&&(st(e.target)&&l?.value&&a?.value?t("port-connect",{ev:e,originEl:n,vm:o}):t("port-cancel",{ev:e,originEl:n,vm:o})),i.value=[0,0]}})},_=function(e){l?.value&&(t("destination-change",{ev:e,vm:null,originEl:null}),e.target?.removeEventListener("mouseout",_))},w=function(e){l?.value&&(t("destination-change",{ev:e,vm:o,originEl:e.target}),e.target?.addEventListener("mouseout",_))};(0,D.JJ)("handlePortMouseenter",w);const E=(0,D.Fl)((()=>{const e=new Set,t=o=>{e.add(o),o.relativePaths.in.forEach((e=>{t(e.from.vm)}))};return t(o),[...e]}));(0,D.JJ)("allDescendants",E);const P=(0,D.Fl)((()=>{const e=[];return E?.value.forEach((t=>{e.push(...t.relativePaths.in)})),e.length?dt(e):[o]}));(0,D.JJ)("orderedAllDescendants",P);const I=(0,D.Fl)((()=>P.value.map((e=>()=>e.getVNodeFragment(e))))),[S,k]=(0,D.f3)(H),B=()=>{k(o)},A=(0,D.Fl)((()=>S.value===o)),N=(0,D.f3)(F),x=async()=>{const t=()=>(0,D.h)("filter",{id:e.nodeId},I.value.map((e=>e()))),o=(0,b.ri)(t),n=document.createElementNS("http://www.w3.org/2000/svg","svg");o.mount(n),await(0,D.Y3)();const l=n.outerHTML;o.unmount(),await navigator.clipboard.writeText(l),co.Z.success("SVG filter code has been copied successfully.","success")},R=async()=>{const t=`filter: url(#${e.nodeId})`;await navigator.clipboard.writeText(t),co.Z.success("CSS rule code has been copied successfully.","success")};return{POINT_R:bt,POINT_BORDER_W:Dt,fromPort:l,ioNodeEl:r,InternalNodeImplement:d,setFeAttrEls:u,handleNodeMousedown:y,handlePortMouseenter:w,fe:at,allDescendants:E,afterPathConnected:v,afterPathRemoved:m,nodeConfigRef:c,filterThumbUrl:p,mergedFeAttrValue:f,getVNodeFragment:g,orderedAllDescendants:P,renderOfOrderedAllDescendants:I,focusingNode:S,handleNodeBodyClick:B,isFocused:A,removeNode:N,copySvgFilterCode:x,copyCssRule:R}}});var fo=po;const go=(0,Q.Z)(fo,[["render",ke],["__scopeId","data-v-06f83674"]]);var vo=go;const mo=["d"],ho=["transform"];function yo(e,t,o,n,l,a){const r=(0,D.up)("Delete"),i=(0,D.up)("el-icon"),s=(0,D.Q2)("pingping");return(0,D.wg)(),(0,D.iD)("g",{class:(0,q.C_)(["linked-path",{"linked-path__focused":e.focused}]),onFocus:t[4]||(t[4]=t=>e.focused=!0),onBlur:t[5]||(t[5]=t=>e.focused=!1)},[(0,D._)("path",{class:(0,q.C_)(["linked-path-path",{"linked-path__focused-path":e.focused}]),style:(0,q.j5)({strokeWidth:`${e.PATH_STROKE_W}px`}),d:e.pathD,onClick:t[0]||(t[0]=(...t)=>e.handlePathClick&&e.handlePathClick(...t)),ref:"pathRef"},null,14,mo),e.focused?((0,D.wg)(),(0,D.iD)("foreignObject",{key:0,transform:`translate(\n        ${e.p[0]},\n        ${e.p[1]}\n      )`,style:{overflow:"visible"}},[(0,D._)("div",{class:"linked-path__toolbox",xmlns:"http://www.w3.org/1999/xhtml",onClick:t[3]||(t[3]=(0,b.iM)((()=>{}),["stop"]))},[(0,D.wy)(((0,D.wg)(),(0,D.iD)("button",{class:"linked-path__toolbox-button",is:"ui-button",onMousedown:t[1]||(t[1]=(0,b.iM)((()=>{}),["prevent"])),onClick:t[2]||(t[2]=(0,b.iM)((t=>e.removePath(e.pathId)),["prevent"])),title:"Remove Link","data-type":"danger"},[(0,D.Wm)(i,null,{default:(0,D.w5)((()=>[(0,D.Wm)(r)])),_:1})],32)),[[s,{remark:`[io-path] ${e.from.vm.is} ${e.from.attr} 到 ${e.to.vm.is} ${e.to.attr} 的连线 按下了删除按钮`}]])])],8,ho)):(0,D.kq)("",!0)],34)}var _o=(0,D.aZ)({name:"IoPath",props:{pathDArguments:{type:Array,required:!0},pathId:{type:String,required:!0},from:{type:Object,required:!0},to:{type:Object,required:!0}},setup(e){const t=(0,D.Fl)((()=>{const t=e.pathDArguments;return`\n      M ${t[0]}, ${t[1]}\n      C ${t[2]}, ${t[3]}, ${t[4]}, ${t[5]}, ${t[6]}, ${t[7]}`})),o=(0,C.iH)(null),n=(0,C.iH)(!1),l=(0,D.Fl)((()=>{t.value,n.value;const{x:e,y:l}=o.value?.getPointAtLength(o.value?.getTotalLength()/2)||{x:0,y:0};return[e,l]})),a=(0,D.f3)(B),r=e=>{d.debug(e)},i=e=>{d.debug(e)};return{PATH_STROKE_W:Ct,focused:n,pathRef:o,pathD:t,p:l,removePath:a,handlePathClick:r,handlePathBlur:i}}});const wo=(0,Q.Z)(_o,[["render",yo],["__scopeId","data-v-36397aac"]]);var bo=wo;function Do(e){const{to:t,from:o}=e;let n=!1;const l=e=>{if(t.vm!==e.vm)for(let t=0;t<e.vm.relativePaths.in.length;t++){if(n)break;const o=e.vm.relativePaths.in[t];l(o.from)}else n=!0};return l(o),n}function Eo(e){const{to:t,from:o}=e,n=t.vm.relativePaths.in.filter((e=>t.attr===e.to.attr&&t.vm===e.to.vm));return n.length>0}function Co(e){if(e.from.vm===e.to.vm)throw new TypeError("Cannot link to self");if(e.from.el?.dataset.portType===e.to.el?.dataset.portType)throw new TypeError("Cannot create link when the two ports have same direction");if(Eo(e))throw new TypeError("Cannot create duplicate link");if(Do(e))throw new TypeError("Cannot create link when loop is detected");d.debug(e.to.vm.relativePaths.in[0]?.from.vm.relativePaths.in[0]?.from.vm.relativePaths.in)}function Po(){const e=(0,C.XI)(null),t=(0,D.FN)().proxy;let o=new ResizeObserver((([t],o)=>{e.value=t.target.getBoundingClientRect(),d.debug(e.value)}));return(0,D.bv)((()=>{o.observe(t.$el),(0,D.Jd)((()=>{o.disconnect()})),o=null})),{elRect:e}}var Io=(0,D.aZ)({name:"SvgCanvas",components:{IoNode:vo,IoPath:bo},setup(){const e=(0,C.XI)();(0,D.JJ)("canvasScrollEl",e);const t=Po().elRect;(0,D.JJ)(rt,t);const o=(0,D.f3)(S),n=(0,D.f3)(A),l=(0,D.f3)(P),a=(0,D.f3)(k),r=(0,D.f3)(N),i=(0,D.f3)(x),s=e=>{e&&(i.value[e.nodeId]=e)};(0,D.Xn)((()=>{i.value={}}));const u=(0,C.iH)([0,0,0,0,0,0,0,0]),c=(0,D.Fl)((()=>{const e=u.value;return`\nM ${e[0]}, ${e[1]}\nC ${e[2]}, ${e[3]}, ${e[4]}, ${e[5]}, ${e[6]}, ${e[7]}`})),p=(0,C.iH)(null),g=(0,C.iH)(null);(0,D.JJ)("fromPort",p),(0,D.JJ)("toPort",g);const v=({originEl:o,vm:n})=>{const l=o;p.value={vm:n,attr:o.dataset?.feAttr??"",el:o};const a=[l.getBoundingClientRect().x,l.getBoundingClientRect().y];"in"===it(l)&&(u.value=[a[0],a[1]+bt,a[0]+Et+bt,a[1]+bt,a[0]-Et+bt,a[1]+bt,a[0],a[1]+bt].map(((o,n)=>n%2===0?o+e.value.scrollLeft-t.value.left:o+e.value.scrollTop-t.value.top))),"out"===it(l)&&(u.value=[a[0]+2*bt,a[1]+bt,a[0]+Et+bt,a[1]+bt,a[0]-Et+bt,a[1],a[0],a[1]].map(((o,n)=>n%2===0?o+e.value.scrollLeft-t.value.left:o+e.value.scrollTop-t.value.top)))},m=({ev:o,originEl:n})=>{"in"===it(n)&&(u.value=[o.pageX,o.pageY,o.pageX+Et,o.pageY,...u.value.slice(4)].map(((o,n)=>n<=3?n%2===0?o+e.value.scrollLeft-t.value.left:o+e.value.scrollTop-t.value.top:o))),"out"===it(n)&&(u.value=[...u.value.slice(0,4),o.pageX-Et,o.pageY,o.pageX,o.pageY].map(((o,n)=>n>=4?n%2===0?o+e.value.scrollLeft-t.value.left:o+e.value.scrollTop-t.value.top:o)))},h=({ev:o,originEl:l})=>{const a=o.target,i=[a.getBoundingClientRect().x,a.getBoundingClientRect().y];let s,c=[];"in"===it(l)&&(c=[i[0]+2*bt,i[1]+bt,i[0]+Et+bt,i[1]+bt,...u.value.slice(4)].map(((o,n)=>n<=3?n%2===0?o+e.value.scrollLeft-t.value.left:o+e.value.scrollTop-t.value.top:o)),s={pathDArguments:c,id:f(),to:p.value,from:g.value}),"out"===it(l)&&(c=[...u.value.slice(0,4),i[0]-Et+bt,i[1]+bt,i[0],i[1]+bt].map(((o,n)=>n>=4?n%2===0?o+e.value.scrollLeft-t.value.left:o+e.value.scrollTop-t.value.top:o)),s={pathDArguments:c,id:f(),from:p.value,to:g.value},d.log(`[svg-canvas] 建立了一条${s.from.vm.is} ${s.from.attr} 到 ${s.to.vm.is} ${s.to.attr} 的连线`));try{Co(s),n(s),"out"===it(l)?(r(s,p,g),g.value?.vm?.afterPathConnected?.()):(r(s,g,p),p.value?.vm?.afterPathConnected?.())}catch(v){co.Z.error(v.message),d.error(v)}p.value=null,g.value=null,u.value.fill(0)},y=()=>{d.log(`[svg-canvas] ${p.value?.vm.is} ${p.value?.attr} 到 ${g.value?.vm.is} ${g.value?.attr} 的连线已取消`),d.debug("canceled"),p.value=null,g.value=null,u.value.fill(0)},_=({vm:e,originEl:t,ev:o})=>{g.value={vm:e,attr:o.target?.dataset?.feAttr??"",el:t}},w=o=>{o.out.forEach((o=>{const n=[o.from.el?.getBoundingClientRect().x??0,o.from.el?.getBoundingClientRect().y??0];o.pathDArguments=[n[0]+2*bt,n[1]+bt,n[0]+Et+bt,n[1]+bt,...o.pathDArguments.slice(4)].map(((o,n)=>n<=3?n%2===0?o+e.value.scrollLeft-t.value.left:o+e.value.scrollTop-t.value.top:o))})),o.in.forEach((o=>{const n=[o.to.el?.getBoundingClientRect().x??0,o.to.el?.getBoundingClientRect().y??0];o.pathDArguments=[...o.pathDArguments.slice(0,4),n[0]-Et+bt,n[1]+bt,n[0],n[1]+bt].map(((o,n)=>n>=4?n%2===0?o+e.value.scrollLeft-t.value.left:o+e.value.scrollTop-t.value.top:o))}))},b=(0,D.f3)(T),E=(0,D.f3)(U),F=(0,C.iH)([0,0]),B=(0,C.OT)({in:[],out:[]}),R=(0,D.f3)(I),M=async o=>{const{nodes:l,nodeForms:a,links:s}=o.stuff;Object.values(l).forEach((e=>{R(e)})),await(0,D.Y3)(),Object.entries(a).forEach((([e,t])=>{Object.keys(t).forEach((o=>{[(0,q.RI)(i.value[e].nodeConfigRef.feAttrValue,o),"feMerge"===l[e].is].includes(!0)&&(i.value[e].nodeConfigRef.feAttrValue[o]=t[o])}))})),await(0,D.Y3)(),Object.values(s).map((o=>{const n=window.structuredClone(o);n.from.vm=i.value[o.from.vmId],n.from.el=n.from.vm.$el.querySelector(`[data-fe-attr="${o.from.attr}"]`);const l=[n.from.el.getBoundingClientRect().x,n.from.el.getBoundingClientRect().y];n.to.vm=i.value[o.to.vmId],n.to.el=n.to.vm.$el.querySelector(`[data-fe-attr="${o.to.attr}"]`);const a=[n.to.el.getBoundingClientRect().x,n.to.el.getBoundingClientRect().y];return n.pathDArguments=[l[0]+2*bt,l[1]+bt,l[0]+Et+bt,l[1]+bt,a[0]-Et+bt,a[1]+bt,a[0],a[1]+bt].map(((o,n)=>n%2===0?o+e.value.scrollLeft-t.value.left:o+e.value.scrollTop-t.value.top)),n})).forEach((e=>{try{Co(e),n(e),r(e,e.from,e.to),g.value=e.to,p.value=e.from,e.to.vm?.afterPathConnected?.()}catch(t){d.error(t)}p.value=null,g.value=null}))};return{canvasScrollEl:e,svgCanvasRect:t,ghostPathD:c,ghostNodeRef:b,ghostNodeType:E,ghostNodePosition:F,nodes:l,setNodeRefMap:s,linkedPaths:o,handlePortStart:v,handlePortMove:m,handlePortConnect:h,handlePortCancel:y,handleDestinationChange:_,handleNodeMove:w,fromPort:p,toPort:g,defaultRelativePath:B,relativePathMapIndexedByNodeId:a,loadCanvasStuffFromSerializedData:M}}});const Fo=(0,Q.Z)(Io,[["render",Ce],["__scopeId","data-v-e2e7568c"]]);var So=Fo;const ko=e=>((0,D.dD)("data-v-804d09c2"),e=e(),(0,D.Cn)(),e),Bo={key:0,class:"svg-canvas__overlay-tip"},Ao=ko((()=>(0,D._)("h1",{style:{fontSize:"2em"}},"🥴 Embarrassed! No nodes here.",-1))),No=ko((()=>(0,D._)("br",null,null,-1))),xo=ko((()=>(0,D._)("strong",null,"drag",-1))),Ro=ko((()=>(0,D._)("br",null,null,-1)));var Mo=(0,D.aZ)({__name:"SvgCanvasOverlayTip",setup(e){const t=(0,D.f3)(se),o=(0,D.f3)(P),n=(0,D.f3)(pe);return(e,l)=>0===Object.keys((0,C.SU)(o)).length?((0,D.wg)(),(0,D.iD)("div",Bo,[Ao,(0,D._)("p",{style:(0,q.j5)({fontSize:"1.5em"})},[(0,D.Uk)(" 👈 "),No,(0,D.Uk)(" To add a node, please "),xo,(0,D.Uk)(" a node definition from the left panel, "),Ro,(0,D.Uk)(" then drop it HERE. ")],4),(0,D.Uk)(" "+(0,q.zw)((0,C.SU)(t))+" ",1),(0,C.SU)(t)?(0,D.kq)("",!0):((0,D.wg)(),(0,D.iD)("div",{key:0,style:(0,q.j5)({fontSize:"1.5em"})},[(0,D.Uk)(" Are your new here? you can "),(0,D._)("a",{href:"javascript:;",onClick:l[0]||(l[0]=(0,b.iM)((e=>(0,C.SU)(n)((0,C.SU)(ae)[0].id)),["prevent"])),"data-type":"primary"},"open the sample project"),(0,D.Uk)(" and see how does the app work. ")],4))])):(0,D.kq)("",!0)}});const Oo=(0,Q.Z)(Mo,[["__scopeId","data-v-804d09c2"]]);var Vo=Oo;const Uo={class:"node-library-panel"},To={class:"menu-list"},jo=["onMousedown"];function Ho(e,t,o,n,l,a){const r=(0,D.Q2)("pingping");return(0,D.wg)(),(0,D.iD)("div",Uo,[((0,D.wg)(!0),(0,D.iD)(D.HY,null,(0,D.Ko)(e.menuGroup,((t,o)=>((0,D.wg)(),(0,D.iD)("div",{key:o},[(0,D._)("h4",null,(0,q.zw)(e.menuGroup.title),1),(0,D._)("ul",To,[((0,D.wg)(!0),(0,D.iD)(D.HY,null,(0,D.Ko)(t.children,((t,o)=>(0,D.wy)(((0,D.wg)(),(0,D.iD)("li",{key:o,onMousedown:o=>e.handleIconMousedown(o,t)},[(0,D.Uk)((0,q.zw)(t.title),1)],40,jo)),[[r,{remark:`[node-library-panel] ${t.title} 节点开始拖拽`}]]))),128))])])))),128))])}const Go=[{title:"组1",children:Object.keys(at).map((e=>({title:e})))}];var $o=(0,D.aZ)({name:"NodeLibraryPanel",setup(e,{emit:t}){const o=(0,D.f3)($),n=(0,D.Fl)((()=>o.value.svgCanvasRect)),l=(0,D.f3)(T),a=(0,D.f3)(U),r=(0,D.f3)(I),i=function(e,t){Ae(e,{start(e,{originEl:r}){a.value=t.title,(0,D.Y3)((()=>l.value.$emit("update:position",[e.clientX+o.value.$el.scrollLeft-n.value.left,e.clientY+o.value.$el.scrollTop-n.value.top])))},move(e,{originEl:t}){d.debug(l.value),l.value.$emit("update:position",[e.clientX+o.value.$el.scrollLeft-n.value.left,e.clientY+o.value.$el.scrollTop-n.value.top])},up(e,{originEl:l}){const i=o.value?.$el.getBoundingClientRect();e.clientX>i.x&&e.clientX<i.x+i.width&&e.clientY>i.y&&e.clientY<i.y+i.height?(r({is:t.title,id:f(),position:[e.clientX+o.value.$el.scrollLeft-n.value.left,e.clientY+o.value.$el.scrollTop-n.value.top]}),d.log(`[node-library-panel] ${t.title} 节点已被放置到canvas上`)):d.log(`[node-library-panel] ${t.title} 节点的创建过程已取消`),a.value=null}})};return{handleIconMousedown:i,menuGroup:Go,filterLibraryPanelWidth:yt}}});const Lo=(0,Q.Z)($o,[["render",Ho],["__scopeId","data-v-ffe3e260"]]);var Wo=Lo;const Jo=e=>((0,D.dD)("data-v-d62e7784"),e=e(),(0,D.Cn)(),e),qo={class:"stuff-config-panel"},Zo={class:"stuff-config-panel__title-bar"},zo={class:"stuff-config-panel__main"},Yo={key:0},Xo={key:1},Ko=Jo((()=>(0,D._)("h3",null,"Opus! 🫢",-1))),Qo=Jo((()=>(0,D._)("br",null,null,-1)));function en(e,t,o,n,l,a){const r=(0,D.up)("form-item");return(0,D.wg)(),(0,D.iD)("div",qo,[(0,D._)("div",Zo,[e.focusingNode?((0,D.wg)(),(0,D.iD)(D.HY,{key:0},[(0,D.Uk)(" 👀 Editing - "+(0,q.zw)(e.focusingNode?.is),1)],64)):((0,D.wg)(),(0,D.iD)(D.HY,{key:1},[(0,D.Uk)(" 👈 Click a node, then configure it ! ")],64))]),(0,D._)("div",zo,[e.focusingNode?((0,D.wg)(),(0,D.iD)("div",Yo,[e.formFieldConfig&&Object.values(e.formFieldConfig.ports).some((e=>[void 0,!0].includes(e.showInConfigPanel)))?((0,D.wg)(),(0,D.iD)("form",{key:0,onSubmit:t[0]||(t[0]=(0,b.iM)((()=>{}),["prevent"]))},[((0,D.wg)(!0),(0,D.iD)(D.HY,null,(0,D.Ko)(e.formFieldConfig.ports,((e,t)=>((0,D.wg)(),(0,D.j4)(r,{key:t,schema:e,"field-id":t,style:{marginBottom:"16px"}},null,8,["schema","field-id"])))),128))],32)):((0,D.wg)(),(0,D.iD)("div",Xo,[Ko,(0,D.Uk)(" No fields can be edited here."),Qo,(0,D.Uk)(" Look around this node on the canvas, and create links between the available ports. ")]))])):(0,D.kq)("",!0)])])}const tn=e=>((0,D.dD)("data-v-4b07fcca"),e=e(),(0,D.Cn)(),e),on={key:0},nn=tn((()=>(0,D._)("br",null,null,-1))),ln=["value"],an=["min","max","step"];var rn=(0,D.aZ)({__name:"FormItem",props:{schema:{type:Object},fieldId:{type:String}},setup(e){const t=e,o=(0,D.Fl)((()=>t.fieldId)),[n]=(0,D.f3)(H),l=(0,D.Fl)((()=>(0,C.SU)(n)?.nodeConfigRef?.feAttrValue??{})),a=(0,D.Fl)((()=>(0,C.SU)(n)?.nodeConfigRef?.foreignPortValue??{})),r=(0,D.Fl)((()=>(0,q.RI)((0,C.SU)(a),o.value))),i=(e,t)=>e,s=(0,D.Fl)((()=>({disabled:(0,C.SU)(r),value:(0,C.SU)(r)?i(a.value[(0,C.SU)(o)],(0,C.SU)(o)):l.value[(0,C.SU)(o)],onChange:e=>{e.stopPropagation(),l.value[(0,C.SU)(o)]=e.target.value}})));return(t,n)=>!1!==e.schema?.showInConfigPanel?((0,D.wg)(),(0,D.iD)("div",on,[(0,D._)("label",null,(0,q.zw)((0,C.SU)(o)),1),nn,"text"!==e.schema?.type&&e.schema?.type?(0,D.kq)("",!0):((0,D.wg)(),(0,D.iD)(D.HY,{key:0},[Array.isArray(e.schema?.enum)?((0,D.wg)(),(0,D.iD)("select",(0,D.dG)({key:0,is:"ui-select"},(0,C.SU)(s)),[((0,D.wg)(!0),(0,D.iD)(D.HY,null,(0,D.Ko)(e.schema.enum,(e=>((0,D.wg)(),(0,D.iD)("option",{key:e&&"object"===typeof e?e.value:e,value:e&&"object"===typeof e?e.value:e},(0,q.zw)(e&&"object"===typeof e?e.label:e),9,ln)))),128))],16)):((0,D.wg)(),(0,D.iD)("input",(0,D.dG)({key:1,is:"ui-input",type:"text",size:"20"},(0,C.SU)(s)),null,16))],64)),"color"===e.schema?.type?((0,D.wg)(),(0,D.iD)("input",(0,D.dG)({key:1,is:"ui-color",type:"color-opacity"},(0,C.SU)(s)),null,16)):"number"===e.schema?.type?((0,D.wg)(),(0,D.iD)("input",(0,D.dG)({key:2,is:"ui-input",type:"number",size:"20"},(0,C.SU)(s)),null,16)):"range"===e.schema?.type?((0,D.wg)(),(0,D.iD)("input",(0,D.dG)({key:3,is:"ui-range",type:"range",min:e.schema.range[0],max:e.schema.range[1],step:e.schema.step??1},(0,C.SU)(s)),null,16,an)):(0,D.kq)("",!0)])):(0,D.kq)("",!0)}});const sn=(0,Q.Z)(rn,[["__scopeId","data-v-4b07fcca"]]);var un=sn,dn=(0,D.aZ)({name:"StuffConfigPanel",components:{FormItem:un},setup(e,{emit:t}){const[o]=(0,D.f3)(H),n=(0,D.Fl)((()=>(0,C.SU)(o)&&(0,C.SU)(o)?.is?at[(0,C.SU)(o).is]:null));return{stuffConfigPanelWidth:_t,focusingNode:o,formFieldConfig:n}}});const cn=(0,Q.Z)(dn,[["render",en],["__scopeId","data-v-d62e7784"]]);var pn=cn;const fn=e=>((0,D.dD)("data-v-f096675a"),e=e(),(0,D.Cn)(),e),gn={class:"output-preview-panel__menu-bar"},vn={class:"output-preview-panel__menu-bar__left-content"},mn={class:"output-preview-panel__drag-move-handler"},hn=fn((()=>(0,D._)("span",{class:"output-preview-panel__menu-bar-text"},"Preview",-1))),yn={class:"output-preview-panel__menu-bar__right-content"},_n={class:"output-preview-panel__content",ref:"filteredContentEl"},wn=["src"],bn={key:1,class:"output-preview-panel__image-placeholder"},Dn=fn((()=>(0,D._)("br",null,null,-1))),En={class:"output-preview-panel__image__drag-is-hovering__tip"},Cn=fn((()=>(0,D._)("div",{class:"output-preview-panel__tools"},null,-1))),Pn={class:"output-preview-panel__se-resize-corner"};function In(e,t,o,n,l,a){const r=(0,D.up)("Rank"),i=(0,D.up)("el-icon"),s=(0,D.up)("filter-def"),u=(0,D.Q2)("pingping"),d=(0,D.Q2)("move"),c=(0,D.Q2)("resize");return(0,D.wg)(),(0,D.iD)("div",{class:"output-preview-panel",ref:e.outputPreviewPanelRootEl},[(0,D._)("div",gn,[(0,D._)("div",vn,[(0,D.wy)(((0,D.wg)(),(0,D.iD)("div",mn,[(0,D.Wm)(i,{size:24,color:"#fff"},{default:(0,D.w5)((()=>[(0,D.Wm)(r)])),_:1})])),[[u,{remark:"[output-preview-panel] 移动预览面板（左上角）"}],[d]]),hn]),(0,D._)("div",yn,[e.sourceImageSrc?(0,D.wy)(((0,D.wg)(),(0,D.iD)("button",{key:0,class:"lu-ui__extend-small",is:"ui-button",onClick:t[0]||(t[0]=(...t)=>e.removePreviewImage&&e.removePreviewImage(...t))},[(0,D.Uk)(" Remove Preview Image ")])),[[u,{remark:"[output-preview-panel] 移除示例图片"}]]):(0,D.kq)("",!0),e.sourceImageSrc?(0,D.wy)(((0,D.wg)(),(0,D.iD)("button",{key:1,class:"lu-ui__extend-small",is:"ui-button",onClick:t[1]||(t[1]=(...t)=>e.saveFilteredImage&&e.saveFilteredImage(...t))},[(0,D.Uk)(" Save as PNG ")])),[[u,{remark:"[output-preview-panel] 另存为PNG"}]]):(0,D.kq)("",!0)])]),(0,D._)("div",_n,[(0,D.Wm)(s,{"filter-el-id":"previewingFilter"}),(0,D._)("div",{class:"output-preview-panel__image-wrap",onDragstart:t[7]||(t[7]=(0,b.iM)((()=>{}),["stop","prevent"])),onDragover:t[8]||(t[8]=(0,b.iM)((t=>e.dragIsHovering=!0),["stop","prevent"])),onDragleave:t[9]||(t[9]=(0,b.iM)((t=>e.dragIsHovering=!1),["stop","prevent"])),onDrop:t[10]||(t[10]=(0,b.iM)(((...t)=>e.handleDropOnImageWrap&&e.handleDropOnImageWrap(...t)),["stop","prevent"]))},[e.sourceImageSrc?((0,D.wg)(),(0,D.iD)("img",{key:0,class:"output-preview-panel__image",src:e.sourceImageSrc,onError:t[2]||(t[2]=t=>e.sourceImageSrc=""),ref:"sourceImageEl"},null,40,wn)):((0,D.wg)(),(0,D.iD)("div",bn,[(0,D._)("div",null,[(0,D.Uk)(" Drop your image here, then use it as the source image."),Dn,(0,D.Uk)(" You can also "),(0,D._)("input",{ref:"fileInputEl",type:"file",style:{display:"block",opacity:0,position:"fixed",visibility:"hidden"},onChange:t[3]||(t[3]=(...t)=>e.handleFileInputChange&&e.handleFileInputChange(...t))},null,544),(0,D.wy)(((0,D.wg)(),(0,D.iD)("button",{class:"lu-ui__extend-small",is:"ui-button","data-type":"primary",onClick:t[4]||(t[4]=()=>{e.fileInputEl.click()})},[(0,D.Uk)("choose a image")])),[[u,{remark:"[output-preview-panel] 选择图片"}]]),(0,D.Uk)(", "),(0,D.wy)(((0,D.wg)(),(0,D.iD)("button",{class:"lu-ui__extend-small",is:"ui-button","data-type":"primary",onClick:t[5]||(t[5]=(...t)=>e.showImageUrlInputDialog&&e.showImageUrlInputDialog(...t))},[(0,D.Uk)("enter the url of the image")])),[[u]]),(0,D.Uk)("  or  "),(0,D.wy)(((0,D.wg)(),(0,D.iD)("button",{class:"lu-ui__extend-small",is:"ui-button","data-type":"primary",onClick:t[6]||(t[6]=(...t)=>e.loadSampleImage&&e.loadSampleImage(...t))},[(0,D.Uk)("use sample image")])),[[u,{remark:"[output-preview-panel] 使用示例图片"}]]),(0,D.Uk)(". ")])])),(0,D.wy)((0,D._)("div",En,null,512),[[b.F8,e.dragIsHovering]])],32),Cn],512),(0,D.wy)((0,D._)("div",Pn,null,512),[[u,{remark:"[output-preview-panel] 调整预览面板大小（右下角）"}],[c]])],512)}o(3408),o(4590);const Fn={class:"filter-def"},Sn=["id"];function kn(e,t,o,n,l,a){return(0,D.wg)(),(0,D.iD)("div",Fn,[((0,D.wg)(),(0,D.iD)("svg",null,[(0,D._)("defs",null,[(0,D._)("filter",{id:e.filterElId},[((0,D.wg)(!0),(0,D.iD)(D.HY,null,(0,D.Ko)(e.renderOfOrderedAllDescendants,((e,t)=>((0,D.wg)(),(0,D.j4)((0,D.LL)(e),{key:t})))),128))],8,Sn)])]))])}var Bn=(0,D.aZ)({name:"FeDef",props:{filterElId:{type:String}},setup(){const[e]=(0,D.f3)(H),t=(0,D.Fl)((()=>e.value?.renderOfOrderedAllDescendants??(()=>null)));return{focusingNode:e,renderOfOrderedAllDescendants:t}}});const An=(0,Q.Z)(Bn,[["render",kn],["__scopeId","data-v-3b8b776a"]]);var Nn=An,xn=o(9306),Rn=o.n(xn),Mn=(0,D.aZ)({name:"OutputPreviewPanel",components:{FilterDef:Nn},directives:{move:{mounted(e){e.__vDragMainElToBeDragged__=document.querySelector(".output-preview-panel");const t=t=>Ae(t,{start(t){const o=e.getBoundingClientRect();e.__vDragClickedRelativePosition__=[t.pageX-o?.left,t.pageY-o?.top]},move(t){const n=[t.pageX-e.__vDragClickedRelativePosition__[0],t.pageY-e.__vDragClickedRelativePosition__[1]];e.__vDragMainElToBeDragged__.style.left=n[0]+"px",e.__vDragMainElToBeDragged__.style.top=n[1]+"px",o()},up(){o(),d.log("[output-preview-panel] [输出预览面板] 当前位置及尺寸",[e.__vDragMainElToBeDragged__.style.left,e.__vDragMainElToBeDragged__.style.top,e.__vDragMainElToBeDragged__.style.width,e.__vDragMainElToBeDragged__.style.height].map((e=>parseInt(e)))),delete e.__vDragClickedRelativePosition__}});function o(){const t=e.__vDragMainElToBeDragged__.getBoundingClientRect();t.x<=0?e.__vDragMainElToBeDragged__.style.left="0px":t.x+t.width>window.innerWidth&&(e.__vDragMainElToBeDragged__.style.left=window.innerWidth-t.width+"px"),t.y<=0?e.__vDragMainElToBeDragged__.style.top="0px":t.y+t.height>window.innerHeight&&(e.__vDragMainElToBeDragged__.style.top=window.innerHeight-t.height+"px")}window.addEventListener("resize",o),e.addEventListener("mousedown",t),e.__vDragDispose__=()=>{delete e.__vDragDispose__,delete e.__vDragMainElToBeDragged__,e.removeEventListener("mousedown",t),window.removeEventListener("resize",o)}},unmounted(e){e.__vDragDispose__()}},resize:{mounted(e){e.__vResizeMainElToBeResized__=document.querySelector(".output-preview-panel");const t=t=>Ae(t,{move(t){const o=e.__vResizeMainElToBeResized__.getBoundingClientRect(),n=[t.pageX-o.x,t.pageY-o.y];o.x+n[0]>=window.innerWidth&&(n[0]-=t.pageX-window.innerWidth),o.y+n[1]>window.innerHeight&&(n[1]-=t.pageY-window.innerHeight),o.width>=window.innerWidth&&(n[0]=window.innerWidth),o.height>=window.innerHeight&&(n[1]=window.innerWidth),e.__vResizeMainElToBeResized__.style.width=n[0]+"px",e.__vResizeMainElToBeResized__.style.height=n[1]+"px"},up(){d.log("[output-preview-panel] [输出预览面板] 当前位置及尺寸",[e.__vResizeMainElToBeResized__.style.left,e.__vResizeMainElToBeResized__.style.top,e.__vResizeMainElToBeResized__.style.width,e.__vResizeMainElToBeResized__.style.height].map((e=>parseInt(e))))}});e.addEventListener("mousedown",t),e.__vResizeDispose__=()=>{delete e.__vResizeDispose__,delete e.__vResizeMainElToBeResized__,e.removeEventListener("mousedown",t)}},unmounted(e){e.__vResizeDispose__()}}},setup(){const e=(0,C.iH)();(0,D.YP)(e,((e,t)=>{URL.revokeObjectURL(t)})),(0,D.Ah)((()=>{URL.revokeObjectURL((0,C.SU)(e))}));const t=()=>{e.value="./demo/assets/rinkysplash.jpg"},o=()=>{e.value=""},n=(0,C.iH)(),l=(0,C.iH)(!1),a=t=>{l.value=!1;const o=t.dataTransfer?.files[0];o&&(d.log("[output-preview-panel] [加载示例图片] 用户通过拖拽加载了示例图片"),e.value=URL.createObjectURL(o))},r=(0,C.XI)(),i=t=>{const o=t.target.files?.[0];o&&(d.log("[output-preview-panel] [加载示例图片] 用户通过文件选择器加载了示例图片"),e.value=URL.createObjectURL(o))},s=()=>{let t="";while(""===t?.trim())t=window.prompt("Enter the url of the your image");if(null===t)return Promise.reject(new Error("[output-preview-panel][输入图片url] 用户取消输入"));d.log("[output-preview-panel][加载示例图片] 用户通过输入图片URL加载了示例图片"),e.value=t},u=(0,C.iH)(),c=(0,C.XI)(),p=async()=>{try{if(!e.value)return void co.Z.error("No image can be exported, please select a image.");const o=u.value.cloneNode(!0),n=o.querySelector(".output-preview-panel__image");await new Promise(((e,t)=>{n.addEventListener("load",e,{once:!0}),n.addEventListener("error",t,{once:!0})})),n.style.minWidth=n.naturalWidth+"px",n.style.minHeight=n.naturalHeight+"px";const l=document.createElement("div");l.append(o),Object.assign(l.style,{position:"absolute",top:0,right:0,bottom:0,left:0,width:0,height:0,overflow:"hidden"}),document.body.append(l);let a="";try{a=await Rn().toPng(o)}catch(t){throw d.log("[output-preview-panel][生成图片]",e.value),d.error("[output-preview-panel][生成图片] 生成图片过程发生错误，请稍后重试",t),t}finally{l.remove()}const r=atob((()=>{const e=a.split(",");return e[e.length-1]})()),i=new Uint8Array(r.length);for(let e=0;e<i.length;e++)i[e]=r.charCodeAt(e);const s=new Blob([i],{type:"image/png"}),c=URL.createObjectURL(s);window.open(c,"_blank")}catch(t){co.Z.error("We encountered a error when generating the result image. Maybe the image is from other website and cannot be accessed by the app.")}};return{sourceImageSrc:e,loadSampleImage:t,removePreviewImage:o,outputPreviewPanelRootEl:n,dragIsHovering:l,handleDropOnImageWrap:a,showImageUrlInputDialog:s,fileInputEl:r,handleFileInputChange:i,sourceImageEl:c,filteredContentEl:u,saveFilteredImage:p}}});const On=(0,Q.Z)(Mn,[["render",In],["__scopeId","data-v-f096675a"]]);var Vn=On;o(541);const Un="Untitled",Tn={class:"about-content"},jn=(0,D._)("br",null,null,-1),Hn=(0,D._)("a",{target:"_blank",href:"https://github.com/gogoend"},"gogoend",-1),Gn=(0,D.uE)('<p> The project is inspired by the following project: </p><ul><li><a target="_blank" href="https://github.com/poletaevvlad/svg-filter-editor">poletaevvlad / svg-filter-editor</a></li><li><a target="_blank" href="https://github.com/yoksel/svg-filters">yoksel / svg-filters</a></li></ul><p> The program includes some source code from the following open source projects: </p><ul><li><a target="_blank" href="https://github.com/vuejs/core">vuejs / core</a></li><li><a target="_blank" href="https://github.com/element-plus/element-plus">dexie / Dexie.js</a></li><li><a target="_blank" href="https://github.com/yued-fe/lulu">yued-fe / lulu</a></li><li><a target="_blank" href="https://github.com/element-plus/element-plus">element-plus / element-plus</a></li><li><a target="_blank" href="https://github.com/tsayen/dom-to-image">tsayen / dom-to-image</a></li></ul><p> The sample image is downloaded from the website of <a target="_blank" href="https://peach.blender.org/media-gallery/"><i>Big Buck Bunny</i></a> - a movie is totally made with open source digital content creators. </p><p> Thanks to my employer, <a target="_blank" href="https://www.aicloud.com/">Beijing SinoVoice Technology Co.,Ltd.</a> (aka. <a target="_blank" href="https://www.aicloud.com/">北京捷通华声科技股份有限公司</a> in Chinese), which gives me a WLB life style to let me do my hobby after work. </p>',6);var $n=(0,D.aZ)({__name:"AboutContent",setup(e){return(e,t)=>((0,D.wg)(),(0,D.iD)("div",Tn,[(0,D._)("p",null,[(0,D.Uk)(" SVG Filter Node Builder v"+(0,q.zw)((0,C.SU)(n).version)+" ",1),jn,(0,D.Uk)(" ©️2021-2022 "),Hn]),Gn]))}});const Ln=$n;var Wn=Ln;function Jn(){let e=null;new J.Z({title:"About",content:'<div class="about-dialog-dialog" />',width:"480px",buttons:[{value:"Close"}],async onShow(){const t=this.querySelector(".about-dialog-dialog");e=(0,b.ri)(Wn),e.mount(t)},onRemove(){e.unmount(),e=null}})}const qn={class:"menu-bar"},Zn={class:"menu-bar__left"},zn={class:"seg-content menu-entry-list"},Yn=["onMouseenter","onMouseleave"],Xn={class:"submenu-list",style:{position:"absolute",top:"100%",left:0}},Kn=["onMouseenter","onMouseleave","onClick"],Qn={key:0},el={class:"menu-bar__center"},tl={class:"seg-content"},ol={class:"menu-bar__right"},nl={class:"seg-content"},ll={target:"_blank",href:"https://github.com/gogoend/svg-filter-graph-builder"};var al=(0,D.aZ)({__name:"TopMenuBar",setup(e){const t=(0,C.iH)({}),o=e=>{e.disabled||(t.value[e.id]=!0)},n=e=>{e.disabled||delete t.value[e.id]},l=(0,D.f3)(re),a=(0,D.f3)(ie),r=(0,D.f3)(de),i=(0,D.f3)(ce),s=(0,D.f3)(ve),u=(0,D.f3)(ge),d=(0,D.f3)(pe),c=(0,D.Fl)((()=>[{id:"File",label:"File",subMenu:[{id:"Open",label:"Open...",onClick(){i()}},{id:"Save",label:"Save",async onClick(){await l(),co.Z.success("Saved successfully","success")}},{id:"Save As...",label:"Save As...",async onClick(){await a(),co.Z.success("Saved successfully","success")}},{id:"Close",label:"Close",onClick(){r()}},{id:"Hr between close and install",type:"hr"},{id:"Install Desktop Icon",label:"Install Desktop Icon",disabled:null===s.value,async onClick(){u()}}]},{id:"Sample",label:"Sample",subMenu:ae.map((e=>({id:e.id,label:e.project.name,onClick(){d(e.id)}})))},{id:"Help",label:"Help",subMenu:[{id:"SVG Filter specification on W3C",label:"SVG Filter specification on W3C",onClick(){window.open("https://www.w3.org/TR/filter-effects-1/")}},{id:"SVG Filter documents on MDN",label:"SVG Filter documents on MDN",onClick(){window.open("https://developer.mozilla.org/en-US/docs/Web/SVG/Element/filter")}},{id:"Hr between spec and contact",type:"hr"},{id:"Issue",label:"Issue",onClick(){window.open("https://github.com/gogoend/svg-filter-graph-builder/issues")}},{id:"Contact @gogoend via mail",label:"Contact @gogoend via mail",onClick(){window.open("mailto:gogoend@qq.com")}},{id:"About",label:"About",onClick(){Jn()}}]}])),p=(0,D.f3)(se),f=(0,D.Fl)((()=>{const e=["SVG Filter Graph Builder"];return p?.value?e.unshift(p.value.project.name):e.unshift(Un),e.join(" - ")}));return(e,l)=>{const a=(0,D.Q2)("pingping");return(0,D.wg)(),(0,D.iD)("div",qn,[(0,D._)("div",Zn,[(0,D._)("ul",zn,[((0,D.wg)(!0),(0,D.iD)(D.HY,null,(0,D.Ko)((0,C.SU)(c),(e=>((0,D.wg)(),(0,D.iD)("li",{key:e.id,class:(0,q.C_)(["menu-entry-item",{"menu-entry-item__active":t.value[e.id]}]),onMouseenter:t=>o(e),onMouseleave:t=>n(e)},[(0,D._)("div",null,(0,q.zw)(e.label),1),(0,D.wy)((0,D._)("ul",Xn,[((0,D.wg)(!0),(0,D.iD)(D.HY,null,(0,D.Ko)(e.subMenu,(e=>(0,D.wy)(((0,D.wg)(),(0,D.iD)("li",{key:e.id,class:(0,q.C_)(["submenu-item",{"submenu-item--active":t.value[e.id],"submenu-item--disabled":!0===e.disabled,"submenu-item__is-hr":"hr"===e.type}]),onMouseenter:t=>o(e),onMouseleave:t=>n(e),onMousedown:l[0]||(l[0]=(0,b.iM)((()=>{}),["prevent"])),onClick:(0,b.iM)((()=>{e.disabled||(e.onClick?.(),t.value={})}),["prevent"])},["hr"===e.type?((0,D.wg)(),(0,D.iD)("div",Qn)):((0,D.wg)(),(0,D.iD)(D.HY,{key:1},[(0,D.Uk)((0,q.zw)(e.label),1)],64))],42,Kn)),[[a,{remark:`[top-menu] ${e.id} 菜单项被点击`}]]))),128))],512),[[b.F8,t.value[e.id]]])],42,Yn)))),128))])]),(0,D._)("div",el,[(0,D.wy)(((0,D.wg)(),(0,D.iD)("div",tl,[(0,D.Uk)((0,q.zw)((0,C.SU)(f)),1)])),[[a,{remark:"[top-menu-bar] 标题被点击"}]])]),(0,D._)("div",ol,[(0,D._)("div",nl,[(0,D.wy)(((0,D.wg)(),(0,D.iD)("a",ll,[(0,D.Uk)("GitHub")])),[[a,{remark:"[top-menu-bar] GitHub链接被点击"}]])])])])}}});const rl=(0,Q.Z)(al,[["__scopeId","data-v-f7d30d52"]]);var il=rl;const sl={class:"ping-ping"};var ul=(0,D.aZ)({__name:"PingPing",setup(e){const t=1e4,o=window.__sfgb_runtime_config__.logDestination;let n=!1;(0,D.Ah)((()=>{n=!0}));const l=()=>{d.debug("[日志] 开始收集"),setTimeout((async()=>{d.debug("[日志] 结束收集并准备发送");let e=await m.limit(100).toArray();const t=e.map((e=>e.id));if(!e.length)return d.debug("[日志] 没有可以发送的日志"),void(!n&&l());e=e.map((e=>JSON.stringify(e)));const a=new FormData;a.append("file",new Blob([e.join("\n")]));try{const e=await(await fetch(o,{body:a,method:"post"})).json();0===e.code&&m.bulkDelete(t)}catch(r){d.error(r)}!n&&l()}),t)};return o&&l(),(e,t)=>(0,D.wy)(((0,D.wg)(),(0,D.iD)("div",sl,null,512)),[[b.F8,!1]])}});const dl=ul;var cl=dl,pl=(0,D.aZ)({name:"AppMain",components:{TopMenuBar:il,SvgCanvas:So,SvgCanvasOverlayTip:Vo,NodeLibraryPanel:Wo,StuffConfigPanel:pn,OutputPreviewPanel:Vn,PingPing:cl},setup(){const e=(0,D.f3)(L),t=({el:e})=>{const t=e.getBoundingClientRect();e.style.left=window.innerWidth-t.width+"px",e.style.top=window.innerHeight-t.height+"px"};return(0,D.bv)((()=>{d.log("[Hello] 用户界面已加载",[window.__sfgb_runtime_config__,navigator.userAgent])})),{setSvgCanvasVm:e,handleOutputPreviewPanelMounted:t,filterLibraryPanelWidth:yt,stuffConfigPanelWidth:_t,topMenuBarHeight:wt}}});const fl=(0,Q.Z)(pl,[["render",_e],["__scopeId","data-v-1029aca4"]]);var gl=fl,vl=(0,D.aZ)({name:"App",components:{AppMain:gl},setup(){he()}});const ml=(0,Q.Z)(vl,[["render",E]]);var hl=ml,yl=o(2482);class _l{constructor(){(0,yl.Z)(this,"listeners",void 0),this.listeners={}}on(e,t){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(t)}once(e,t){e in this.listeners||(this.listeners[e]=[]);const o=(...n)=>{t.call(this,...n),this.off(e,o)};this.listeners[e].push(o)}off(e,t){if(!(e in this.listeners))return;const o=this.listeners[e];if(t){for(let n=0;n<o.length;n++)if(o[n]===t)return void o.splice(n,1)}else o.length=0}emit(e,t){if(!(e in this.listeners))return;const o=this.listeners[e].concat();for(let n=0;n<o.length;n++)o[n].call(this,t)}getListeners(e){return e?this.listeners[e]:this.listeners}}var wl=o(5205);(0,wl.z)("/svg-filter-graph-builder/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});const bl={beforeMount(e,{value:t},o){const n=e=>{t?.remark?d.log(t.remark):d.log(`[用户界面] 用户按下了CSS类为“${e.target.className}”的${e.target.tagName}元素`)};e.addEventListener("mousedown",n),e.__vPingpingDispose__=()=>{delete e.__vPingpingDispose__,e.removeEventListener("mousedown",n)}},unmounted(e){e.__vPingpingDispose__()}};var Dl=bl;fetch("./runtime-config.json").then((e=>e.json())).then((e=>{window.__sfgb_runtime_config__=e})).then((()=>{const e=(0,b.ri)(hl);e.config.globalProperties.$eventHub=new _l,e.use(w),e.directive("pingping",Dl),e.mount("#app"),e.config.warnHandler=(...e)=>d.warn("[Vue]",e[0],e[2]),e.config.errorHandler=(...e)=>d.error("[Vue]",e[0],e[2])}))}},t={};function o(n){var l=t[n];if(void 0!==l)return l.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,o),a.exports}o.m=e,function(){var e=[];o.O=function(t,n,l,a){if(!n){var r=1/0;for(d=0;d<e.length;d++){n=e[d][0],l=e[d][1],a=e[d][2];for(var i=!0,s=0;s<n.length;s++)(!1&a||r>=a)&&Object.keys(o.O).every((function(e){return o.O[e](n[s])}))?n.splice(s--,1):(i=!1,a<r&&(r=a));if(i){e.splice(d--,1);var u=l();void 0!==u&&(t=u)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[n,l,a]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,n){var l,a,r=n[0],i=n[1],s=n[2],u=0;if(r.some((function(t){return 0!==e[t]}))){for(l in i)o.o(i,l)&&(o.m[l]=i[l]);if(s)var d=s(o)}for(t&&t(n);u<r.length;u++)a=r[u],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(d)},n=self["webpackChunk_gogoend_svg_filter_graph_builder"]=self["webpackChunk_gogoend_svg_filter_graph_builder"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=o.O(void 0,[998],(function(){return o(4273)}));n=o.O(n)})();
//# sourceMappingURL=app.dfb67759.js.map