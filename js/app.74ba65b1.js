(function(){"use strict";var e={1123:function(e,t,o){o(987);var n=o(9520),l=JSON.parse('{"name":"@gogoend/svg-filter-graph-builder","version":"0.1.1","private":true,"scripts":{"serve":"vue-cli-service serve","build":"vue-cli-service build","lint":"vue-cli-service lint","ci:deploy-gh-pages":"node ./scripts/deploy-gh-pages.mjs","ci:deploy-local":"node ./scripts/deploy-local.mjs","ci:test-stage-branch":"node ./scripts/test-stage-branch.mjs"},"dependencies":{"@element-plus/icons-vue":"^2.0.10","dexie":"^3.2.2","element-plus":"^2.2.21","lu2":"^2021.12.21","vue":"^3.2.41"},"devDependencies":{"@types/jest":"^24.0.19","@typescript-eslint/eslint-plugin":"^5.41.0","@typescript-eslint/parser":"^5.41.0","@vue/cli-plugin-babel":"~5.0.8","@vue/cli-plugin-eslint":"~5.0.8","@vue/cli-plugin-typescript":"~5.0.8","@vue/cli-plugin-unit-jest":"~5.0.8","@vue/cli-service":"~5.0.8","@vue/compiler-sfc":"^3.2.41","@vue/eslint-config-typescript":"^11.0.2","@vue/test-utils":"^2.2.1","core-js":"^3.26.0","eslint":"^8.26.0","eslint-plugin-vue":"^9.6.0","sass":"^1.43.5","sass-loader":"^8.0.2","typescript":"~4.8.4","vue-jest":"^5.0.0-0"},"volta":{"node":"16.18.0"}}');const r=(()=>{const e=l.name.split("/");return e[e.length-1]})(),a=new n.ZP("gogoend");a.version(1).stores({products:"id,name"}),a.table("products").where("id").equals(r).toArray().then((e=>{if(0===e.length)return a.table("products").add({id:r,name:"SVG滤镜节点编辑器",version:l.version,buildVersion:1})})).catch((e=>{console.error(e)}));const s=new n.ZP(r);s.version(1).stores({files:"id",userProfiles:"id"});const i=s.table("files");s.table("userProfiles");o(7763);var u=o(3096),d=o(5781),c={install(e){e.component("ElIcon",u.gn);for(const[t,o]of Object.entries(d))e.component(t,o)}},p=o(9963),f=o(6252);function v(e,t,o,n,l,r){const a=(0,f.up)("app-main");return(0,f.wg)(),(0,f.j4)(a)}o(7658);var g=o(2262);const h=Symbol("Canvas上的所有节点"),m=Symbol("添加节点函数"),y=Symbol("移除节点函数"),w=Symbol("Canvas上的所有连线"),b=Symbol("节点对应所有出、入连线的映射关系"),_=Symbol("删除连线函数"),P=Symbol("添加连线函数"),C=Symbol("向 节点id->出、入连线 的映射中添加连线关系"),S=Symbol("Node组件映射"),I=Symbol("各节点表单内容"),D=Symbol("序列化的连线"),N=Symbol("清空Canvas上的所有内容");function F(){const{$eventHub:e}=(0,f.FN)().appContext.config.globalProperties,t=(0,g.iH)({});(0,f.JJ)(h,t);const o=e=>{t.value[e.id]=e};(0,f.JJ)(m,o);const n=e=>{const t=[...u.value[e]?.in?.map((e=>e.id))??[],...u.value[e]?.out?.map((e=>e.id))??[]];t.forEach((e=>{c(e)})),delete u.value[e]},l=o=>{n(o),delete t.value[o],e.emit("svg-canvas:node-removed",o)};(0,f.JJ)(y,l);const r=(0,g.iH)({});(0,f.JJ)(S,r);const a=(0,f.Fl)((()=>{const e={};return Object.entries(r.value).forEach((([t,o])=>{e[t]=o.nodeConfigRef.feAttrValue})),e}));(0,f.JJ)(I,a);const s=(0,g.iH)({});(0,f.JJ)(D,s);const i=(0,g.iH)([]);(0,f.JJ)(w,i);const u=(0,g.iH)({});(0,f.JJ)(b,u);const d=e=>{i.value.push(e),s.value[e.id]={id:e.id,from:{vmId:e.from.vm.nodeId,attr:e.from.attr},to:{vmId:e.to.vm.nodeId,attr:e.to.attr}}};(0,f.JJ)(P,d);const c=e=>{const t=i.value.findIndex((t=>t.id===e)),[o]=i.value.splice(t,1);delete s.value[e],Object.values(u.value).forEach((t=>{for(let o=0;o<t.in.length;)t.in[o].id!==e?o++:t.in.splice(o,1);for(let o=0;o<t.out.length;)t.out[o].id!==e?o++:t.out.splice(o,1)})),o.to.vm.afterPathRemoved?.(o)};(0,f.JJ)(_,c);const p=(e,t,o)=>{u.value[(0,g.SU)(t).vm.nodeId]||(u.value[(0,g.SU)(t).vm.nodeId]={in:[],out:[]}),u.value[(0,g.SU)(t).vm.nodeId].out.push(e),u.value[(0,g.SU)(o).vm.nodeId]||(u.value[(0,g.SU)(o).vm.nodeId]={in:[],out:[]}),u.value[(0,g.SU)(o).vm.nodeId].in.push(e)};(0,f.JJ)(C,p);const v=()=>{Object.keys(t.value).forEach((e=>{l(e)}))};(0,f.JJ)(N,v)}const k=Symbol("正在拖拽的项目"),x=Symbol("鬼影节点引用");function O(){const e=(0,g.iH)(null);(0,f.JJ)(k,e);const t=(0,g.iH)(null);(0,f.JJ)(x,t)}const V=Symbol("被聚焦的节点");function E(){const e=(0,g.iH)(null),t=t=>{e.value=t},{$eventHub:o}=(0,f.FN)().appContext.config.globalProperties;o.on("svg-canvas:node-removed",(o=>{e.value?.nodeId===o&&t(null)})),(0,f.JJ)(V,[e,t])}const M=Symbol("SvgCanvas组件实例"),A=Symbol("设置SvgCanvas组件实例");function R(){const e=(0,g.XI)();(0,f.JJ)(M,e);const t=t=>{e.value=t};(0,f.JJ)(A,t)}const T=[];for(let jn=0;jn<256;jn++)T[jn]=(jn<16?"0":"")+jn.toString(16);function j(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,o=4294967295*Math.random()|0,n=4294967295*Math.random()|0,l=T[255&e]+T[e>>8&255]+T[e>>16&255]+T[e>>24&255]+"-"+T[255&t]+T[t>>8&255]+"-"+T[t>>16&15|64]+T[t>>24&255]+"-"+T[63&o|128]+T[o>>8&255]+"-"+T[o>>16&255]+T[o>>24&255]+T[255&n]+T[n>>8&255]+T[n>>16&255]+T[n>>24&255];return l.toUpperCase()}var U=o(8985),H=o(3577);const G={class:"file-list"},J={class:"file-list__form"},B=["value"],$={class:"file-list__footer"},q=["disabled"];var Z=(0,f.aZ)({__name:"FileList",props:{handleConfirm:{type:Function,required:!0},handleCancel:{type:Function,required:!0}},setup(e){const t=(0,g.iH)([]),o=(0,g.iH)(""),n=async()=>await i.toArray();return n().then((e=>{t.value=e})),(n,l)=>((0,f.wg)(),(0,f.iD)("div",G,[(0,f._)("form",J,[(0,f.wy)((0,f._)("select",{"onUpdate:modelValue":l[0]||(l[0]=e=>o.value=e),class:"file-list__select"},[((0,f.wg)(!0),(0,f.iD)(f.HY,null,(0,f.Ko)(t.value,((e,t)=>((0,f.wg)(),(0,f.iD)("option",{key:t,value:e.id},(0,H.zw)(e.project.name),9,B)))),128))],512),[[p.bM,o.value]])]),((0,f.wg)(),(0,f.j4)((0,f.LL)("template"),{class:"file-list__footer-template"},{default:(0,f.w5)((()=>[(0,f._)("div",$,[(0,f._)("button",{is:"ui-button",disabled:!o.value,onClick:l[1]||(l[1]=(0,p.iM)((t=>e.handleConfirm(o.value)),["prevent"]))},"Open",8,q),(0,f._)("button",{is:"ui-button",onClick:l[2]||(l[2]=(0,p.iM)((t=>e.handleCancel()),["prevent"]))},"Cancel")])])),_:1}))]))}}),L=o(3744);const W=(0,L.Z)(Z,[["__scopeId","data-v-a33022bc"]]);var Y=W;function X(){let e,t,o=null;const n=new Promise(((o,n)=>{e=o,t=n}));return new U.Z({title:"Choose a file",content:'<div class="file-chooser-dialog" />',async onShow(){const n=this.querySelector(".file-chooser-dialog");o=(0,p.ri)(Y,{handleConfirm:t=>{e(t),this.hide()},handleCancel:()=>{t(new Error("[File Chooser] 用户没有选择文件")),this.hide()}}),o.mount(n),await(0,f.Y3)();const l=this.querySelector(".ui-dialog-footer"),r=this.querySelector(".file-list__footer-template");while(r.children.length)l.appendChild(r.children[0])},onHide(){o.unmount(),o=null,this.remove()}}),n}const z=Symbol("保存项目"),K=Symbol("另存为项目"),Q=Symbol("已打开的项目"),ee=Symbol("设置已打开的项目"),te=(Symbol("关闭并新建项目"),Symbol("关闭项目")),oe=Symbol("尝试打开打开文件对话框");function ne(){const e=(0,f.FN)().proxy,t=e.$.provides[N],o=e.$.provides[M],n=(0,g.XI)();(0,f.JJ)(Q,n);const r=e=>{n.value=e};(0,f.JJ)(ee,r);const a=()=>{t(),r(null)},s=async()=>{await new Promise(((e,t)=>{(new U.Z).confirm("<h6>ATTENTION</h6><p>Any unsaved changes will be lost. Continue?</p>",{buttons:[{value:"Continue",events(t){e(void 0),t.dialog.remove()}},{value:"Cancel",events(e){t(new Error("[展示打开文件弹窗] 用户取消了操作")),e.dialog.remove()}}]})})),a()};(0,f.JJ)(te,s);const u=async()=>{await s();const e=await X();if(e===n.value?.id)return;const[t]=await i.where({id:e}).toArray();if(!t)return Promise.reject(new Error("[打开文件弹窗] 未找到此项目，程序可能发生了内部错误"));a(),await(0,f.Y3)(),r(t),o.value.loadCanvasStuffFromSerializedData(t)};(0,f.JJ)(oe,u);const d=()=>{const t=e.$.provides[h],o=e.$.provides[I],r=e.$.provides[D],a={nodes:t.value,nodeForms:o.value,links:r.value},s={name:l.name,version:l.version,buildVersion:0},i={author:"gogoend",createdTime:Number(new Date),modifiedTime:Number(new Date),name:""},u={id:n.value?.id,stuff:a,product:s,project:i};return JSON.parse(JSON.stringify(u))},c=async()=>{const e=n.value?.id;e?await i.where("id").equals(e).modify(((e,t)=>{t.value=d()})):await p()};(0,f.JJ)(z,c);const p=async()=>{const e=d();e.id=j();let t="";while(""===t?.trim())t=window.prompt("Enter the name of the your project");if(null===t)return;e.project.name=t;const o={id:j(),...e};await i.add(o),r(o)};(0,f.JJ)(K,p)}function le(){[F,O,E,R,ne].forEach((e=>e()))}const re={class:"app-wrap"};function ae(e,t,o,n,l,r){const a=(0,f.up)("top-menu-bar"),s=(0,f.up)("svg-canvas"),i=(0,f.up)("node-library-panel"),u=(0,f.up)("stuff-config-panel"),d=(0,f.up)("output-preview-panel");return(0,f.wg)(),(0,f.iD)("div",re,[(0,f.Wm)(a,{class:"top-menu-bar",style:(0,H.j5)({height:`${e.topMenuBarHeight}px`})},null,8,["style"]),(0,f._)("div",{class:"workbench-wrap",style:(0,H.j5)({top:`${e.topMenuBarHeight}px`})},[(0,f.Wm)(s,{class:"svg-canvas",style:(0,H.j5)({left:e.filterLibraryPanelWidth+"px",width:`calc(100% - ${e.stuffConfigPanelWidth}px - ${e.filterLibraryPanelWidth}px)`}),onVnodeMounted:t[0]||(t[0]=t=>{e.setSvgCanvasVm(t.component.proxy)})},null,8,["style"]),(0,f.Wm)(i,{class:"node-library-panel",style:(0,H.j5)({left:0,right:`calc(100% - ${e.filterLibraryPanelWidth}px)`})},null,8,["style"]),(0,f.Wm)(u,{class:"stuff-config-panel",style:(0,H.j5)({right:0,left:`calc(100% - ${e.stuffConfigPanelWidth}px)`})},null,8,["style"]),(0,f.Wm)(d,{class:"output-preview-panel",style:{width:"640px",height:"360px",bottom:"0px",right:"0px"}})],4)])}const se={ref:"canvasScrollEl"},ie={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 4000 4000","xml:space":"preserve",class:"svg-canvas-board"},ue={class:"ghost"},de=["d"];function ce(e,t,o,n,l,r){const a=(0,f.up)("io-node"),s=(0,f.up)("io-path");return(0,f.wg)(),(0,f.iD)("div",se,[((0,f.wg)(),(0,f.iD)("svg",ie,[((0,f.wg)(!0),(0,f.iD)(f.HY,null,(0,f.Ko)(e.nodes,(t=>((0,f.wg)(),(0,f.j4)(a,{ref_for:!0,ref:e.setNodeRefMap,key:t.id,is:t.is,"node-id":t.id,onPortStart:e.handlePortStart,onPortMove:e.handlePortMove,onPortConnect:e.handlePortConnect,onPortCancel:e.handlePortCancel,onDestinationChange:e.handleDestinationChange,"relative-paths":e.relativePathMapIndexedByNodeId[t.id]??e.defaultRelativePath,onNodeMove:e.handleNodeMove,position:t.position,"onUpdate:position":e=>t.position=e},null,8,["is","node-id","onPortStart","onPortMove","onPortConnect","onPortCancel","onDestinationChange","relative-paths","onNodeMove","position","onUpdate:position"])))),128)),((0,f.wg)(!0),(0,f.iD)(f.HY,null,(0,f.Ko)(e.linkedPaths,(t=>((0,f.wg)(),(0,f.j4)(s,{key:t.id,"path-id":t.id,"path-d-arguments":t.pathDArguments,from:t.from,to:t.to,onRemove:e.removePath},null,8,["path-id","path-d-arguments","from","to","onRemove"])))),128)),(0,f._)("g",ue,[(0,f._)("path",{class:"ghost-path",d:e.ghostPathD},null,8,de),e.ghostNodeType?((0,f.wg)(),(0,f.j4)(a,{key:0,ref:"ghostNodeRef",style:{opacity:"0.5"},is:e.ghostNodeType,nodeId:"0",position:e.ghostNodePosition,"onUpdate:position":t[0]||(t[0]=t=>e.ghostNodePosition=t),relativePaths:e.defaultRelativePath},null,8,["is","position","relativePaths"])):(0,f.kq)("",!0)])]))],512)}o(2801),o(1295);const pe=["transform"],fe={class:"io-node__inner"},ve={class:"io-node__head"},ge={transform:"matrix(1 0 0 1 0 8)",class:"fill-fff module-name"};function he(e,t,o,n,l,r){const a=(0,f.up)("Delete"),s=(0,f.up)("el-icon");return(0,f.wg)(),(0,f.iD)("g",{class:(0,H.C_)(["io-node",{"io-node--focused":e.isFocused}]),onMousedown:t[6]||(t[6]=(0,p.iM)(((...t)=>e.handleNodeMousedown&&e.handleNodeMousedown(...t)),["stop"])),transform:`translate(${e.position[0]}, ${e.position[1]})`,ref:"ioNodeEl"},[((0,f.wg)(),(0,f.iD)("foreignObject",fe,[(0,f._)("div",{class:"io-node__body",xmlns:"http://www.w3.org/1999/xhtml",onClick:t[5]||(t[5]=(0,p.iM)(((...t)=>e.handleNodeBodyClick&&e.handleNodeBodyClick(...t)),["exact","stop"]))},[(0,f.kq)("",!0),(0,f._)("div",ve,[(0,f._)("em",{class:"port out","data-port-type":"out",style:(0,H.j5)({width:2*e.POINT_R+"px",height:2*e.POINT_R+"px",borderWidth:`${e.POINT_BORDER_W}px`}),"data-fe-attr":"result",ref:e.setFeAttrEls,onMouseenter:t[0]||(t[0]=(...t)=>e.handlePortMouseenter&&e.handlePortMouseenter(...t))},null,36),(0,f._)("span",ge,(0,H.zw)(e.is),1)]),((0,f.wg)(),(0,f.j4)((0,f.LL)(e.InternalNodeImplement),(0,f.dG)({ref:"nodeConfigRef"},{is:e.is,nodeId:e.nodeId,relativePaths:e.relativePaths}),null,16)),(0,f._)("div",{class:"io-node__toolbox",onClick:t[4]||(t[4]=(0,p.iM)((()=>{}),["stop"]))},[(0,f._)("button",{class:"io-node__toolbox-button",is:"ui-button",onClick:t[1]||(t[1]=t=>e.copySvgFilterCode(e.nodeId)),title:"Copy SVG Filter Code"}," <SVG> "),(0,f._)("button",{class:"io-node__toolbox-button",is:"ui-button",onClick:t[2]||(t[2]=t=>e.copyCssRule(e.nodeId)),title:"Copy CSS Rule"}," CSS Rule "),(0,f._)("button",{class:"io-node__toolbox-button",is:"ui-button",onClick:t[3]||(t[3]=t=>e.removeNode(e.nodeId)),title:"Remove Node","data-type":"danger"},[(0,f.Wm)(s,null,{default:(0,f.w5)((()=>[(0,f.Wm)(a)])),_:1})])])])]))],42,pe)}const me=function(e,t){const o=t?.start||(()=>{}),n=t?.move||(()=>{}),l=t?.up||(()=>{}),r=e.target;o(e,{originEl:r});const a=e=>{switch(e.type){case"mousemove":n(e,{originEl:r});break;case"mouseup":document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",a),l(e,{originEl:r});break}};document.addEventListener("mousemove",a),document.addEventListener("mouseup",a)};var ye=me;const we={type:"source",ports:{}},be={type:"source",ports:{}},_e={type:"normal",ports:{in:{showInConfigPanel:!1},kernelMatrix:{defaultValue:"0 1 0, 1 1 1, 0 1 0"},order:{defaultValue:"3, 3"},divisor:{type:"range",range:[.01,100],step:.01,defaultValue:1},bias:{type:"range",range:[-1,1],step:.01,defaultValue:0},targetX:{type:"range",range:[0,10],step:1,defaultValue:0},targetY:{type:"range",range:[0,10],step:1,defaultValue:0},edgeMode:{type:"text",defaultValue:"duplicate",enum:["duplicate","wrap","none"]},kernelUnitLength:{type:"range",range:[1,100],step:1,defaultValue:2},preserveAlpha:{type:"text",defaultValue:"true",enum:["true","false"]}}},Pe={type:"normal",ports:{type:{type:"text",defaultValue:"fractalNoise",enum:[{label:"fractalNoise",value:"fractalNoise"},{label:"turbulence",value:"turbulence"}]},baseFrequency:{type:"range",defaultValue:.05,range:[0,1],step:.01},numOctaves:{type:"range",defaultValue:1,step:1,range:[0,20]},stitchTiles:{defaultValue:"stitch",enum:["stitch","noStitch"]},seed:{type:"range",defaultValue:0,step:.01,range:[-1e4,1e4]}}},Ce={type:"normal",ports:{in:{showInConfigPanel:!1},dx:{type:"range",defaultValue:0,step:.01,range:[-1e3,1e3]},dy:{type:"range",defaultValue:0,step:.01,range:[-1e3,1e3]},stdDeviation:{type:"range",defaultValue:0,step:.01,range:[0,1e3]},"flood-color":{type:"color"},"flood-opacity":{type:"range",defaultValue:0,step:.01,range:[0,100]}}},Se={type:"merge",ports:{in:{showInConfigPanel:!1}}},Ie={type:"normal",ports:{in:{showInConfigPanel:!1},dx:{type:"range",defaultValue:0,step:.01,range:[-1e3,1e3]},dy:{type:"range",defaultValue:0,step:.01,range:[-1e3,1e3]}}},De={type:"normal",tag:"feColorMatrix",ports:{in:{showInConfigPanel:!1},type:{showInConfigPanel:!1,showOnNode:!1,defaultValue:"matrix"},values:{defaultValue:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0].join(" ")}}},Ne={type:"matrix-in-fe-color-matrix",ports:{}},Fe={tag:"feColorMatrix",type:"normal",ports:{in:{showInConfigPanel:!1},type:{showInConfigPanel:!1,showOnNode:!1,defaultValue:"saturate"},values:{type:"range",defaultValue:1,step:.01,range:[-10,10]}}},ke={tag:"feColorMatrix",type:"normal",ports:{in:{showInConfigPanel:!1},type:{showInConfigPanel:!1,showOnNode:!1,defaultValue:"hueRotate"},values:{type:"range",defaultValue:0,step:.01,range:[0,360]}}},xe={tag:"feColorMatrix",type:"normal",ports:{in:{showInConfigPanel:!1},type:{showInConfigPanel:!1,showOnNode:!1,defaultValue:"luminanceToAlpha"},values:{}}},Oe={type:"normal",ports:{in:{showInConfigPanel:!1}}},Ve={type:"normal",ports:{in:{showInConfigPanel:!1},in2:{showInConfigPanel:!1},scale:{type:"range",defaultValue:0,step:.01,range:[-100,100]},xChannelSelector:{defaultValue:"A",enum:["R","G","B","A"]},yChannelSelector:{defaultValue:"A",enum:["R","G","B","A"]}}},Ee={type:"normal",ports:{href:{}}},Me={type:"normal",ports:{in:{showInConfigPanel:!1},in2:{showInConfigPanel:!1},mode:{defaultValue:"normal",enum:["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}}},Ae={type:"normal",tag:"feComposite",ports:{in:{showInConfigPanel:!1},in2:{showInConfigPanel:!1},operator:{enum:["over","in","out","atop","xor","lighter"]}}},Re={type:"normal",tag:"feComposite",ports:{in:{showInConfigPanel:!1},in2:{showInConfigPanel:!1},operator:{showInConfigPanel:!1,showOnNode:!1,defaultValue:"arithmetic"},k1:{type:"range",range:[-5,5],defaultValue:.5},k2:{type:"range",range:[-5,5],defaultValue:.5},k3:{type:"range",range:[-5,5],defaultValue:.5},k4:{type:"range",range:[-5,5],defaultValue:.5}}},Te={type:"normal",ports:{"flood-color":{type:"color"},"flood-opacity":{type:"range",defaultValue:0,step:.01,range:[0,100]}}},je={type:"normal",ports:{in:{showInConfigPanel:!1},stdDeviation:{type:"range",defaultValue:0,step:.01,range:[0,1e3]},edgeMode:{type:"text",enum:["duplicate","wrap","none"],defaultValue:"none"}}},Ue={type:"normal",ports:{in:{showInConfigPanel:!1},operator:{enum:["erode","dilate"],defaultValue:"erode"},radius:{type:"range",defaultValue:0,step:.01,range:[0,50]}}},He={type:"component-transfer-root",ports:{in:{showInConfigPanel:!1},R:{showInConfigPanel:!1},G:{showInConfigPanel:!1},B:{showInConfigPanel:!1},A:{showInConfigPanel:!1}}},Ge={type:"component-transfer-child",ports:{type:{defaultValue:"identity",showInConfigPanel:!1,showOnNode:!1}}},Je={type:"component-transfer-child",ports:{type:{defaultValue:"table",showInConfigPanel:!1,showOnNode:!1},tableValues:{defaultValue:"1 1 1 1"}}},Be={type:"component-transfer-child",ports:{type:{defaultValue:"linear",enum:["linear","discrete"]},slope:{type:"number",defaultValue:1},intercept:{type:"number",defaultValue:0}}},$e={type:"component-transfer-child",ports:{type:{defaultValue:"gamma",showInConfigPanel:!1,showOnNode:!1},amplitude:{type:"number",defaultValue:1},exponent:{type:"number",defaultValue:0},offset:{type:"number",defaultValue:0}}},qe={type:"string-literal",ports:{value:{type:"text"}}};var Ze={SourceGraphic:we,SourceAlpha:be,feConvolveMatrix:_e,feTurbulence:Pe,feDropShadow:Ce,feMerge:Se,feOffset:Ie,feColorMatrixUsingMatrix:De,matrixInFeColorMatrix:Ne,feColorMatrixUsingSaturate:Fe,feColorMatrixUsingHueRotate:ke,feColorMatrixUsingLuminanceToAlpha:xe,feTile:Oe,feDisplacementMap:Ve,feImage:Ee,feBlend:Me,feCompositeWithoutK:Ae,feCompositeWithK:Re,feFlood:Te,feGaussianBlur:je,feMorphology:Ue,feComponentTransfer:He,feFuncXUsingIdentity:Ge,feFuncXUsingTable:Je,feFuncXUsingLinearOrDiscrete:Be,feFuncXUsingGamma:$e,StringLiteral:qe};const Le=Symbol("SvgCanvas组件的范围");function We(e){return e.dataset.portType}function Ye(e){return["in","out"].includes(e.dataset.portType)}function Xe(e){const{props:t,type:o}=e;let n=e.children;const l=document.createElementNS("http://www.w3.org/2000/svg",o);return t&&Object.keys(t).forEach((e=>{["number","string"].includes(typeof t?.[e])&&String(t?.[e]).length&&l.setAttribute(e,t?.[e])})),"object"===typeof n&&null!==n?Array.isArray(n)||(n=[n]):n=[],(n||[]).forEach((e=>{l.append(Xe(e))})),l}const ze=e=>{const t=new Map,o=new Map;e.forEach((e=>{const[n,l]=[e.from.vm,e.to.vm];t.has(n)||(t.set(n,0),o.set(n,[])),t.has(l)||(t.set(l,0),o.set(l,[])),t.set(l,t.get(l)+1),o.get(n).push(l)}));const n=[],l=[];for(const r of t)0===r[1]&&n.push(r[0]);while(n.length){const e=n.shift();l.push(e);const r=o.get(e);r.forEach((e=>{t.set(e,t.get(e)-1),0===t.get(e)&&n.push(e)}))}return l},Ke=(...e)=>{},Qe={key:0,class:"io-node__li"},et=["data-fe-attr"],tt={class:"io-node__port-text"},ot={class:"port-name"};function nt(e,t,o,n,l,r){return(0,f.wg)(!0),(0,f.iD)(f.HY,null,(0,f.Ko)(e.fe[e.is].ports,((o,n)=>((0,f.wg)(),(0,f.iD)(f.HY,{key:n},[!1!==o.showOnNode?((0,f.wg)(),(0,f.iD)("div",Qe,[(0,f._)("em",{class:"port in",style:(0,H.j5)({width:2*e.POINT_R+"px",height:2*e.POINT_R+"px",borderWidth:`${e.POINT_BORDER_W}px`}),"data-port-type":"in",r:"10","data-fe-attr":n,ref_for:!0,ref:e.setFeAttrEls,onMouseenter:t[0]||(t[0]=(...t)=>e.handlePortMouseenter&&e.handlePortMouseenter(...t))},null,44,et),(0,f._)("label",tt,[(0,f._)("span",ot,(0,H.zw)(n),1)])])):(0,f.kq)("",!0)],64)))),128)}var lt=()=>{const e=(0,f.f3)("fromPort"),t=(0,f.f3)("toPort"),o=(0,g.iH)(),n=(0,g.iH)([]),l=e=>{e&&n.value.push(e)};(0,f.Xn)((()=>{n.value=[]}));const r=(0,f.f3)("allDescendants"),a=(0,f.f3)("orderedAllDescendants"),s=(0,f.f3)("handlePortMouseenter"),i=(0,f.Fl)((()=>{const e="data:image/svg+xml,",t=(0,f.h)("filter",{id:"filter"},(a?.value??[]).map(((e,t)=>e.getVNodeFragment(e,t)))),o=`\n<svg xmlns="http://www.w3.org/2000/svg" id="SVGFilter" width="40" height="40" viewBox="0 0 256 256">\n<defs>${Xe(t).outerHTML}</defs>\n<g filter="url(#filter)">\n  <linearGradient id="SVGID_1_" gradientUnits="userSpaceOnUse" x1="0" y1="64" x2="64" y2="64">\n    <stop offset="0" style="stop-color:#EE7E77" /><stop offset="0.5" style="stop-color:#E7334C" /><stop offset="1" style="stop-color:#DA0439" />\n  </linearGradient>\n  <rect style="fill:url(#SVGID_1_);" width="64" height="128" />\n  <linearGradient id="SVGID_2_" gradientUnits="userSpaceOnUse" x1="64" y1="64" x2="128" y2="64">\n    <stop offset="0" style="stop-color:#F29847" /><stop offset="0.5" style="stop-color:#EE7300" /><stop offset="1" style="stop-color:#D45E12" />\n  </linearGradient>\n  <rect x="64" style="fill:url(#SVGID_2_);" width="64" height="128" />\n  <linearGradient id="SVGID_3_" gradientUnits="userSpaceOnUse" x1="128" y1="64" x2="192" y2="64">\n    <stop offset="0" style="stop-color:#FFF9AC" /><stop offset="0.5" style="stop-color:#FFF000" /><stop offset="1" style="stop-color:#FFDC00" />\n  </linearGradient>\n  <rect x="128" style="fill:url(#SVGID_3_);" width="64" height="128" />\n  <linearGradient id="SVGID_4_" gradientUnits="userSpaceOnUse" x1="192" y1="64" x2="256" y2="64">\n    <stop offset="0" style="stop-color:#66BC81" /><stop offset="0.5" style="stop-color:#009944" /><stop offset="1" style="stop-color:#008A43" />\n  </linearGradient>\n  <rect x="192" style="fill:url(#SVGID_4_);" width="64" height="128" />\n  <linearGradient id="SVGID_5_" gradientUnits="userSpaceOnUse" x1="0" y1="192" x2="64" y2="192">\n    <stop offset="0" style="stop-color:#3EAFCD" /><stop offset="0.5" style="stop-color:#0091B8" /><stop offset="1" style="stop-color:#00767F" />\n  </linearGradient>\n  <rect y="128" style="fill:url(#SVGID_5_);" width="64" height="128" />\n  <linearGradient id="SVGID_6_" gradientUnits="userSpaceOnUse" x1="64" y1="192" x2="128" y2="192">\n    <stop offset="0" style="stop-color:#584C9D" /><stop offset="0.5" style="stop-color:#1D2088" /><stop offset="1" style="stop-color:#39396C" />\n  </linearGradient>\n  <rect x="64" y="128" style="fill:url(#SVGID_6_);" width="64" height="128" />\n  <linearGradient id="SVGID_7_" gradientUnits="userSpaceOnUse" x1="128" y1="192" x2="192" y2="192">\n    <stop offset="0" style="stop-color:#B87FB5" /><stop offset="0.5" style="stop-color:#8E2E8C" /><stop offset="1" style="stop-color:#731485" />\n  </linearGradient>\n  <rect x="128" y="128" style="fill:url(#SVGID_7_);" width="64" height="128" />\n  <linearGradient id="SVGID_8_" gradientUnits="userSpaceOnUse" x1="192" y1="192" x2="256" y2="192">\n    <stop offset="0" style="stop-color:#EB70A6" /><stop offset="0.5" style="stop-color:#E4007F" /><stop offset="1" style="stop-color:#CE0080" />\n  </linearGradient>\n  <rect x="192" y="128" style="fill:url(#SVGID_8_);" width="64" height="128" />\n</g>\n</svg>\n`;return e+encodeURIComponent(o)}));return{fromPort:e,toPort:t,ioNodeEl:o,feAttrEls:n,setFeAttrEls:l,allDescendants:r,handlePortMouseenter:s,filterThumbUrl:i}};const rt=150,at=300,st=32,it=10,ut=4,dt=150,ct=4;var pt=(0,f.aZ)({name:"NormalNode",props:{is:{type:String,required:!0},nodeId:{type:String,required:!0},relativePaths:{type:Object,required:!0}},setup(e){const{fromPort:t,toPort:o,ioNodeEl:n,setFeAttrEls:l,allDescendants:r,handlePortMouseenter:a,filterThumbUrl:s}=lt(),i=(0,g.iH)({}),u=(0,f.Fl)((()=>{const t={};return e.relativePaths.in.forEach((e=>{t[e.to.attr]=e.from.vm.mergedFeAttrValue[e.from.attr]})),t})),d=(0,f.Fl)((()=>({...i.value,...u.value,result:e.nodeId}))),c=(e,t)=>{const o=e.is,{mergedFeAttrValue:n}=e,l={};Object.keys(n||{}).forEach((e=>{void 0!==n[e]&&(l[e]=n[e]||""),l.in===l.result&&delete l.in,Object.prototype.hasOwnProperty.call(Ze[o].ports,"in")&&!l.in&&(l.in="SourceGraphic"),Object.prototype.hasOwnProperty.call(Ze[o].ports,"in2")&&!l.in2&&(l.in2="SourceGraphic")}));const r=Ze[o].tag??o;return(0,f.h)(r,l)};if(console.log(Ze[e.is]),["normal",void 0].includes(Ze[e.is].type)){const{ports:t}=Ze[e.is];Object.keys(t).forEach((e=>{["number","range"].includes(t[e].type)?i.value[e]=t[e].defaultValue??0:i.value[e]=t[e].defaultValue??""}))}return{POINT_R:it,POINT_BORDER_W:ut,fromPort:t,ioNodeEl:n,setFeAttrEls:l,feAttrValue:i,foreignPortValue:u,mergedFeAttrValue:d,afterPathConnected:Ke,afterPathRemoved:Ke,handlePortMouseenter:a,fe:Ze,allDescendants:r,filterThumbUrl:s,getVNodeFragment:c}}});const ft=(0,L.Z)(pt,[["render",nt],["__scopeId","data-v-a33413f4"]]);var vt=ft;const gt=e=>((0,f.dD)("data-v-5b8cb670"),e=e(),(0,f.Cn)(),e),ht=["data-fe-attr"],mt=gt((()=>(0,f._)("label",{class:"io-node__port-text"},[(0,f._)("span",{class:"port-name"},"in")],-1)));function yt(e,t,o,n,l,r){return(0,f.wg)(!0),(0,f.iD)(f.HY,null,(0,f.Ko)(e.feAttrValue,((o,n)=>((0,f.wg)(),(0,f.iD)("div",{class:"io-node__li",key:n},[(0,f._)("em",{class:"port in",style:(0,H.j5)({width:2*e.POINT_R+"px",height:2*e.POINT_R+"px",borderWidth:`${e.POINT_BORDER_W}px`}),"data-port-type":"in",r:"10","data-fe-attr":n,ref_for:!0,ref:e.setFeAttrEls,onMouseenter:t[0]||(t[0]=(...t)=>e.handlePortMouseenter&&e.handlePortMouseenter(...t))},null,44,ht),mt])))),128)}var wt=(0,f.aZ)({name:"MergeNode",props:{is:{type:String,required:!0},nodeId:{type:String,required:!0},relativePaths:{type:Object,required:!0}},setup(e){const{toPort:t,fromPort:o,ioNodeEl:n,setFeAttrEls:l,allDescendants:r,handlePortMouseenter:a,filterThumbUrl:s}=lt(),i=(0,g.iH)([""]),u=(0,f.Fl)((()=>({result:e.nodeId}))),d=(0,f.FN)().parent?.proxy,c=()=>{console.log(t?.value,o?.value);const{attr:e}=[t?.value,o?.value].find((e=>e?.vm===d)),n=Number(e);i.value[n]=o.value.vm.nodeId,i.value[n+1]||(i.value[n+1]="")},p=e=>{const{attr:t}=e.to;i.value[Number(t)]=""},v=()=>{const{is:t,nodeId:o}=e;return(0,f.h)(t,{result:o},(0,g.SU)(i).filter((e=>!!e)).map((e=>(0,f.h)("feMergeNode",{in:e}))))};return{POINT_R:it,POINT_BORDER_W:ut,fromPort:o,ioNodeEl:n,setFeAttrEls:l,feAttrValue:i,mergedFeAttrValue:u,afterPathConnected:c,afterPathRemoved:p,handlePortMouseenter:a,allDescendants:r,filterThumbUrl:s,getVNodeFragment:v}}});const bt=(0,L.Z)(wt,[["render",yt],["__scopeId","data-v-5b8cb670"]]);var _t=bt;function Pt(e,t,o,n,l,r){return(0,f.wg)(),(0,f.iD)("div")}var Ct=(0,f.aZ)({name:"SourceNode",props:{is:{type:String,required:!0},nodeId:{type:String,required:!0},relativePaths:{type:Object,required:!0}},setup(e){const{fromPort:t,ioNodeEl:o,setFeAttrEls:n,handlePortMouseenter:l,filterThumbUrl:r}=lt(),a=(0,g.OT)({result:e.is}),s=()=>(0,f.h)("feOffset",{in:e.is});return{POINT_R:it,POINT_BORDER_W:ut,fromPort:t,ioNodeEl:o,setFeAttrEls:n,mergedFeAttrValue:a,handlePortMouseenter:l,filterThumbUrl:r,getVNodeFragment:s}}});const St=(0,L.Z)(Ct,[["render",Pt],["__scopeId","data-v-4ebf66e6"]]);var It=St;function Dt(e,t,o,n,l,r){return(0,f.wy)(((0,f.wg)(),(0,f.iD)("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.feAttrValue.value=t)},null,512)),[[p.nr,e.feAttrValue.value,void 0,{lazy:!0}]])}var Nt=(0,f.aZ)({name:"SourceNode",props:{is:{type:String,required:!0},nodeId:{type:String,required:!0},relativePaths:{type:Object,required:!0}},setup(e){const{fromPort:t,ioNodeEl:o,setFeAttrEls:n,handlePortMouseenter:l,filterThumbUrl:r}=lt(),a=(0,g.iH)({value:""}),s=(0,f.Fl)((()=>({result:(0,g.SU)(a).value}))),i=()=>null;return{POINT_R:it,POINT_BORDER_W:ut,fromPort:t,ioNodeEl:o,setFeAttrEls:n,mergedFeAttrValue:s,handlePortMouseenter:l,filterThumbUrl:r,getVNodeFragment:i,feAttrValue:a}}});const Ft=(0,L.Z)(Nt,[["render",Dt],["__scopeId","data-v-68f4c358"]]);var kt=Ft;const xt=["onUpdate:modelValue"];function Ot(e,t,o,n,l,r){return(0,f.wg)(),(0,f.iD)("div",null,[((0,f.wg)(!0),(0,f.iD)(f.HY,null,(0,f.Ko)(e.feAttrValue,((t,o)=>(0,f.wy)(((0,f.wg)(),(0,f.iD)("input",{key:o,"onUpdate:modelValue":t=>e.feAttrValue[o]=t,class:"input"},null,8,xt)),[[p.nr,e.feAttrValue[o]]]))),128))])}var Vt=(0,f.aZ)({name:"SourceNode",props:{is:{type:String,required:!0},nodeId:{type:String,required:!0},relativePaths:{type:Object,required:!0}},setup(e){const{fromPort:t,ioNodeEl:o,setFeAttrEls:n,handlePortMouseenter:l,filterThumbUrl:r}=lt(),a=(0,g.iH)((()=>{const e=new Array(20);return e.fill(0),e[0]=e[6]=e[12]=e[18]=1,e})()),s=(0,f.Fl)((()=>({result:a.value.join(" ")}))),i=()=>null;return{POINT_R:it,POINT_BORDER_W:ut,fromPort:t,ioNodeEl:o,setFeAttrEls:n,feAttrValue:a,mergedFeAttrValue:s,handlePortMouseenter:l,filterThumbUrl:r,getVNodeFragment:i}}});const Et=(0,L.Z)(Vt,[["render",Ot],["__scopeId","data-v-f802b5d6"]]);var Mt=Et;const At={key:0,class:"io-node__li"},Rt=["data-fe-attr"],Tt={class:"io-node__port-text"},jt={class:"port-name"};function Ut(e,t,o,n,l,r){return(0,f.wg)(!0),(0,f.iD)(f.HY,null,(0,f.Ko)(e.fe[e.is].ports,((o,n)=>((0,f.wg)(),(0,f.iD)(f.HY,{key:n},[!1!==o.showOnNode?((0,f.wg)(),(0,f.iD)("div",At,[(0,f._)("em",{class:"port in",style:(0,H.j5)({width:2*e.POINT_R+"px",height:2*e.POINT_R+"px",borderWidth:`${e.POINT_BORDER_W}px`}),"data-port-type":"in",r:"10","data-fe-attr":n,ref_for:!0,ref:e.setFeAttrEls,onMouseenter:t[0]||(t[0]=(...t)=>e.handlePortMouseenter&&e.handlePortMouseenter(...t))},null,44,Rt),(0,f._)("label",Tt,[(0,f._)("span",jt,(0,H.zw)(n),1)])])):(0,f.kq)("",!0)],64)))),128)}var Ht=(0,f.aZ)({name:"NormalNode",props:{is:{type:String,required:!0},nodeId:{type:String,required:!0},relativePaths:{type:Object,required:!0}},setup(e){const{fromPort:t,toPort:o,ioNodeEl:n,setFeAttrEls:l,allDescendants:r,handlePortMouseenter:a,filterThumbUrl:s}=lt(),i=(0,g.iH)({}),u=(0,f.Fl)((()=>{const t={};return e.relativePaths.in.forEach((e=>{t[e.to.attr]=e.from.vm.mergedFeAttrValue[e.from.attr]})),t})),d=(0,f.Fl)((()=>({in:u.value.in,result:e.nodeId}))),c=(0,f.f3)(S),p=e=>{const t=e.is,{mergedFeAttrValue:o}=e,n={};Object.keys(o||{}).forEach((e=>{void 0!==o[e]&&(n[e]=o[e]||""),n.in===n.result&&delete n.in,Object.prototype.hasOwnProperty.call(Ze[t].ports,"in")&&!n.in&&(n.in="SourceGraphic"),Object.prototype.hasOwnProperty.call(Ze[t].ports,"in2")&&!n.in2&&(n.in2="SourceGraphic")}));const l=Ze[t].tag??t,r={R:{type:"identity"},G:{type:"identity"},B:{type:"identity"},A:{type:"identity"}};return Object.keys(r).forEach((e=>{u.value[e]&&Object.assign(r[e],c.value[u.value[e]].mergedFeAttrValue)})),(0,f.h)(l,n,Object.entries(r).map((([e,t])=>(0,f.h)(`feFunc${e}`,t))))};if(console.log(Ze[e.is]),["normal",void 0].includes(Ze[e.is].type)){const{ports:t}=Ze[e.is];Object.keys(t).forEach((e=>{["number","range"].includes(t[e].type)?i.value[e]=t[e].defaultValue??0:i.value[e]=t[e].defaultValue??""}))}return{POINT_R:it,POINT_BORDER_W:ut,fromPort:t,ioNodeEl:n,setFeAttrEls:l,feAttrValue:i,foreignPortValue:u,mergedFeAttrValue:d,afterPathConnected:Ke,afterPathRemoved:Ke,handlePortMouseenter:a,fe:Ze,allDescendants:r,filterThumbUrl:s,getVNodeFragment:p}}});const Gt=(0,L.Z)(Ht,[["render",Ut],["__scopeId","data-v-2544a775"]]);var Jt=Gt;const Bt={key:0,class:"io-node__li"},$t=["data-fe-attr"],qt={class:"io-node__port-text"},Zt={class:"port-name"};function Lt(e,t,o,n,l,r){return(0,f.wg)(!0),(0,f.iD)(f.HY,null,(0,f.Ko)(e.fe[e.is].ports,((o,n)=>((0,f.wg)(),(0,f.iD)(f.HY,{key:n},[!1!==o.showOnNode?((0,f.wg)(),(0,f.iD)("div",Bt,[(0,f._)("em",{class:"port in",style:(0,H.j5)({width:2*e.POINT_R+"px",height:2*e.POINT_R+"px",borderWidth:`${e.POINT_BORDER_W}px`}),"data-port-type":"in",r:"10","data-fe-attr":n,ref_for:!0,ref:e.setFeAttrEls,onMouseenter:t[0]||(t[0]=(...t)=>e.handlePortMouseenter&&e.handlePortMouseenter(...t))},null,44,$t),(0,f._)("label",qt,[(0,f._)("span",Zt,(0,H.zw)(n),1)])])):(0,f.kq)("",!0)],64)))),128)}var Wt=(0,f.aZ)({name:"NormalNode",props:{is:{type:String,required:!0},nodeId:{type:String,required:!0},relativePaths:{type:Object,required:!0}},setup(e){const{fromPort:t,toPort:o,ioNodeEl:n,setFeAttrEls:l,allDescendants:r,handlePortMouseenter:a,filterThumbUrl:s}=lt(),i=(0,g.iH)({}),u=(0,f.Fl)((()=>{const t={};return e.relativePaths.in.forEach((e=>{t[e.to.attr]=e.from.vm.mergedFeAttrValue[e.from.attr]})),t})),d=(0,f.Fl)((()=>({type:Ze[e.is].ports.type.defaultValue,...i.value,...u.value,result:e.nodeId}))),c=()=>null;if(console.log(Ze[e.is]),["normal",void 0].includes(Ze[e.is].type)){const{ports:t}=Ze[e.is];Object.keys(t).forEach((e=>{["number","range"].includes(t[e].type)?i.value[e]=t[e].defaultValue??0:i.value[e]=t[e].defaultValue??""}))}return{POINT_R:it,POINT_BORDER_W:ut,fromPort:t,ioNodeEl:n,setFeAttrEls:l,feAttrValue:i,foreignPortValue:u,mergedFeAttrValue:d,afterPathConnected:Ke,afterPathRemoved:Ke,handlePortMouseenter:a,fe:Ze,allDescendants:r,filterThumbUrl:s,getVNodeFragment:c}}});const Yt=(0,L.Z)(Wt,[["render",Lt],["__scopeId","data-v-7bcbc2da"]]);var Xt=Yt,zt=o(7282);const Kt=(0,f.aZ)({components:{NormalNode:vt,MergeNode:_t,SourceNode:It,StringLiteralNode:kt,MatrixInFeColorMatrixNode:Mt,ComponentTransferRootNode:Jt,ComponentTransferChildNode:Xt},name:"IoNode",props:{is:{type:String,required:!0},nodeId:{type:String,required:!0},relativePaths:{type:Object,required:!0},position:{type:Array,required:!0}},setup(e,{emit:t}){const o=(0,f.FN)().proxy,n=(0,f.f3)(Le),l=(0,f.f3)("fromPort"),r=(0,f.f3)("toPort"),a=(0,g.iH)(),s=(0,g.iH)([0,0]),i=(0,g.iH)([]),u=e=>{e&&i.value.push(e)};(0,f.Xn)((()=>{i.value=[]}));const d=(0,f.Fl)((()=>{const t=e.is;return["normal",void 0].includes(Ze[t].type)?vt:["merge"].includes(Ze[t].type)?_t:["source"].includes(Ze[t].type)?It:["string-literal"].includes(Ze[t].type)?kt:["matrix-in-fe-color-matrix"].includes(Ze[t].type)?Mt:["component-transfer-root"].includes(Ze[t].type)?Jt:["component-transfer-child"].includes(Ze[t].type)?Xt:"div"})),c=(0,g.iH)(),v=(0,f.Fl)((()=>c.value?.filterThumbUrl??"")),h=(0,f.Fl)((()=>c.value?.mergedFeAttrValue??{})),m=(0,f.Fl)((()=>c.value?.getVNodeFragment)),w=(0,f.Fl)((()=>c.value?.afterPathConnected??(()=>{}))),b=(0,f.Fl)((()=>c.value?.afterPathRemoved??(()=>{}))),_=(0,f.f3)("canvasScrollEl"),P=function(i){ye(i,{start(e,{originEl:n}){if(Ye(n))t("port-start",{ev:e,originEl:n,vm:o});else{const t=a.value?.getBoundingClientRect();s.value=[e.pageX-t?.left-_.value.scrollLeft,e.pageY-t?.top-_.value.scrollTop]}},move(l,{originEl:r}){if(Ye(r))t("port-move",{ev:l,originEl:r,vm:o});else{const o=[l.pageX-s.value[0]-n.value.left,l.pageY-s.value[1]-n.value.top];t("update:position",o),(0,f.Y3)((()=>{const o=a.value?.getBoundingClientRect();s.value=[l.pageX-o?.left-_.value.scrollLeft,l.pageY-o?.top-_.value.scrollTop],t("node-move",e.relativePaths)}))}},up(e,{originEl:n}){Ye(n)&&(Ye(e.target)&&l?.value&&r?.value?t("port-connect",{ev:e,originEl:n,vm:o}):t("port-cancel",{ev:e,originEl:n,vm:o})),s.value=[0,0]}})},C=function(e){l?.value&&(t("destination-change",{ev:e,vm:null,originEl:null}),e.target?.removeEventListener("mouseout",C))},S=function(e){l?.value&&(t("destination-change",{ev:e,vm:o,originEl:e.target}),e.target?.addEventListener("mouseout",C))};(0,f.JJ)("handlePortMouseenter",S);const I=(0,f.Fl)((()=>{const e=new Set,t=o=>{e.add(o),o.relativePaths.in.forEach((e=>{t(e.from.vm)}))};return t(o),[...e]}));(0,f.JJ)("allDescendants",I);const D=(0,f.Fl)((()=>{const e=[];return I?.value.forEach((t=>{e.push(...t.relativePaths.in)})),e.length?ze(e):[o]}));(0,f.JJ)("orderedAllDescendants",D);const N=(0,f.Fl)((()=>D.value.map((e=>()=>e.getVNodeFragment(e))))),[F,k]=(0,f.f3)(V),x=()=>{k(o)},O=(0,f.Fl)((()=>F.value===o)),E=(0,f.f3)(y),M=async()=>{const t=()=>(0,f.h)("filter",{id:e.nodeId},N.value.map((e=>e()))),o=(0,p.ri)(t),n=document.createElementNS("http://www.w3.org/2000/svg","svg");o.mount(n),await(0,f.Y3)();const l=n.outerHTML;o.unmount(),await navigator.clipboard.writeText(l),zt.Z.success("SVG filter code has been copied successfully.","success")},A=async()=>{const t=`filter: url(#${e.nodeId})`;await navigator.clipboard.writeText(t),zt.Z.success("CSS rule code has been copied successfully.","success")};return{POINT_R:it,POINT_BORDER_W:ut,fromPort:l,ioNodeEl:a,InternalNodeImplement:d,setFeAttrEls:u,handleNodeMousedown:P,handlePortMouseenter:S,fe:Ze,allDescendants:I,afterPathConnected:w,afterPathRemoved:b,nodeConfigRef:c,filterThumbUrl:v,mergedFeAttrValue:h,getVNodeFragment:m,orderedAllDescendants:D,renderOfOrderedAllDescendants:N,focusingNode:F,handleNodeBodyClick:x,isFocused:O,removeNode:E,copySvgFilterCode:M,copyCssRule:A}}});var Qt=Kt;const eo=(0,L.Z)(Qt,[["render",he],["__scopeId","data-v-2c20ee80"]]);var to=eo;const oo=["d"],no=["transform"];function lo(e,t,o,n,l,r){const a=(0,f.up)("Delete"),s=(0,f.up)("el-icon");return(0,f.wg)(),(0,f.iD)("g",{class:(0,H.C_)(["linked-path",{"linked-path__focused":e.focused}]),onFocus:t[3]||(t[3]=t=>e.focused=!0),onBlur:t[4]||(t[4]=t=>e.focused=!1)},[(0,f._)("path",{class:(0,H.C_)(["linked-path-path",{"linked-path__focused-path":e.focused}]),style:(0,H.j5)({strokeWidth:`${e.PATH_STROKE_W}px`}),d:e.pathD,onClick:t[0]||(t[0]=(...t)=>e.handlePathClick&&e.handlePathClick(...t)),ref:"pathRef"},null,14,oo),e.focused?((0,f.wg)(),(0,f.iD)("foreignObject",{key:0,transform:`translate(\n        ${e.p[0]},\n        ${e.p[1]}\n      )`,style:{overflow:"visible"}},[(0,f._)("div",{class:"linked-path__toolbox",xmlns:"http://www.w3.org/1999/xhtml",onClick:t[2]||(t[2]=(0,p.iM)((()=>{}),["stop"]))},[(0,f._)("button",{class:"linked-path__toolbox-button",is:"ui-button",onClick:t[1]||(t[1]=t=>e.$emit("remove",e.pathId)),title:"Remove Link","data-type":"danger"},[(0,f.Wm)(s,null,{default:(0,f.w5)((()=>[(0,f.Wm)(a)])),_:1})])])],8,no)):(0,f.kq)("",!0)],34)}var ro=(0,f.aZ)({name:"IoPath",props:{pathDArguments:{type:Array,required:!0},pathId:{type:String,required:!0},from:{type:Object,required:!0},to:{type:Object,required:!0}},setup(e){const t=(0,f.Fl)((()=>{const t=e.pathDArguments;return`\nM ${t[0]}, ${t[1]}\nC ${t[2]}, ${t[3]}, ${t[4]}, ${t[5]}, ${t[6]}, ${t[7]}`})),o=(0,g.iH)(null),n=(0,g.iH)(!1),l=(0,f.Fl)((()=>{t.value,n.value;const{x:e,y:l}=o.value?.getPointAtLength(o.value?.getTotalLength()/2)||{x:0,y:0};return[e,l]})),r=e=>{console.log(e)},a=e=>{console.log(e)};return{PATH_STROKE_W:ct,focused:n,pathRef:o,pathD:t,p:l,handlePathClick:r,handlePathBlur:a}}});const ao=(0,L.Z)(ro,[["render",lo],["__scopeId","data-v-398ff922"]]);var so=ao;function io(e){const{to:t,from:o}=e;let n=!1;const l=e=>{if(t.vm!==e.vm)for(let t=0;t<e.vm.relativePaths.in.length;t++){if(n)break;const o=e.vm.relativePaths.in[t];l(o.from)}else n=!0};return l(o),n}function uo(e){const{to:t,from:o}=e,n=t.vm.relativePaths.in.filter((e=>t.attr===e.to.attr&&t.vm===e.to.vm));return n.length>0}function co(e){if(e.from.vm===e.to.vm)throw new TypeError("Cannot link to self");if(e.from.el?.dataset.portType===e.to.el?.dataset.portType)throw new TypeError("Cannot create link when the two ports have same direction");if(uo(e))throw new TypeError("Cannot create duplicate link");if(io(e))throw new TypeError("Cannot create link when loop is detected");console.log(e.to.vm.relativePaths.in[0]?.from.vm.relativePaths.in[0]?.from.vm.relativePaths.in)}function po(){const e=(0,g.XI)(null),t=(0,f.FN)().proxy;let o=new ResizeObserver((([t],o)=>{e.value=t.target.getBoundingClientRect(),console.log(e.value)}));return(0,f.bv)((()=>{o.observe(t.$el),(0,f.Jd)((()=>{o.disconnect()})),o=null})),{elRect:e}}var fo=(0,f.aZ)({name:"SvgCanvas",components:{IoNode:to,IoPath:so},setup(){const e=(0,g.XI)();(0,f.JJ)("canvasScrollEl",e);const t=po().elRect;(0,f.JJ)(Le,t);const o=(0,f.f3)(w),n=(0,f.f3)(P),l=(0,f.f3)(_),r=(0,f.f3)(h),a=(0,f.f3)(b),s=(0,f.f3)(C),i=(0,f.f3)(S),u=e=>{e&&(i.value[e.nodeId]=e)};(0,f.Xn)((()=>{i.value={}}));const d=(0,g.iH)([0,0,0,0,0,0,0,0]),c=(0,f.Fl)((()=>{const e=d.value;return`\nM ${e[0]}, ${e[1]}\nC ${e[2]}, ${e[3]}, ${e[4]}, ${e[5]}, ${e[6]}, ${e[7]}`})),p=(0,g.iH)(null),v=(0,g.iH)(null);(0,f.JJ)("fromPort",p),(0,f.JJ)("toPort",v);const y=({originEl:o,vm:n})=>{const l=o;p.value={vm:n,attr:o.dataset?.feAttr??"",el:o};const r=[l.getBoundingClientRect().x,l.getBoundingClientRect().y];"in"===We(l)&&(d.value=[r[0],r[1]+it,r[0]+dt+it,r[1]+it,r[0]-dt+it,r[1]+it,r[0],r[1]+it].map(((o,n)=>n%2===0?o+e.value.scrollLeft-t.value.left:o+e.value.scrollTop-t.value.top))),"out"===We(l)&&(d.value=[r[0]+2*it,r[1]+it,r[0]+dt+it,r[1]+it,r[0]-dt+it,r[1],r[0],r[1]].map(((o,n)=>n%2===0?o+e.value.scrollLeft-t.value.left:o+e.value.scrollTop-t.value.top)))},I=({ev:o,originEl:n})=>{"in"===We(n)&&(d.value=[o.pageX,o.pageY,o.pageX+dt,o.pageY,...d.value.slice(4)].map(((o,n)=>n<=3?n%2===0?o+e.value.scrollLeft-t.value.left:o+e.value.scrollTop-t.value.top:o))),"out"===We(n)&&(d.value=[...d.value.slice(0,4),o.pageX-dt,o.pageY,o.pageX,o.pageY].map(((o,n)=>n>=4?n%2===0?o+e.value.scrollLeft-t.value.left:o+e.value.scrollTop-t.value.top:o)))},D=({ev:o,originEl:l})=>{const r=o.target,a=[r.getBoundingClientRect().x,r.getBoundingClientRect().y];let i,u=[];"in"===We(l)&&(u=[a[0]+2*it,a[1]+it,a[0]+dt+it,a[1]+it,...d.value.slice(4)].map(((o,n)=>n<=3?n%2===0?o+e.value.scrollLeft-t.value.left:o+e.value.scrollTop-t.value.top:o)),i={pathDArguments:u,id:j(),to:p.value,from:v.value}),"out"===We(l)&&(u=[...d.value.slice(0,4),a[0]-dt+it,a[1]+it,a[0],a[1]+it].map(((o,n)=>n>=4?n%2===0?o+e.value.scrollLeft-t.value.left:o+e.value.scrollTop-t.value.top:o)),i={pathDArguments:u,id:j(),from:p.value,to:v.value});try{co(i),n(i),"out"===We(l)?(s(i,p,v),v.value?.vm?.afterPathConnected?.()):(s(i,v,p),p.value?.vm?.afterPathConnected?.())}catch(c){zt.Z.error(c.message),console.error(c)}p.value=null,v.value=null,d.value.fill(0)},N=()=>{console.log("canceled"),p.value=null,v.value=null,d.value.fill(0)},F=({vm:e,originEl:t,ev:o})=>{v.value={vm:e,attr:o.target?.dataset?.feAttr??"",el:t}},O=o=>{o.out.forEach((o=>{const n=[o.from.el?.getBoundingClientRect().x??0,o.from.el?.getBoundingClientRect().y??0];o.pathDArguments=[n[0]+2*it,n[1]+it,n[0]+dt+it,n[1]+it,...o.pathDArguments.slice(4)].map(((o,n)=>n<=3?n%2===0?o+e.value.scrollLeft-t.value.left:o+e.value.scrollTop-t.value.top:o))})),o.in.forEach((o=>{const n=[o.to.el?.getBoundingClientRect().x??0,o.to.el?.getBoundingClientRect().y??0];o.pathDArguments=[...o.pathDArguments.slice(0,4),n[0]-dt+it,n[1]+it,n[0],n[1]+it].map(((o,n)=>n>=4?n%2===0?o+e.value.scrollLeft-t.value.left:o+e.value.scrollTop-t.value.top:o))}))},V=(0,f.f3)(x),E=(0,f.f3)(k),M=(0,g.iH)([0,0]),A=(0,g.OT)({in:[],out:[]}),R=(0,f.f3)(m),T=async o=>{const{nodes:l,nodeForms:r,links:a}=o.stuff;Object.values(l).forEach((e=>{R(e)})),await(0,f.Y3)(),Object.entries(r).forEach((([e,t])=>{Object.keys(t).forEach((o=>{[(0,H.RI)(i.value[e].nodeConfigRef.feAttrValue,o),"feMerge"===l[e].is].includes(!0)&&(i.value[e].nodeConfigRef.feAttrValue[o]=t[o])}))})),await(0,f.Y3)(),Object.values(a).map((o=>{const n=window.structuredClone(o);n.from.vm=i.value[o.from.vmId],n.from.el=n.from.vm.$el.querySelector(`[data-fe-attr="${o.from.attr}"]`);const l=[n.from.el.getBoundingClientRect().x,n.from.el.getBoundingClientRect().y];n.to.vm=i.value[o.to.vmId],n.to.el=n.to.vm.$el.querySelector(`[data-fe-attr="${o.to.attr}"]`);const r=[n.to.el.getBoundingClientRect().x,n.to.el.getBoundingClientRect().y];return n.pathDArguments=[l[0]+2*it,l[1]+it,l[0]+dt+it,l[1]+it,r[0]-dt+it,r[1]+it,r[0],r[1]+it].map(((o,n)=>n%2===0?o+e.value.scrollLeft-t.value.left:o+e.value.scrollTop-t.value.top)),n})).forEach((e=>{try{co(e),n(e),s(e,e.from,e.to),v.value=e.to,p.value=e.from,e.to.vm?.afterPathConnected?.()}catch(t){console.error(t)}p.value=null,v.value=null}))};return{canvasScrollEl:e,svgCanvasRect:t,ghostPathD:c,ghostNodeRef:V,ghostNodeType:E,ghostNodePosition:M,nodes:r,setNodeRefMap:u,linkedPaths:o,handlePortStart:y,handlePortMove:I,handlePortConnect:D,handlePortCancel:N,handleDestinationChange:F,handleNodeMove:O,fromPort:p,toPort:v,defaultRelativePath:A,relativePathMapIndexedByNodeId:a,removePath:l,loadCanvasStuffFromSerializedData:T}}});const vo=(0,L.Z)(fo,[["render",ce],["__scopeId","data-v-6303dfc8"]]);var go=vo;const ho={class:"node-library-panel"},mo={class:"menu-list"},yo=["onMousedown"];function wo(e,t,o,n,l,r){return(0,f.wg)(),(0,f.iD)("div",ho,[((0,f.wg)(!0),(0,f.iD)(f.HY,null,(0,f.Ko)(e.menuGroup,((t,o)=>((0,f.wg)(),(0,f.iD)("div",{key:o},[(0,f._)("h4",null,(0,H.zw)(e.menuGroup.title),1),(0,f._)("ul",mo,[((0,f.wg)(!0),(0,f.iD)(f.HY,null,(0,f.Ko)(t.children,((t,o)=>((0,f.wg)(),(0,f.iD)("li",{key:o,onMousedown:o=>e.handleIconMousedown(o,t)},(0,H.zw)(t.title),41,yo)))),128))])])))),128))])}const bo=[{title:"组1",children:Object.keys(Ze).map((e=>({title:e})))}];var _o=(0,f.aZ)({name:"NodeLibraryPanel",setup(e,{emit:t}){const o=(0,f.f3)(M),n=(0,f.Fl)((()=>o.value.svgCanvasRect)),l=(0,f.f3)(x),r=(0,f.f3)(k),a=(0,f.f3)(m),s=function(e,t){ye(e,{start(e,{originEl:a}){r.value=t.title,(0,f.Y3)((()=>l.value.$emit("update:position",[e.clientX+o.value.$el.scrollLeft-n.value.left,e.clientY+o.value.$el.scrollTop-n.value.top])))},move(e,{originEl:t}){console.log(l.value),l.value.$emit("update:position",[e.clientX+o.value.$el.scrollLeft-n.value.left,e.clientY+o.value.$el.scrollTop-n.value.top])},up(e,{originEl:l}){const s=o.value?.$el.getBoundingClientRect();e.clientX>s.x&&e.clientX<s.x+s.width&&e.clientY>s.y&&e.clientY<s.y+s.height&&a({is:t.title,id:j(),position:[e.clientX+o.value.$el.scrollLeft-n.value.left,e.clientY+o.value.$el.scrollTop-n.value.top]}),r.value=null}})};return{handleIconMousedown:s,menuGroup:bo,filterLibraryPanelWidth:rt}}});const Po=(0,L.Z)(_o,[["render",wo],["__scopeId","data-v-0bc0c588"]]);var Co=Po;const So=e=>((0,f.dD)("data-v-81ce35a2"),e=e(),(0,f.Cn)(),e),Io={class:"stuff-config-panel"},Do={class:"stuff-config-panel__title-bar"},No={class:"stuff-config-panel__main"},Fo={key:0},ko={key:0},xo={key:1},Oo=So((()=>(0,f._)("h3",null,"Opus! 🫢",-1))),Vo=So((()=>(0,f._)("br",null,null,-1)));function Eo(e,t,o,n,l,r){const a=(0,f.up)("form-item");return(0,f.wg)(),(0,f.iD)("div",Io,[(0,f._)("div",Do,[e.focusingNode?((0,f.wg)(),(0,f.iD)(f.HY,{key:0},[(0,f.Uk)(" 👀 Editing - "+(0,H.zw)(e.focusingNode?.is),1)],64)):((0,f.wg)(),(0,f.iD)(f.HY,{key:1},[(0,f.Uk)(" 👈 Click a node, then configure it ! ")],64))]),(0,f._)("div",No,[e.focusingNode?((0,f.wg)(),(0,f.iD)("div",Fo,[e.formFieldConfig&&Object.values(e.formFieldConfig.ports).some((e=>[void 0,!0].includes(e.showInConfigPanel)))?((0,f.wg)(),(0,f.iD)("form",ko,[((0,f.wg)(!0),(0,f.iD)(f.HY,null,(0,f.Ko)(e.formFieldConfig.ports,((e,t)=>((0,f.wg)(),(0,f.j4)(a,{key:t,schema:e,"field-id":t,style:{marginBottom:"16px"}},null,8,["schema","field-id"])))),128))])):((0,f.wg)(),(0,f.iD)("div",xo,[Oo,(0,f.Uk)(" No field can be edit here."),Vo,(0,f.Uk)(" Just look around the canvas, and create links between the available ports. ")]))])):(0,f.kq)("",!0)])])}const Mo=e=>((0,f.dD)("data-v-4b07fcca"),e=e(),(0,f.Cn)(),e),Ao={key:0},Ro=Mo((()=>(0,f._)("br",null,null,-1))),To=["value"],jo=["min","max","step"];var Uo=(0,f.aZ)({__name:"FormItem",props:{schema:{type:Object},fieldId:{type:String}},setup(e){const t=e,o=(0,f.Fl)((()=>t.fieldId)),[n]=(0,f.f3)(V),l=(0,f.Fl)((()=>(0,g.SU)(n)?.nodeConfigRef?.feAttrValue??{})),r=(0,f.Fl)((()=>(0,g.SU)(n)?.nodeConfigRef?.foreignPortValue??{})),a=(0,f.Fl)((()=>(0,H.RI)((0,g.SU)(r),o.value))),s=(e,t)=>e,i=(0,f.Fl)((()=>({disabled:(0,g.SU)(a),value:(0,g.SU)(a)?s(r.value[(0,g.SU)(o)],(0,g.SU)(o)):l.value[(0,g.SU)(o)],onChange:e=>{e.stopPropagation(),l.value[(0,g.SU)(o)]=e.target.value}})));return(t,n)=>!1!==e.schema?.showInConfigPanel?((0,f.wg)(),(0,f.iD)("div",Ao,[(0,f._)("label",null,(0,H.zw)((0,g.SU)(o)),1),Ro,"text"!==e.schema?.type&&e.schema?.type?(0,f.kq)("",!0):((0,f.wg)(),(0,f.iD)(f.HY,{key:0},[Array.isArray(e.schema?.enum)?((0,f.wg)(),(0,f.iD)("select",(0,f.dG)({key:0,is:"ui-select"},(0,g.SU)(i)),[((0,f.wg)(!0),(0,f.iD)(f.HY,null,(0,f.Ko)(e.schema.enum,(e=>((0,f.wg)(),(0,f.iD)("option",{key:e&&"object"===typeof e?e.value:e,value:e&&"object"===typeof e?e.value:e},(0,H.zw)(e&&"object"===typeof e?e.label:e),9,To)))),128))],16)):((0,f.wg)(),(0,f.iD)("input",(0,f.dG)({key:1,is:"ui-input",type:"text",size:"20"},(0,g.SU)(i)),null,16))],64)),"color"===e.schema?.type?((0,f.wg)(),(0,f.iD)("input",(0,f.dG)({key:1,is:"ui-color",type:"color-opacity"},(0,g.SU)(i)),null,16)):"number"===e.schema?.type?((0,f.wg)(),(0,f.iD)("input",(0,f.dG)({key:2,is:"ui-input",type:"number",size:"20"},(0,g.SU)(i)),null,16)):"range"===e.schema?.type?((0,f.wg)(),(0,f.iD)("input",(0,f.dG)({key:3,is:"ui-range",type:"range",min:e.schema.range[0],max:e.schema.range[1],step:e.schema.step??1},(0,g.SU)(i)),null,16,jo)):(0,f.kq)("",!0)])):(0,f.kq)("",!0)}});const Ho=(0,L.Z)(Uo,[["__scopeId","data-v-4b07fcca"]]);var Go=Ho,Jo=(0,f.aZ)({name:"StuffConfigPanel",components:{FormItem:Go},setup(e,{emit:t}){const[o]=(0,f.f3)(V),n=(0,f.Fl)((()=>(0,g.SU)(o)&&(0,g.SU)(o)?.is?Ze[(0,g.SU)(o).is]:null));return{stuffConfigPanelWidth:at,focusingNode:o,formFieldConfig:n}}});const Bo=(0,L.Z)(Jo,[["render",Eo],["__scopeId","data-v-81ce35a2"]]);var $o=Bo;const qo=e=>((0,f.dD)("data-v-32c96690"),e=e(),(0,f.Cn)(),e),Zo={class:"output-preview-panel"},Lo=["src"],Wo=qo((()=>(0,f._)("div",{class:"output-preview-panel__tools"},null,-1)));function Yo(e,t,o,n,l,r){const a=(0,f.up)("filter-def");return(0,f.wg)(),(0,f.iD)("div",Zo,[(0,f.Wm)(a,{"filter-el-id":"previewingFilter"}),(0,f._)("div",{style:(0,H.j5)({filter:"url(#previewingFilter)"}),class:"output-preview-panel__image-wrap"},[(0,f._)("img",{src:e.sourceImageSrc},null,8,Lo)],4),Wo])}const Xo={class:"filter-def"},zo=["id"];function Ko(e,t,o,n,l,r){return(0,f.wg)(),(0,f.iD)("div",Xo,[((0,f.wg)(),(0,f.iD)("svg",null,[(0,f._)("defs",null,[(0,f._)("filter",{id:e.filterElId},[((0,f.wg)(!0),(0,f.iD)(f.HY,null,(0,f.Ko)(e.renderOfOrderedAllDescendants,((e,t)=>((0,f.wg)(),(0,f.j4)((0,f.LL)(e),{key:t})))),128))],8,zo)])]))])}var Qo=(0,f.aZ)({name:"FeDef",props:{filterElId:{type:String}},setup(){const[e]=(0,f.f3)(V),t=(0,f.Fl)((()=>e.value?.renderOfOrderedAllDescendants??(()=>null)));return{focusingNode:e,renderOfOrderedAllDescendants:t}}});const en=(0,L.Z)(Qo,[["render",Ko],["__scopeId","data-v-3b8b776a"]]);var tn=en,on=(0,f.aZ)({name:"OutputPreviewPanel",components:{FilterDef:tn},setup(){const e=(0,g.iH)("./demo/assets/rinkysplash.jpg");return{sourceImageSrc:e}}});const nn=(0,L.Z)(on,[["render",Yo],["__scopeId","data-v-32c96690"]]);var ln=nn;o(541);const rn="Untitled",an={class:"about-content"},sn=(0,f._)("br",null,null,-1),un=(0,f._)("a",{target:"_blank",href:"https://github.com/gogoend"},"gogoend",-1),dn=(0,f.uE)('<p> The project is inspired by the following project: </p><ul><li><a target="_blank" href="https://github.com/poletaevvlad/svg-filter-editor">poletaevvlad / svg-filter-editor</a></li><li><a target="_blank" href="https://github.com/yoksel/svg-filters">yoksel / svg-filters</a></li></ul><p> The program includes some source code from the following open source projects: </p><ul><li><a target="_blank" href="https://github.com/vuejs/core">vuejs / core</a></li><li><a target="_blank" href="https://github.com/element-plus/element-plus">dexie / Dexie.js</a></li><li><a target="_blank" href="https://github.com/yued-fe/lulu">yued-fe / lulu</a></li><li><a target="_blank" href="https://github.com/element-plus/element-plus">element-plus / element-plus</a></li></ul><p> Thanks to my current employer, <a target="_blank" href="https://www.aicloud.com/">Beijing SinoVoice Technology Co.,Ltd.</a> (aka. <a target="_blank" href="https://www.aicloud.com/">北京捷通华声科技股份有限公司</a>), which gives me have a WLB life style to let me do what I think after work. </p>',5);var cn=(0,f.aZ)({__name:"AboutContent",setup(e){return(e,t)=>((0,f.wg)(),(0,f.iD)("div",an,[(0,f._)("p",null,[(0,f.Uk)(" SVG Filter Node Builder v"+(0,H.zw)((0,g.SU)(l).version)+" ",1),sn,(0,f.Uk)(" ©️2021-2022 "),un]),dn]))}});const pn=cn;var fn=pn;function vn(){let e=null;new U.Z({title:"About",content:'<div class="about-dialog-dialog" />',width:"480px",buttons:[{value:"Close"}],async onShow(){const t=this.querySelector(".about-dialog-dialog");e=(0,p.ri)(fn),e.mount(t)},onRemove(){e.unmount(),e=null}})}const gn=e=>((0,f.dD)("data-v-41f03d99"),e=e(),(0,f.Cn)(),e),hn={class:"menu-bar"},mn={class:"menu-bar__left"},yn={class:"seg-content menu-entry-list"},wn=["onMouseenter","onMouseleave"],bn={class:"submenu-list",style:{position:"absolute",top:"100%",left:0}},_n=["onMouseenter","onMouseleave","onClick"],Pn={key:0},Cn={class:"menu-bar__center"},Sn={class:"seg-content"},In=gn((()=>(0,f._)("div",{class:"menu-bar__right"},[(0,f._)("div",{class:"seg-content"},[(0,f._)("a",{target:"_blank",href:"https://github.com/gogoend/svg-filter-graph-builder"},"GitHub")])],-1)));var Dn=(0,f.aZ)({__name:"TopMenuBar",setup(e){const t=(0,g.iH)({}),o=e=>{t.value[e]=!0},n=e=>{delete t.value[e]},l=(0,f.f3)(z),r=(0,f.f3)(K),a=(0,f.f3)(te),s=(0,f.f3)(oe),i=(0,f.Fl)((()=>[{id:"File",label:"File",subMenu:[{id:"Open",label:"Open...",onClick(){s()}},{id:"Save",label:"Save",async onClick(){await l(),zt.Z.success("Saved successfully","success")}},{id:"Save As...",label:"Save As...",async onClick(){await r(),zt.Z.success("Saved successfully","success")}},{id:"Close",label:"Close",onClick(){a()}}]},{id:"Help",label:"Help",subMenu:[{id:"SVG Filter specification on W3C",label:"SVG Filter specification on W3C",onClick(){window.open("https://www.w3.org/TR/filter-effects-1/")}},{id:"SVG Filter documents on MDN",label:"SVG Filter documents on MDN",onClick(){window.open("https://developer.mozilla.org/en-US/docs/Web/SVG/Element/filter")}},{id:"Hr between spec and contact",type:"hr"},{id:"Issue",label:"Issue",onClick(){window.open("https://github.com/gogoend/svg-filter-graph-builder/issues")}},{id:"Contact @gogoend via mail",label:"Contact @gogoend via mail",onClick(){window.open("mailto:gogoend@qq.com")}},{id:"About",label:"About",onClick(){vn()}}]}])),u=(0,f.f3)(Q),d=(0,f.Fl)((()=>{const e=["SVG Filter Graph Builder"];return u?.value?e.unshift(u.value.project.name):e.unshift(rn),e.join(" - ")}));return(e,l)=>((0,f.wg)(),(0,f.iD)("div",hn,[(0,f._)("div",mn,[(0,f._)("ul",yn,[((0,f.wg)(!0),(0,f.iD)(f.HY,null,(0,f.Ko)((0,g.SU)(i),(e=>((0,f.wg)(),(0,f.iD)("li",{key:e.id,class:(0,H.C_)(["menu-entry-item",{"menu-entry-item__active":t.value[e.id]}]),onMouseenter:t=>o(e.id),onMouseleave:t=>n(e.id)},[(0,f._)("div",null,(0,H.zw)(e.label),1),(0,f.wy)((0,f._)("ul",bn,[((0,f.wg)(!0),(0,f.iD)(f.HY,null,(0,f.Ko)(e.subMenu,(e=>((0,f.wg)(),(0,f.iD)("li",{key:e.id,class:(0,H.C_)(["submenu-item",{"submenu-item--active":t.value[e.id],"submenu-item__is-hr":"hr"===e.type}]),onMouseenter:t=>o(e.id),onMouseleave:t=>n(e.id),onMousedown:l[0]||(l[0]=(0,p.iM)((()=>{}),["prevent"])),onClick:(0,p.iM)((()=>{e.onClick?.(),t.value={}}),["prevent"])},["hr"===e.type?((0,f.wg)(),(0,f.iD)("div",Pn)):((0,f.wg)(),(0,f.iD)(f.HY,{key:1},[(0,f.Uk)((0,H.zw)(e.label),1)],64))],42,_n)))),128))],512),[[p.F8,t.value[e.id]]])],42,wn)))),128))])]),(0,f._)("div",Cn,[(0,f._)("div",Sn,(0,H.zw)((0,g.SU)(d)),1)]),In]))}});const Nn=(0,L.Z)(Dn,[["__scopeId","data-v-41f03d99"]]);var Fn=Nn,kn=(0,f.aZ)({name:"AppMain",components:{TopMenuBar:Fn,SvgCanvas:go,NodeLibraryPanel:Co,StuffConfigPanel:$o,OutputPreviewPanel:ln},setup(){const e=(0,f.f3)(A);return{setSvgCanvasVm:e,filterLibraryPanelWidth:rt,stuffConfigPanelWidth:at,topMenuBarHeight:st}}});const xn=(0,L.Z)(kn,[["render",ae],["__scopeId","data-v-36a38600"]]);var On=xn,Vn=(0,f.aZ)({name:"App",components:{AppMain:On},setup(){le()}});const En=(0,L.Z)(Vn,[["render",v]]);var Mn=En,An=o(2482);class Rn{constructor(){(0,An.Z)(this,"listeners",void 0),this.listeners={}}on(e,t){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(t)}once(e,t){e in this.listeners||(this.listeners[e]=[]);const o=(...n)=>{t.call(this,...n),this.off(e,o)};this.listeners[e].push(o)}off(e,t){if(!(e in this.listeners))return;const o=this.listeners[e];if(t){for(let n=0;n<o.length;n++)if(o[n]===t)return void o.splice(n,1)}else o.length=0}emit(e,t){if(!(e in this.listeners))return;const o=this.listeners[e].concat();for(let n=0;n<o.length;n++)o[n].call(this,t)}getListeners(e){return e?this.listeners[e]:this.listeners}}const Tn=(0,p.ri)(Mn);Tn.config.globalProperties.$eventHub=new Rn,Tn.use(c),Tn.mount("#app")}},t={};function o(n){var l=t[n];if(void 0!==l)return l.exports;var r=t[n]={exports:{}};return e[n](r,r.exports,o),r.exports}o.m=e,function(){var e=[];o.O=function(t,n,l,r){if(!n){var a=1/0;for(d=0;d<e.length;d++){n=e[d][0],l=e[d][1],r=e[d][2];for(var s=!0,i=0;i<n.length;i++)(!1&r||a>=r)&&Object.keys(o.O).every((function(e){return o.O[e](n[i])}))?n.splice(i--,1):(s=!1,r<a&&(a=r));if(s){e.splice(d--,1);var u=l();void 0!==u&&(t=u)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[n,l,r]}}(),function(){o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,n){var l,r,a=n[0],s=n[1],i=n[2],u=0;if(a.some((function(t){return 0!==e[t]}))){for(l in s)o.o(s,l)&&(o.m[l]=s[l]);if(i)var d=i(o)}for(t&&t(n);u<a.length;u++)r=a[u],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(d)},n=self["webpackChunk_gogoend_svg_filter_graph_builder"]=self["webpackChunk_gogoend_svg_filter_graph_builder"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=o.O(void 0,[998],(function(){return o(1123)}));n=o.O(n)})();
//# sourceMappingURL=app.74ba65b1.js.map