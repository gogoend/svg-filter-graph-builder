(function(){"use strict";var e={3686:function(e,t,n){n(987);var o,l=n(9520),r=JSON.parse('{"name":"@gogoend/svg-filter-graph-builder","version":"0.1.1","private":true,"scripts":{"serve":"vue-cli-service serve","build":"vue-cli-service build","lint":"vue-cli-service lint","ci:deploy-gh-pages":"node ./scripts/deploy-gh-pages.mjs","ci:deploy-local":"node ./scripts/deploy-local.mjs","ci:test-stage-branch":"node ./scripts/test-stage-branch.mjs"},"dependencies":{"@element-plus/icons-vue":"^2.0.10","dexie":"^3.2.2","element-plus":"^2.2.21","lu2":"^2021.12.21","vue":"^3.2.41"},"devDependencies":{"@types/jest":"^24.0.19","@typescript-eslint/eslint-plugin":"^5.41.0","@typescript-eslint/parser":"^5.41.0","@vue/cli-plugin-babel":"~5.0.8","@vue/cli-plugin-eslint":"~5.0.8","@vue/cli-plugin-typescript":"~5.0.8","@vue/cli-plugin-unit-jest":"~5.0.8","@vue/cli-service":"~5.0.8","@vue/compiler-sfc":"^3.2.41","@vue/eslint-config-typescript":"^11.0.2","@vue/test-utils":"^2.2.1","core-js":"^3.26.0","eslint":"^8.26.0","eslint-plugin-vue":"^9.6.0","sass":"^1.43.5","sass-loader":"^8.0.2","typescript":"~4.8.4","vue-jest":"^5.0.0-0"},"volta":{"node":"16.18.0"}}');n(7658);(function(e){e[e["ERROR"]=1]="ERROR",e[e["WARNING"]=2]="WARNING",e[e["LOG"]=3]="LOG",e[e["DEBUG"]=4]="DEBUG"})(o||(o={}));const a=3,i=(...e)=>{const t=[];return e.forEach((e=>{if(["string","number","boolean","undefined","bigint"].includes(typeof e)||null===e)t.push(e);else if("symbol"===typeof e)t.push(`Symbol(${e.description})`);else if("function"===typeof e)t.push(e.toString());else if(e instanceof Error)t.push({message:e.message,stack:e.stack});else{let o={};try{o=JSON.parse(JSON.stringify(e))}catch(n){t.push({message:n.message,stack:n.stack})}t.push(o)}})),t},s={async debug(...e){const t=console.log(...e);return a>=o.DEBUG&&v.add(i(o[o.DEBUG],Number(new Date),"Default User",...e)),t},async log(...e){const t=console.log(...e);return a>=o.LOG&&v.add(i(o[o.LOG],Number(new Date),"Default User",...e)),t},async warn(...e){const t=console.warn(...e);return a>=o.WARNING&&v.add(i(o[o.WARNING],Number(new Date),"Default User",...e)),t},async error(...e){const t=console.error(...e);return a>=o.ERROR&&v.add(i(o[o.ERROR],Number(new Date),"Default User",...e)),t}};var u=s;const d=(()=>{const e=r.name.split("/");return e[e.length-1]})(),c=new l.ZP("gogoend");c.version(1).stores({products:"id,name"}),c.table("products").where("id").equals(d).toArray().then((e=>{if(0===e.length)return c.table("products").add({id:d,name:"SVG滤镜节点编辑器",version:r.version,buildVersion:1})})).catch((e=>{u.error(e)}));const p=new l.ZP(d);p.version(1).stores({files:"id",userProfiles:"id",logs:"++id"});const f=p.table("files"),v=(p.table("userProfiles"),p.table("logs"));window.addEventListener("error",(e=>{u.error(e.error),e.preventDefault()})),window.addEventListener("unhandledrejection",(e=>{u.error(e.reason),e.preventDefault()}));n(7763);var g=n(3096),h=n(5781),m={install(e){e.component("ElIcon",g.gn);for(const[t,n]of Object.entries(h))e.component(t,n)}},y=n(9963),_=n(6252);function w(e,t,n,o,l,r){const a=(0,_.up)("app-main");return(0,_.wg)(),(0,_.j4)(a)}var b=n(2262);const P=Symbol("Canvas上的所有节点"),C=Symbol("添加节点函数"),D=Symbol("移除节点函数"),S=Symbol("Canvas上的所有连线"),I=Symbol("节点对应所有出、入连线的映射关系"),E=Symbol("删除连线函数"),k=Symbol("添加连线函数"),N=Symbol("向 节点id->出、入连线 的映射中添加连线关系"),O=Symbol("Node组件映射"),R=Symbol("各节点表单内容"),x=Symbol("序列化的连线"),F=Symbol("清空Canvas上的所有内容");function V(){const{$eventHub:e}=(0,_.FN)().appContext.config.globalProperties,t=(0,b.iH)({});(0,_.JJ)(P,t);const n=e=>{t.value[e.id]=e};(0,_.JJ)(C,n);const o=e=>{const t=[...u.value[e]?.in?.map((e=>e.id))??[],...u.value[e]?.out?.map((e=>e.id))??[]];t.forEach((e=>{c(e)})),delete u.value[e]},l=n=>{o(n),delete t.value[n],e.emit("svg-canvas:node-removed",n)};(0,_.JJ)(D,l);const r=(0,b.iH)({});(0,_.JJ)(O,r);const a=(0,_.Fl)((()=>{const e={};return Object.entries(r.value).forEach((([t,n])=>{e[t]=n.nodeConfigRef.feAttrValue})),e}));(0,_.JJ)(R,a);const i=(0,b.iH)({});(0,_.JJ)(x,i);const s=(0,b.iH)([]);(0,_.JJ)(S,s);const u=(0,b.iH)({});(0,_.JJ)(I,u);const d=e=>{s.value.push(e),i.value[e.id]={id:e.id,from:{vmId:e.from.vm.nodeId,attr:e.from.attr},to:{vmId:e.to.vm.nodeId,attr:e.to.attr}}};(0,_.JJ)(k,d);const c=e=>{const t=s.value.findIndex((t=>t.id===e)),[n]=s.value.splice(t,1);delete i.value[e],Object.values(u.value).forEach((t=>{for(let n=0;n<t.in.length;)t.in[n].id!==e?n++:t.in.splice(n,1);for(let n=0;n<t.out.length;)t.out[n].id!==e?n++:t.out.splice(n,1)})),n.to.vm.afterPathRemoved?.(n)};(0,_.JJ)(E,c);const p=(e,t,n)=>{u.value[(0,b.SU)(t).vm.nodeId]||(u.value[(0,b.SU)(t).vm.nodeId]={in:[],out:[]}),u.value[(0,b.SU)(t).vm.nodeId].out.push(e),u.value[(0,b.SU)(n).vm.nodeId]||(u.value[(0,b.SU)(n).vm.nodeId]={in:[],out:[]}),u.value[(0,b.SU)(n).vm.nodeId].in.push(e)};(0,_.JJ)(N,p);const f=()=>{Object.keys(t.value).forEach((e=>{l(e)}))};(0,_.JJ)(F,f)}const M=Symbol("正在拖拽的项目"),T=Symbol("鬼影节点引用");function A(){const e=(0,b.iH)(null);(0,_.JJ)(M,e);const t=(0,b.iH)(null);(0,_.JJ)(T,t)}const U=Symbol("被聚焦的节点");function j(){const e=(0,b.iH)(null),t=t=>{e.value=t},{$eventHub:n}=(0,_.FN)().appContext.config.globalProperties;n.on("svg-canvas:node-removed",(n=>{e.value?.nodeId===n&&t(null)})),(0,_.JJ)(U,[e,t])}const B=Symbol("SvgCanvas组件实例"),H=Symbol("设置SvgCanvas组件实例");function G(){const e=(0,b.XI)();(0,_.JJ)(B,e);const t=t=>{e.value=t};(0,_.JJ)(H,t)}const J=[];for(let Yo=0;Yo<256;Yo++)J[Yo]=(Yo<16?"0":"")+Yo.toString(16);function L(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,o=4294967295*Math.random()|0,l=J[255&e]+J[e>>8&255]+J[e>>16&255]+J[e>>24&255]+"-"+J[255&t]+J[t>>8&255]+"-"+J[t>>16&15|64]+J[t>>24&255]+"-"+J[63&n|128]+J[n>>8&255]+"-"+J[n>>16&255]+J[n>>24&255]+J[255&o]+J[o>>8&255]+J[o>>16&255]+J[o>>24&255];return l.toUpperCase()}var W=n(8985),$=n(3577);const q={class:"file-list"},Z=["value"],Y={class:"file-list__footer"},z=["disabled"];var X=(0,_.aZ)({__name:"FileList",props:{handleConfirm:{type:Function,required:!0},handleCancel:{type:Function,required:!0}},setup(e){const t=(0,b.iH)([]),n=(0,b.iH)(""),o=async()=>await f.toArray();return o().then((e=>{t.value=e})),(o,l)=>((0,_.wg)(),(0,_.iD)("div",q,[(0,_._)("form",{class:"file-list__form",onSubmit:l[1]||(l[1]=(0,y.iM)((()=>{}),["prevent"]))},[(0,_.wy)((0,_._)("select",{"onUpdate:modelValue":l[0]||(l[0]=e=>n.value=e),class:"file-list__select"},[((0,_.wg)(!0),(0,_.iD)(_.HY,null,(0,_.Ko)(t.value,((e,t)=>((0,_.wg)(),(0,_.iD)("option",{key:t,value:e.id},(0,$.zw)(e.project.name),9,Z)))),128))],512),[[y.bM,n.value]])],32),((0,_.wg)(),(0,_.j4)((0,_.LL)("template"),{class:"file-list__footer-template"},{default:(0,_.w5)((()=>[(0,_._)("div",Y,[(0,_._)("button",{is:"ui-button",disabled:!n.value,onClick:l[2]||(l[2]=(0,y.iM)((t=>e.handleConfirm(n.value)),["prevent"]))},"Open",8,z),(0,_._)("button",{is:"ui-button",onClick:l[3]||(l[3]=(0,y.iM)((t=>e.handleCancel()),["prevent"]))},"Cancel")])])),_:1}))]))}}),K=n(3744);const Q=(0,K.Z)(X,[["__scopeId","data-v-7a3fd6c0"]]);var ee=Q;function te(){let e,t,n=null;const o=new Promise(((n,o)=>{e=n,t=o}));return new W.Z({title:"Choose a file",content:'<div class="file-chooser-dialog" />',async onShow(){const o=this.querySelector(".file-chooser-dialog");n=(0,y.ri)(ee,{handleConfirm:t=>{e(t),this.hide()},handleCancel:()=>{t(new Error("[File Chooser] 用户没有选择文件")),this.hide()}}),n.mount(o),await(0,_.Y3)();const l=this.querySelector(".ui-dialog-footer"),r=this.querySelector(".file-list__footer-template");while(r.children.length)l.appendChild(r.children[0])},onHide(){n.unmount(),n=null,this.remove()}}),o}const ne=Symbol("保存项目"),oe=Symbol("另存为项目"),le=Symbol("已打开的项目"),re=Symbol("设置已打开的项目"),ae=(Symbol("关闭并新建项目"),Symbol("关闭项目")),ie=Symbol("尝试打开打开文件对话框");function se(){const e=(0,_.FN)().proxy,t=e.$.provides[F],n=e.$.provides[B],o=(0,b.XI)();(0,_.JJ)(le,o);const l=e=>{o.value=e};(0,_.JJ)(re,l);const a=()=>{t(),l(null)},i=async()=>{await new Promise(((e,t)=>{(new W.Z).confirm("<h6>ATTENTION</h6><p>Any unsaved changes will be lost. Continue?</p>",{buttons:[{value:"Continue",events(t){e(void 0),t.dialog.remove()}},{value:"Cancel",events(e){t(new Error("[展示打开文件弹窗] 用户取消了操作")),e.dialog.remove()}}]})})),a()};(0,_.JJ)(ae,i);const s=async()=>{await i();const e=await te();if(e===o.value?.id)return;const[t]=await f.where({id:e}).toArray();if(!t)return Promise.reject(new Error("[打开文件弹窗] 未找到此项目，程序可能发生了内部错误"));a(),await(0,_.Y3)(),l(t),n.value.loadCanvasStuffFromSerializedData(t)};(0,_.JJ)(ie,s);const u=()=>{const t=e.$.provides[P],n=e.$.provides[R],l=e.$.provides[x],a={nodes:t.value,nodeForms:n.value,links:l.value},i={name:r.name,version:r.version,buildVersion:0},s={author:"gogoend",createdTime:Number(new Date),modifiedTime:Number(new Date),name:""},u={id:o.value?.id,stuff:a,product:i,project:s};return JSON.parse(JSON.stringify(u))},d=async()=>{const e=o.value?.id;e?await f.where("id").equals(e).modify(((e,t)=>{t.value=u()})):await c()};(0,_.JJ)(ne,d);const c=async()=>{const e=u();e.id=L();let t="";while(""===t?.trim())t=window.prompt("Enter the name of the your project");if(null===t)return;e.project.name=t;const n={id:L(),...e};await f.add(n),l(n)};(0,_.JJ)(oe,c)}function ue(){[V,A,j,G,se].forEach((e=>e()))}const de={class:"app-wrap"};function ce(e,t,n,o,l,r){const a=(0,_.up)("top-menu-bar"),i=(0,_.up)("svg-canvas"),s=(0,_.up)("node-library-panel"),u=(0,_.up)("stuff-config-panel"),d=(0,_.up)("output-preview-panel");return(0,_.wg)(),(0,_.iD)("div",de,[(0,_.Wm)(a,{class:"top-menu-bar",style:(0,$.j5)({height:`${e.topMenuBarHeight}px`})},null,8,["style"]),(0,_._)("div",{class:"workbench-wrap",style:(0,$.j5)({top:`${e.topMenuBarHeight}px`})},[(0,_.Wm)(i,{class:"svg-canvas",style:(0,$.j5)({left:e.filterLibraryPanelWidth+"px",width:`calc(100% - ${e.stuffConfigPanelWidth}px - ${e.filterLibraryPanelWidth}px)`}),onVnodeMounted:t[0]||(t[0]=t=>{e.setSvgCanvasVm(t.component.proxy)})},null,8,["style"]),(0,_.Wm)(s,{class:"node-library-panel",style:(0,$.j5)({left:0,right:`calc(100% - ${e.filterLibraryPanelWidth}px)`})},null,8,["style"]),(0,_.Wm)(u,{class:"stuff-config-panel",style:(0,$.j5)({right:0,left:`calc(100% - ${e.stuffConfigPanelWidth}px)`})},null,8,["style"]),(0,_.Wm)(d,{class:"output-preview-panel",style:{width:"640px",height:"384px"},onVnodeMounted:e.handleOutputPreviewPanelMounted},null,8,["onVnodeMounted"])],4)])}const pe={ref:"canvasScrollEl"},fe={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 4000 4000","xml:space":"preserve",class:"svg-canvas-board"},ve={class:"ghost"},ge=["d"];function he(e,t,n,o,l,r){const a=(0,_.up)("io-node"),i=(0,_.up)("io-path");return(0,_.wg)(),(0,_.iD)("div",pe,[((0,_.wg)(),(0,_.iD)("svg",fe,[((0,_.wg)(!0),(0,_.iD)(_.HY,null,(0,_.Ko)(e.nodes,(t=>((0,_.wg)(),(0,_.j4)(a,{ref_for:!0,ref:e.setNodeRefMap,key:t.id,is:t.is,"node-id":t.id,onPortStart:e.handlePortStart,onPortMove:e.handlePortMove,onPortConnect:e.handlePortConnect,onPortCancel:e.handlePortCancel,onDestinationChange:e.handleDestinationChange,"relative-paths":e.relativePathMapIndexedByNodeId[t.id]??e.defaultRelativePath,onNodeMove:e.handleNodeMove,position:t.position,"onUpdate:position":e=>t.position=e},null,8,["is","node-id","onPortStart","onPortMove","onPortConnect","onPortCancel","onDestinationChange","relative-paths","onNodeMove","position","onUpdate:position"])))),128)),((0,_.wg)(!0),(0,_.iD)(_.HY,null,(0,_.Ko)(e.linkedPaths,(t=>((0,_.wg)(),(0,_.j4)(i,{key:t.id,"path-id":t.id,"path-d-arguments":t.pathDArguments,from:t.from,to:t.to,onRemove:e.removePath},null,8,["path-id","path-d-arguments","from","to","onRemove"])))),128)),(0,_._)("g",ve,[(0,_._)("path",{class:"ghost-path",d:e.ghostPathD},null,8,ge),e.ghostNodeType?((0,_.wg)(),(0,_.j4)(a,{key:0,ref:"ghostNodeRef",style:{opacity:"0.5"},is:e.ghostNodeType,nodeId:"0",position:e.ghostNodePosition,"onUpdate:position":t[0]||(t[0]=t=>e.ghostNodePosition=t),relativePaths:e.defaultRelativePath},null,8,["is","position","relativePaths"])):(0,_.kq)("",!0)])]))],512)}n(2801),n(1295);const me=["transform"],ye={class:"io-node__inner"},_e={class:"io-node__head"},we={transform:"matrix(1 0 0 1 0 8)",class:"fill-fff module-name"};function be(e,t,n,o,l,r){const a=(0,_.up)("Delete"),i=(0,_.up)("el-icon");return(0,_.wg)(),(0,_.iD)("g",{class:(0,$.C_)(["io-node",{"io-node--focused":e.isFocused}]),onMousedown:t[6]||(t[6]=(0,y.iM)(((...t)=>e.handleNodeMousedown&&e.handleNodeMousedown(...t)),["stop"])),transform:`translate(${e.position[0]}, ${e.position[1]})`,ref:"ioNodeEl"},[((0,_.wg)(),(0,_.iD)("foreignObject",ye,[(0,_._)("div",{class:"io-node__body",xmlns:"http://www.w3.org/1999/xhtml",onClick:t[5]||(t[5]=(0,y.iM)(((...t)=>e.handleNodeBodyClick&&e.handleNodeBodyClick(...t)),["exact","stop"]))},[(0,_.kq)("",!0),(0,_._)("div",_e,[(0,_._)("em",{class:"port out","data-port-type":"out",style:(0,$.j5)({width:2*e.POINT_R+"px",height:2*e.POINT_R+"px",borderWidth:`${e.POINT_BORDER_W}px`}),"data-fe-attr":"result",ref:e.setFeAttrEls,onMouseenter:t[0]||(t[0]=(...t)=>e.handlePortMouseenter&&e.handlePortMouseenter(...t))},null,36),(0,_._)("span",we,(0,$.zw)(e.is),1)]),((0,_.wg)(),(0,_.j4)((0,_.LL)(e.InternalNodeImplement),(0,_.dG)({ref:"nodeConfigRef"},{is:e.is,nodeId:e.nodeId,relativePaths:e.relativePaths}),null,16)),(0,_._)("div",{class:"io-node__toolbox",onClick:t[4]||(t[4]=(0,y.iM)((()=>{}),["stop"]))},[(0,_._)("button",{class:"io-node__toolbox-button",is:"ui-button",onClick:t[1]||(t[1]=t=>e.copySvgFilterCode(e.nodeId)),title:"Copy SVG Filter Code"}," <SVG> "),(0,_._)("button",{class:"io-node__toolbox-button",is:"ui-button",onClick:t[2]||(t[2]=t=>e.copyCssRule(e.nodeId)),title:"Copy CSS Rule"}," CSS Rule "),(0,_._)("button",{class:"io-node__toolbox-button",is:"ui-button",onClick:t[3]||(t[3]=t=>e.removeNode(e.nodeId)),title:"Remove Node","data-type":"danger"},[(0,_.Wm)(i,null,{default:(0,_.w5)((()=>[(0,_.Wm)(a)])),_:1})])])])]))],42,me)}const Pe=function(e,t){const n=t?.start||(()=>{}),o=t?.move||(()=>{}),l=t?.up||(()=>{}),r=e.target;n(e,{originEl:r});const a=e=>{switch(e.type){case"mousemove":o(e,{originEl:r});break;case"mouseup":document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",a),l(e,{originEl:r});break}};document.addEventListener("mousemove",a),document.addEventListener("mouseup",a)};var Ce=Pe;const De={type:"source",ports:{}},Se={type:"source",ports:{}},Ie={type:"normal",ports:{in:{showInConfigPanel:!1},kernelMatrix:{defaultValue:"0 1 0, 1 1 1, 0 1 0"},order:{defaultValue:"3, 3"},divisor:{type:"range",range:[.01,100],step:.01,defaultValue:1},bias:{type:"range",range:[-1,1],step:.01,defaultValue:0},targetX:{type:"range",range:[0,10],step:1,defaultValue:0},targetY:{type:"range",range:[0,10],step:1,defaultValue:0},edgeMode:{type:"text",defaultValue:"duplicate",enum:["duplicate","wrap","none"]},kernelUnitLength:{type:"range",range:[1,100],step:1,defaultValue:2},preserveAlpha:{type:"text",defaultValue:"true",enum:["true","false"]}}},Ee={type:"normal",ports:{type:{type:"text",defaultValue:"fractalNoise",enum:[{label:"fractalNoise",value:"fractalNoise"},{label:"turbulence",value:"turbulence"}]},baseFrequency:{type:"range",defaultValue:.05,range:[0,1],step:.01},numOctaves:{type:"range",defaultValue:1,step:1,range:[0,20]},stitchTiles:{defaultValue:"stitch",enum:["stitch","noStitch"]},seed:{type:"range",defaultValue:0,step:.01,range:[-1e4,1e4]}}},ke={type:"normal",ports:{in:{showInConfigPanel:!1},dx:{type:"range",defaultValue:0,step:.01,range:[-1e3,1e3]},dy:{type:"range",defaultValue:0,step:.01,range:[-1e3,1e3]},stdDeviation:{type:"range",defaultValue:0,step:.01,range:[0,100]},"flood-color":{type:"color"},"flood-opacity":{type:"range",defaultValue:1,step:.01,range:[0,1]}}},Ne={type:"merge",ports:{in:{showInConfigPanel:!1}}},Oe={type:"normal",ports:{in:{showInConfigPanel:!1},dx:{type:"range",defaultValue:0,step:.01,range:[-1e3,1e3]},dy:{type:"range",defaultValue:0,step:.01,range:[-1e3,1e3]}}},Re={type:"normal",tag:"feColorMatrix",ports:{in:{showInConfigPanel:!1},type:{showInConfigPanel:!1,showOnNode:!1,defaultValue:"matrix"},values:{defaultValue:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0].join(" ")}}},xe={type:"matrix-in-fe-color-matrix",ports:{}},Fe={tag:"feColorMatrix",type:"normal",ports:{in:{showInConfigPanel:!1},type:{showInConfigPanel:!1,showOnNode:!1,defaultValue:"saturate"},values:{type:"range",defaultValue:1,step:.01,range:[-10,10]}}},Ve={tag:"feColorMatrix",type:"normal",ports:{in:{showInConfigPanel:!1},type:{showInConfigPanel:!1,showOnNode:!1,defaultValue:"hueRotate"},values:{type:"range",defaultValue:0,step:.01,range:[0,360]}}},Me={tag:"feColorMatrix",type:"normal",ports:{in:{showInConfigPanel:!1},type:{showInConfigPanel:!1,showOnNode:!1,defaultValue:"luminanceToAlpha"},values:{}}},Te={type:"normal",ports:{in:{showInConfigPanel:!1}}},Ae={type:"normal",ports:{in:{showInConfigPanel:!1},in2:{showInConfigPanel:!1},scale:{type:"range",defaultValue:0,step:.01,range:[-100,100]},xChannelSelector:{defaultValue:"A",enum:["R","G","B","A"]},yChannelSelector:{defaultValue:"A",enum:["R","G","B","A"]}}},Ue={type:"normal",ports:{href:{}}},je={type:"normal",ports:{in:{showInConfigPanel:!1},in2:{showInConfigPanel:!1},mode:{defaultValue:"normal",enum:["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}}},Be={type:"normal",tag:"feComposite",ports:{in:{showInConfigPanel:!1},in2:{showInConfigPanel:!1},operator:{enum:["over","in","out","atop","xor","lighter"]}}},He={type:"normal",tag:"feComposite",ports:{in:{showInConfigPanel:!1},in2:{showInConfigPanel:!1},operator:{showInConfigPanel:!1,showOnNode:!1,defaultValue:"arithmetic"},k1:{type:"range",range:[-5,5],defaultValue:.5},k2:{type:"range",range:[-5,5],defaultValue:.5},k3:{type:"range",range:[-5,5],defaultValue:.5},k4:{type:"range",range:[-5,5],defaultValue:.5}}},Ge={type:"normal",ports:{"flood-color":{type:"color"},"flood-opacity":{type:"range",defaultValue:1,step:.01,range:[0,1]}}},Je={type:"normal",ports:{in:{showInConfigPanel:!1},stdDeviation:{type:"range",defaultValue:0,step:.01,range:[0,100]},edgeMode:{type:"text",enum:["duplicate","wrap","none"],defaultValue:"none"}}},Le={type:"normal",ports:{in:{showInConfigPanel:!1},operator:{enum:["erode","dilate"],defaultValue:"erode"},radius:{type:"range",defaultValue:0,step:.01,range:[0,50]}}},We={type:"component-transfer-root",ports:{in:{showInConfigPanel:!1},R:{showInConfigPanel:!1},G:{showInConfigPanel:!1},B:{showInConfigPanel:!1},A:{showInConfigPanel:!1}}},$e={type:"component-transfer-child",ports:{type:{defaultValue:"identity",showInConfigPanel:!1,showOnNode:!1}}},qe={type:"component-transfer-child",ports:{type:{defaultValue:"table",showInConfigPanel:!1,showOnNode:!1},tableValues:{defaultValue:"1 1 1 1"}}},Ze={type:"component-transfer-child",ports:{type:{defaultValue:"linear",enum:["linear","discrete"]},slope:{type:"number",defaultValue:1},intercept:{type:"number",defaultValue:0}}},Ye={type:"component-transfer-child",ports:{type:{defaultValue:"gamma",showInConfigPanel:!1,showOnNode:!1},amplitude:{type:"number",defaultValue:1},exponent:{type:"number",defaultValue:0},offset:{type:"number",defaultValue:0}}},ze={type:"string-literal",ports:{value:{type:"text"}}};var Xe={SourceGraphic:De,SourceAlpha:Se,feConvolveMatrix:Ie,feTurbulence:Ee,feDropShadow:ke,feMerge:Ne,feOffset:Oe,feColorMatrixUsingMatrix:Re,matrixInFeColorMatrix:xe,feColorMatrixUsingSaturate:Fe,feColorMatrixUsingHueRotate:Ve,feColorMatrixUsingLuminanceToAlpha:Me,feTile:Te,feDisplacementMap:Ae,feImage:Ue,feBlend:je,feCompositeWithoutK:Be,feCompositeWithK:He,feFlood:Ge,feGaussianBlur:Je,feMorphology:Le,feComponentTransfer:We,feFuncXUsingIdentity:$e,feFuncXUsingTable:qe,feFuncXUsingLinearOrDiscrete:Ze,feFuncXUsingGamma:Ye,StringLiteral:ze};const Ke=Symbol("SvgCanvas组件的范围");function Qe(e){return e.dataset.portType}function et(e){return["in","out"].includes(e.dataset.portType)}function tt(e){const{props:t,type:n}=e;let o=e.children;const l=document.createElementNS("http://www.w3.org/2000/svg",n);return t&&Object.keys(t).forEach((e=>{["number","string"].includes(typeof t?.[e])&&String(t?.[e]).length&&l.setAttribute(e,t?.[e])})),"object"===typeof o&&null!==o?Array.isArray(o)||(o=[o]):o=[],(o||[]).forEach((e=>{l.append(tt(e))})),l}const nt=e=>{const t=new Map,n=new Map;e.forEach((e=>{const[o,l]=[e.from.vm,e.to.vm];t.has(o)||(t.set(o,0),n.set(o,[])),t.has(l)||(t.set(l,0),n.set(l,[])),t.set(l,t.get(l)+1),n.get(o).push(l)}));const o=[],l=[];for(const r of t)0===r[1]&&o.push(r[0]);while(o.length){const e=o.shift();l.push(e);const r=n.get(e);r.forEach((e=>{t.set(e,t.get(e)-1),0===t.get(e)&&o.push(e)}))}return l},ot=(...e)=>{},lt={key:0,class:"io-node__li"},rt=["data-fe-attr"],at={class:"io-node__port-text"},it={class:"port-name"};function st(e,t,n,o,l,r){return(0,_.wg)(!0),(0,_.iD)(_.HY,null,(0,_.Ko)(e.fe[e.is].ports,((n,o)=>((0,_.wg)(),(0,_.iD)(_.HY,{key:o},[!1!==n.showOnNode?((0,_.wg)(),(0,_.iD)("div",lt,[(0,_._)("em",{class:"port in",style:(0,$.j5)({width:2*e.POINT_R+"px",height:2*e.POINT_R+"px",borderWidth:`${e.POINT_BORDER_W}px`}),"data-port-type":"in",r:"10","data-fe-attr":o,ref_for:!0,ref:e.setFeAttrEls,onMouseenter:t[0]||(t[0]=(...t)=>e.handlePortMouseenter&&e.handlePortMouseenter(...t))},null,44,rt),(0,_._)("label",at,[(0,_._)("span",it,(0,$.zw)(o),1)])])):(0,_.kq)("",!0)],64)))),128)}var ut=()=>{const e=(0,_.f3)("fromPort"),t=(0,_.f3)("toPort"),n=(0,b.iH)(),o=(0,b.iH)([]),l=e=>{e&&o.value.push(e)};(0,_.Xn)((()=>{o.value=[]}));const r=(0,_.f3)("allDescendants"),a=(0,_.f3)("orderedAllDescendants"),i=(0,_.f3)("handlePortMouseenter"),s=(0,_.Fl)((()=>{const e="data:image/svg+xml,",t=(0,_.h)("filter",{id:"filter"},(a?.value??[]).map(((e,t)=>e.getVNodeFragment(e,t)))),n=`\n<svg xmlns="http://www.w3.org/2000/svg" id="SVGFilter" width="40" height="40" viewBox="0 0 256 256">\n<defs>${tt(t).outerHTML}</defs>\n<g filter="url(#filter)">\n  <linearGradient id="SVGID_1_" gradientUnits="userSpaceOnUse" x1="0" y1="64" x2="64" y2="64">\n    <stop offset="0" style="stop-color:#EE7E77" /><stop offset="0.5" style="stop-color:#E7334C" /><stop offset="1" style="stop-color:#DA0439" />\n  </linearGradient>\n  <rect style="fill:url(#SVGID_1_);" width="64" height="128" />\n  <linearGradient id="SVGID_2_" gradientUnits="userSpaceOnUse" x1="64" y1="64" x2="128" y2="64">\n    <stop offset="0" style="stop-color:#F29847" /><stop offset="0.5" style="stop-color:#EE7300" /><stop offset="1" style="stop-color:#D45E12" />\n  </linearGradient>\n  <rect x="64" style="fill:url(#SVGID_2_);" width="64" height="128" />\n  <linearGradient id="SVGID_3_" gradientUnits="userSpaceOnUse" x1="128" y1="64" x2="192" y2="64">\n    <stop offset="0" style="stop-color:#FFF9AC" /><stop offset="0.5" style="stop-color:#FFF000" /><stop offset="1" style="stop-color:#FFDC00" />\n  </linearGradient>\n  <rect x="128" style="fill:url(#SVGID_3_);" width="64" height="128" />\n  <linearGradient id="SVGID_4_" gradientUnits="userSpaceOnUse" x1="192" y1="64" x2="256" y2="64">\n    <stop offset="0" style="stop-color:#66BC81" /><stop offset="0.5" style="stop-color:#009944" /><stop offset="1" style="stop-color:#008A43" />\n  </linearGradient>\n  <rect x="192" style="fill:url(#SVGID_4_);" width="64" height="128" />\n  <linearGradient id="SVGID_5_" gradientUnits="userSpaceOnUse" x1="0" y1="192" x2="64" y2="192">\n    <stop offset="0" style="stop-color:#3EAFCD" /><stop offset="0.5" style="stop-color:#0091B8" /><stop offset="1" style="stop-color:#00767F" />\n  </linearGradient>\n  <rect y="128" style="fill:url(#SVGID_5_);" width="64" height="128" />\n  <linearGradient id="SVGID_6_" gradientUnits="userSpaceOnUse" x1="64" y1="192" x2="128" y2="192">\n    <stop offset="0" style="stop-color:#584C9D" /><stop offset="0.5" style="stop-color:#1D2088" /><stop offset="1" style="stop-color:#39396C" />\n  </linearGradient>\n  <rect x="64" y="128" style="fill:url(#SVGID_6_);" width="64" height="128" />\n  <linearGradient id="SVGID_7_" gradientUnits="userSpaceOnUse" x1="128" y1="192" x2="192" y2="192">\n    <stop offset="0" style="stop-color:#B87FB5" /><stop offset="0.5" style="stop-color:#8E2E8C" /><stop offset="1" style="stop-color:#731485" />\n  </linearGradient>\n  <rect x="128" y="128" style="fill:url(#SVGID_7_);" width="64" height="128" />\n  <linearGradient id="SVGID_8_" gradientUnits="userSpaceOnUse" x1="192" y1="192" x2="256" y2="192">\n    <stop offset="0" style="stop-color:#EB70A6" /><stop offset="0.5" style="stop-color:#E4007F" /><stop offset="1" style="stop-color:#CE0080" />\n  </linearGradient>\n  <rect x="192" y="128" style="fill:url(#SVGID_8_);" width="64" height="128" />\n</g>\n</svg>\n`;return e+encodeURIComponent(n)}));return{fromPort:e,toPort:t,ioNodeEl:n,feAttrEls:o,setFeAttrEls:l,allDescendants:r,handlePortMouseenter:i,filterThumbUrl:s}};const dt=150,ct=300,pt=32,ft=10,vt=4,gt=150,ht=4;var mt=(0,_.aZ)({name:"NormalNode",props:{is:{type:String,required:!0},nodeId:{type:String,required:!0},relativePaths:{type:Object,required:!0}},setup(e){const{fromPort:t,toPort:n,ioNodeEl:o,setFeAttrEls:l,allDescendants:r,handlePortMouseenter:a,filterThumbUrl:i}=ut(),s=(0,b.iH)({}),d=(0,_.Fl)((()=>{const t={};return e.relativePaths.in.forEach((e=>{t[e.to.attr]=e.from.vm.mergedFeAttrValue[e.from.attr]})),t})),c=(0,_.Fl)((()=>({...s.value,...d.value,result:e.nodeId}))),p=(e,t)=>{const n=e.is,{mergedFeAttrValue:o}=e,l={};Object.keys(o||{}).forEach((e=>{void 0!==o[e]&&(l[e]=o[e]||""),l.in===l.result&&delete l.in,Object.prototype.hasOwnProperty.call(Xe[n].ports,"in")&&!l.in&&(l.in="SourceGraphic"),Object.prototype.hasOwnProperty.call(Xe[n].ports,"in2")&&!l.in2&&(l.in2="SourceGraphic")}));const r=Xe[n].tag??n;return(0,_.h)(r,l)};if(u.debug(Xe[e.is]),["normal",void 0].includes(Xe[e.is].type)){const{ports:t}=Xe[e.is];Object.keys(t).forEach((e=>{["number","range"].includes(t[e].type)?s.value[e]=t[e].defaultValue??0:s.value[e]=t[e].defaultValue??""}))}return{POINT_R:ft,POINT_BORDER_W:vt,fromPort:t,ioNodeEl:o,setFeAttrEls:l,feAttrValue:s,foreignPortValue:d,mergedFeAttrValue:c,afterPathConnected:ot,afterPathRemoved:ot,handlePortMouseenter:a,fe:Xe,allDescendants:r,filterThumbUrl:i,getVNodeFragment:p}}});const yt=(0,K.Z)(mt,[["render",st],["__scopeId","data-v-e7beee26"]]);var _t=yt;const wt=e=>((0,_.dD)("data-v-b64b5bd0"),e=e(),(0,_.Cn)(),e),bt=["data-fe-attr"],Pt=wt((()=>(0,_._)("label",{class:"io-node__port-text"},[(0,_._)("span",{class:"port-name"},"in")],-1)));function Ct(e,t,n,o,l,r){return(0,_.wg)(!0),(0,_.iD)(_.HY,null,(0,_.Ko)(e.feAttrValue,((n,o)=>((0,_.wg)(),(0,_.iD)("div",{class:"io-node__li",key:o},[(0,_._)("em",{class:"port in",style:(0,$.j5)({width:2*e.POINT_R+"px",height:2*e.POINT_R+"px",borderWidth:`${e.POINT_BORDER_W}px`}),"data-port-type":"in",r:"10","data-fe-attr":o,ref_for:!0,ref:e.setFeAttrEls,onMouseenter:t[0]||(t[0]=(...t)=>e.handlePortMouseenter&&e.handlePortMouseenter(...t))},null,44,bt),Pt])))),128)}var Dt=(0,_.aZ)({name:"MergeNode",props:{is:{type:String,required:!0},nodeId:{type:String,required:!0},relativePaths:{type:Object,required:!0}},setup(e){const{toPort:t,fromPort:n,ioNodeEl:o,setFeAttrEls:l,allDescendants:r,handlePortMouseenter:a,filterThumbUrl:i}=ut(),s=(0,b.iH)([""]),d=(0,_.Fl)((()=>({result:e.nodeId}))),c=(0,_.FN)().parent?.proxy,p=()=>{u.debug(t?.value,n?.value);const{attr:e}=[t?.value,n?.value].find((e=>e?.vm===c)),o=Number(e);s.value[o]=n.value.vm.nodeId,s.value[o+1]||(s.value[o+1]="")},f=e=>{const{attr:t}=e.to;s.value[Number(t)]=""},v=()=>{const{is:t,nodeId:n}=e;return(0,_.h)(t,{result:n},(0,b.SU)(s).filter((e=>!!e)).map((e=>(0,_.h)("feMergeNode",{in:e}))))};return{POINT_R:ft,POINT_BORDER_W:vt,fromPort:n,ioNodeEl:o,setFeAttrEls:l,feAttrValue:s,mergedFeAttrValue:d,afterPathConnected:p,afterPathRemoved:f,handlePortMouseenter:a,allDescendants:r,filterThumbUrl:i,getVNodeFragment:v}}});const St=(0,K.Z)(Dt,[["render",Ct],["__scopeId","data-v-b64b5bd0"]]);var It=St;function Et(e,t,n,o,l,r){return(0,_.wg)(),(0,_.iD)("div")}var kt=(0,_.aZ)({name:"SourceNode",props:{is:{type:String,required:!0},nodeId:{type:String,required:!0},relativePaths:{type:Object,required:!0}},setup(e){const{fromPort:t,ioNodeEl:n,setFeAttrEls:o,handlePortMouseenter:l,filterThumbUrl:r}=ut(),a=(0,b.OT)({result:e.is}),i=()=>(0,_.h)("feOffset",{in:e.is});return{POINT_R:ft,POINT_BORDER_W:vt,fromPort:t,ioNodeEl:n,setFeAttrEls:o,mergedFeAttrValue:a,handlePortMouseenter:l,filterThumbUrl:r,getVNodeFragment:i}}});const Nt=(0,K.Z)(kt,[["render",Et],["__scopeId","data-v-4ebf66e6"]]);var Ot=Nt;function Rt(e,t,n,o,l,r){return(0,_.wy)(((0,_.wg)(),(0,_.iD)("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.feAttrValue.value=t)},null,512)),[[y.nr,e.feAttrValue.value,void 0,{lazy:!0}]])}var xt=(0,_.aZ)({name:"SourceNode",props:{is:{type:String,required:!0},nodeId:{type:String,required:!0},relativePaths:{type:Object,required:!0}},setup(e){const{fromPort:t,ioNodeEl:n,setFeAttrEls:o,handlePortMouseenter:l,filterThumbUrl:r}=ut(),a=(0,b.iH)({value:""}),i=(0,_.Fl)((()=>({result:(0,b.SU)(a).value}))),s=()=>null;return{POINT_R:ft,POINT_BORDER_W:vt,fromPort:t,ioNodeEl:n,setFeAttrEls:o,mergedFeAttrValue:i,handlePortMouseenter:l,filterThumbUrl:r,getVNodeFragment:s,feAttrValue:a}}});const Ft=(0,K.Z)(xt,[["render",Rt],["__scopeId","data-v-68f4c358"]]);var Vt=Ft;const Mt=["onUpdate:modelValue"];function Tt(e,t,n,o,l,r){return(0,_.wg)(),(0,_.iD)("div",null,[((0,_.wg)(!0),(0,_.iD)(_.HY,null,(0,_.Ko)(e.feAttrValue,((t,n)=>(0,_.wy)(((0,_.wg)(),(0,_.iD)("input",{key:n,"onUpdate:modelValue":t=>e.feAttrValue[n]=t,class:"input"},null,8,Mt)),[[y.nr,e.feAttrValue[n]]]))),128))])}var At=(0,_.aZ)({name:"SourceNode",props:{is:{type:String,required:!0},nodeId:{type:String,required:!0},relativePaths:{type:Object,required:!0}},setup(e){const{fromPort:t,ioNodeEl:n,setFeAttrEls:o,handlePortMouseenter:l,filterThumbUrl:r}=ut(),a=(0,b.iH)((()=>{const e=new Array(20);return e.fill(0),e[0]=e[6]=e[12]=e[18]=1,e})()),i=(0,_.Fl)((()=>({result:a.value.join(" ")}))),s=()=>null;return{POINT_R:ft,POINT_BORDER_W:vt,fromPort:t,ioNodeEl:n,setFeAttrEls:o,feAttrValue:a,mergedFeAttrValue:i,handlePortMouseenter:l,filterThumbUrl:r,getVNodeFragment:s}}});const Ut=(0,K.Z)(At,[["render",Tt],["__scopeId","data-v-f802b5d6"]]);var jt=Ut;const Bt={key:0,class:"io-node__li"},Ht=["data-fe-attr"],Gt={class:"io-node__port-text"},Jt={class:"port-name"};function Lt(e,t,n,o,l,r){return(0,_.wg)(!0),(0,_.iD)(_.HY,null,(0,_.Ko)(e.fe[e.is].ports,((n,o)=>((0,_.wg)(),(0,_.iD)(_.HY,{key:o},[!1!==n.showOnNode?((0,_.wg)(),(0,_.iD)("div",Bt,[(0,_._)("em",{class:"port in",style:(0,$.j5)({width:2*e.POINT_R+"px",height:2*e.POINT_R+"px",borderWidth:`${e.POINT_BORDER_W}px`}),"data-port-type":"in",r:"10","data-fe-attr":o,ref_for:!0,ref:e.setFeAttrEls,onMouseenter:t[0]||(t[0]=(...t)=>e.handlePortMouseenter&&e.handlePortMouseenter(...t))},null,44,Ht),(0,_._)("label",Gt,[(0,_._)("span",Jt,(0,$.zw)(o),1)])])):(0,_.kq)("",!0)],64)))),128)}var Wt=(0,_.aZ)({name:"NormalNode",props:{is:{type:String,required:!0},nodeId:{type:String,required:!0},relativePaths:{type:Object,required:!0}},setup(e){const{fromPort:t,toPort:n,ioNodeEl:o,setFeAttrEls:l,allDescendants:r,handlePortMouseenter:a,filterThumbUrl:i}=ut(),s=(0,b.iH)({}),d=(0,_.Fl)((()=>{const t={};return e.relativePaths.in.forEach((e=>{t[e.to.attr]=e.from.vm.mergedFeAttrValue[e.from.attr]})),t})),c=(0,_.Fl)((()=>({in:d.value.in,result:e.nodeId}))),p=(0,_.f3)(O),f=e=>{const t=e.is,{mergedFeAttrValue:n}=e,o={};Object.keys(n||{}).forEach((e=>{void 0!==n[e]&&(o[e]=n[e]||""),o.in===o.result&&delete o.in,Object.prototype.hasOwnProperty.call(Xe[t].ports,"in")&&!o.in&&(o.in="SourceGraphic"),Object.prototype.hasOwnProperty.call(Xe[t].ports,"in2")&&!o.in2&&(o.in2="SourceGraphic")}));const l=Xe[t].tag??t,r={R:{type:"identity"},G:{type:"identity"},B:{type:"identity"},A:{type:"identity"}};return Object.keys(r).forEach((e=>{d.value[e]&&Object.assign(r[e],p.value[d.value[e]].mergedFeAttrValue)})),(0,_.h)(l,o,Object.entries(r).map((([e,t])=>(0,_.h)(`feFunc${e}`,t))))};if(u.debug(Xe[e.is]),["normal",void 0].includes(Xe[e.is].type)){const{ports:t}=Xe[e.is];Object.keys(t).forEach((e=>{["number","range"].includes(t[e].type)?s.value[e]=t[e].defaultValue??0:s.value[e]=t[e].defaultValue??""}))}return{POINT_R:ft,POINT_BORDER_W:vt,fromPort:t,ioNodeEl:o,setFeAttrEls:l,feAttrValue:s,foreignPortValue:d,mergedFeAttrValue:c,afterPathConnected:ot,afterPathRemoved:ot,handlePortMouseenter:a,fe:Xe,allDescendants:r,filterThumbUrl:i,getVNodeFragment:f}}});const $t=(0,K.Z)(Wt,[["render",Lt],["__scopeId","data-v-4866aacc"]]);var qt=$t;const Zt={key:0,class:"io-node__li"},Yt=["data-fe-attr"],zt={class:"io-node__port-text"},Xt={class:"port-name"};function Kt(e,t,n,o,l,r){return(0,_.wg)(!0),(0,_.iD)(_.HY,null,(0,_.Ko)(e.fe[e.is].ports,((n,o)=>((0,_.wg)(),(0,_.iD)(_.HY,{key:o},[!1!==n.showOnNode?((0,_.wg)(),(0,_.iD)("div",Zt,[(0,_._)("em",{class:"port in",style:(0,$.j5)({width:2*e.POINT_R+"px",height:2*e.POINT_R+"px",borderWidth:`${e.POINT_BORDER_W}px`}),"data-port-type":"in",r:"10","data-fe-attr":o,ref_for:!0,ref:e.setFeAttrEls,onMouseenter:t[0]||(t[0]=(...t)=>e.handlePortMouseenter&&e.handlePortMouseenter(...t))},null,44,Yt),(0,_._)("label",zt,[(0,_._)("span",Xt,(0,$.zw)(o),1)])])):(0,_.kq)("",!0)],64)))),128)}var Qt=(0,_.aZ)({name:"NormalNode",props:{is:{type:String,required:!0},nodeId:{type:String,required:!0},relativePaths:{type:Object,required:!0}},setup(e){const{fromPort:t,toPort:n,ioNodeEl:o,setFeAttrEls:l,allDescendants:r,handlePortMouseenter:a,filterThumbUrl:i}=ut(),s=(0,b.iH)({}),d=(0,_.Fl)((()=>{const t={};return e.relativePaths.in.forEach((e=>{t[e.to.attr]=e.from.vm.mergedFeAttrValue[e.from.attr]})),t})),c=(0,_.Fl)((()=>({type:Xe[e.is].ports.type.defaultValue,...s.value,...d.value,result:e.nodeId}))),p=()=>null;if(u.debug(Xe[e.is]),["normal",void 0].includes(Xe[e.is].type)){const{ports:t}=Xe[e.is];Object.keys(t).forEach((e=>{["number","range"].includes(t[e].type)?s.value[e]=t[e].defaultValue??0:s.value[e]=t[e].defaultValue??""}))}return{POINT_R:ft,POINT_BORDER_W:vt,fromPort:t,ioNodeEl:o,setFeAttrEls:l,feAttrValue:s,foreignPortValue:d,mergedFeAttrValue:c,afterPathConnected:ot,afterPathRemoved:ot,handlePortMouseenter:a,fe:Xe,allDescendants:r,filterThumbUrl:i,getVNodeFragment:p}}});const en=(0,K.Z)(Qt,[["render",Kt],["__scopeId","data-v-2d4cd09e"]]);var tn=en,nn=n(7282);const on=(0,_.aZ)({components:{NormalNode:_t,MergeNode:It,SourceNode:Ot,StringLiteralNode:Vt,MatrixInFeColorMatrixNode:jt,ComponentTransferRootNode:qt,ComponentTransferChildNode:tn},name:"IoNode",props:{is:{type:String,required:!0},nodeId:{type:String,required:!0},relativePaths:{type:Object,required:!0},position:{type:Array,required:!0}},setup(e,{emit:t}){const n=(0,_.FN)().proxy,o=(0,_.f3)(Ke),l=(0,_.f3)("fromPort"),r=(0,_.f3)("toPort"),a=(0,b.iH)(),i=(0,b.iH)([0,0]),s=(0,b.iH)([]),u=e=>{e&&s.value.push(e)};(0,_.Xn)((()=>{s.value=[]}));const d=(0,_.Fl)((()=>{const t=e.is;return["normal",void 0].includes(Xe[t].type)?_t:["merge"].includes(Xe[t].type)?It:["source"].includes(Xe[t].type)?Ot:["string-literal"].includes(Xe[t].type)?Vt:["matrix-in-fe-color-matrix"].includes(Xe[t].type)?jt:["component-transfer-root"].includes(Xe[t].type)?qt:["component-transfer-child"].includes(Xe[t].type)?tn:"div"})),c=(0,b.iH)(),p=(0,_.Fl)((()=>c.value?.filterThumbUrl??"")),f=(0,_.Fl)((()=>c.value?.mergedFeAttrValue??{})),v=(0,_.Fl)((()=>c.value?.getVNodeFragment)),g=(0,_.Fl)((()=>c.value?.afterPathConnected??(()=>{}))),h=(0,_.Fl)((()=>c.value?.afterPathRemoved??(()=>{}))),m=(0,_.f3)("canvasScrollEl"),w=function(s){Ce(s,{start(e,{originEl:o}){if(et(o))t("port-start",{ev:e,originEl:o,vm:n});else{const t=a.value?.getBoundingClientRect();i.value=[e.pageX-t?.left-m.value.scrollLeft,e.pageY-t?.top-m.value.scrollTop]}},move(l,{originEl:r}){if(et(r))t("port-move",{ev:l,originEl:r,vm:n});else{const n=[l.pageX-i.value[0]-o.value.left,l.pageY-i.value[1]-o.value.top];t("update:position",n),(0,_.Y3)((()=>{const n=a.value?.getBoundingClientRect();i.value=[l.pageX-n?.left-m.value.scrollLeft,l.pageY-n?.top-m.value.scrollTop],t("node-move",e.relativePaths)}))}},up(e,{originEl:o}){et(o)&&(et(e.target)&&l?.value&&r?.value?t("port-connect",{ev:e,originEl:o,vm:n}):t("port-cancel",{ev:e,originEl:o,vm:n})),i.value=[0,0]}})},P=function(e){l?.value&&(t("destination-change",{ev:e,vm:null,originEl:null}),e.target?.removeEventListener("mouseout",P))},C=function(e){l?.value&&(t("destination-change",{ev:e,vm:n,originEl:e.target}),e.target?.addEventListener("mouseout",P))};(0,_.JJ)("handlePortMouseenter",C);const S=(0,_.Fl)((()=>{const e=new Set,t=n=>{e.add(n),n.relativePaths.in.forEach((e=>{t(e.from.vm)}))};return t(n),[...e]}));(0,_.JJ)("allDescendants",S);const I=(0,_.Fl)((()=>{const e=[];return S?.value.forEach((t=>{e.push(...t.relativePaths.in)})),e.length?nt(e):[n]}));(0,_.JJ)("orderedAllDescendants",I);const E=(0,_.Fl)((()=>I.value.map((e=>()=>e.getVNodeFragment(e))))),[k,N]=(0,_.f3)(U),O=()=>{N(n)},R=(0,_.Fl)((()=>k.value===n)),x=(0,_.f3)(D),F=async()=>{const t=()=>(0,_.h)("filter",{id:e.nodeId},E.value.map((e=>e()))),n=(0,y.ri)(t),o=document.createElementNS("http://www.w3.org/2000/svg","svg");n.mount(o),await(0,_.Y3)();const l=o.outerHTML;n.unmount(),await navigator.clipboard.writeText(l),nn.Z.success("SVG filter code has been copied successfully.","success")},V=async()=>{const t=`filter: url(#${e.nodeId})`;await navigator.clipboard.writeText(t),nn.Z.success("CSS rule code has been copied successfully.","success")};return{POINT_R:ft,POINT_BORDER_W:vt,fromPort:l,ioNodeEl:a,InternalNodeImplement:d,setFeAttrEls:u,handleNodeMousedown:w,handlePortMouseenter:C,fe:Xe,allDescendants:S,afterPathConnected:g,afterPathRemoved:h,nodeConfigRef:c,filterThumbUrl:p,mergedFeAttrValue:f,getVNodeFragment:v,orderedAllDescendants:I,renderOfOrderedAllDescendants:E,focusingNode:k,handleNodeBodyClick:O,isFocused:R,removeNode:x,copySvgFilterCode:F,copyCssRule:V}}});var ln=on;const rn=(0,K.Z)(ln,[["render",be],["__scopeId","data-v-1a1e6a8e"]]);var an=rn;const sn=["d"],un=["transform"];function dn(e,t,n,o,l,r){const a=(0,_.up)("Delete"),i=(0,_.up)("el-icon");return(0,_.wg)(),(0,_.iD)("g",{class:(0,$.C_)(["linked-path",{"linked-path__focused":e.focused}]),onFocus:t[4]||(t[4]=t=>e.focused=!0),onBlur:t[5]||(t[5]=t=>e.focused=!1)},[(0,_._)("path",{class:(0,$.C_)(["linked-path-path",{"linked-path__focused-path":e.focused}]),style:(0,$.j5)({strokeWidth:`${e.PATH_STROKE_W}px`}),d:e.pathD,onClick:t[0]||(t[0]=(...t)=>e.handlePathClick&&e.handlePathClick(...t)),ref:"pathRef"},null,14,sn),e.focused?((0,_.wg)(),(0,_.iD)("foreignObject",{key:0,transform:`translate(\n        ${e.p[0]},\n        ${e.p[1]}\n      )`,style:{overflow:"visible"}},[(0,_._)("div",{class:"linked-path__toolbox",xmlns:"http://www.w3.org/1999/xhtml",onClick:t[3]||(t[3]=(0,y.iM)((()=>{}),["stop"]))},[(0,_._)("button",{class:"linked-path__toolbox-button",is:"ui-button",onMousedown:t[1]||(t[1]=(0,y.iM)((()=>{}),["prevent"])),onClick:t[2]||(t[2]=(0,y.iM)((t=>e.$emit("remove",e.pathId)),["prevent"])),title:"Remove Link","data-type":"danger"},[(0,_.Wm)(i,null,{default:(0,_.w5)((()=>[(0,_.Wm)(a)])),_:1})],32)])],8,un)):(0,_.kq)("",!0)],34)}var cn=(0,_.aZ)({name:"IoPath",props:{pathDArguments:{type:Array,required:!0},pathId:{type:String,required:!0},from:{type:Object,required:!0},to:{type:Object,required:!0}},setup(e){const t=(0,_.Fl)((()=>{const t=e.pathDArguments;return`\nM ${t[0]}, ${t[1]}\nC ${t[2]}, ${t[3]}, ${t[4]}, ${t[5]}, ${t[6]}, ${t[7]}`})),n=(0,b.iH)(null),o=(0,b.iH)(!1),l=(0,_.Fl)((()=>{t.value,o.value;const{x:e,y:l}=n.value?.getPointAtLength(n.value?.getTotalLength()/2)||{x:0,y:0};return[e,l]})),r=e=>{u.debug(e)},a=e=>{u.debug(e)};return{PATH_STROKE_W:ht,focused:o,pathRef:n,pathD:t,p:l,handlePathClick:r,handlePathBlur:a}}});const pn=(0,K.Z)(cn,[["render",dn],["__scopeId","data-v-04667db4"]]);var fn=pn;function vn(e){const{to:t,from:n}=e;let o=!1;const l=e=>{if(t.vm!==e.vm)for(let t=0;t<e.vm.relativePaths.in.length;t++){if(o)break;const n=e.vm.relativePaths.in[t];l(n.from)}else o=!0};return l(n),o}function gn(e){const{to:t,from:n}=e,o=t.vm.relativePaths.in.filter((e=>t.attr===e.to.attr&&t.vm===e.to.vm));return o.length>0}function hn(e){if(e.from.vm===e.to.vm)throw new TypeError("Cannot link to self");if(e.from.el?.dataset.portType===e.to.el?.dataset.portType)throw new TypeError("Cannot create link when the two ports have same direction");if(gn(e))throw new TypeError("Cannot create duplicate link");if(vn(e))throw new TypeError("Cannot create link when loop is detected");u.debug(e.to.vm.relativePaths.in[0]?.from.vm.relativePaths.in[0]?.from.vm.relativePaths.in)}function mn(){const e=(0,b.XI)(null),t=(0,_.FN)().proxy;let n=new ResizeObserver((([t],n)=>{e.value=t.target.getBoundingClientRect(),u.debug(e.value)}));return(0,_.bv)((()=>{n.observe(t.$el),(0,_.Jd)((()=>{n.disconnect()})),n=null})),{elRect:e}}var yn=(0,_.aZ)({name:"SvgCanvas",components:{IoNode:an,IoPath:fn},setup(){const e=(0,b.XI)();(0,_.JJ)("canvasScrollEl",e);const t=mn().elRect;(0,_.JJ)(Ke,t);const n=(0,_.f3)(S),o=(0,_.f3)(k),l=(0,_.f3)(E),r=(0,_.f3)(P),a=(0,_.f3)(I),i=(0,_.f3)(N),s=(0,_.f3)(O),d=e=>{e&&(s.value[e.nodeId]=e)};(0,_.Xn)((()=>{s.value={}}));const c=(0,b.iH)([0,0,0,0,0,0,0,0]),p=(0,_.Fl)((()=>{const e=c.value;return`\nM ${e[0]}, ${e[1]}\nC ${e[2]}, ${e[3]}, ${e[4]}, ${e[5]}, ${e[6]}, ${e[7]}`})),f=(0,b.iH)(null),v=(0,b.iH)(null);(0,_.JJ)("fromPort",f),(0,_.JJ)("toPort",v);const g=({originEl:n,vm:o})=>{const l=n;f.value={vm:o,attr:n.dataset?.feAttr??"",el:n};const r=[l.getBoundingClientRect().x,l.getBoundingClientRect().y];"in"===Qe(l)&&(c.value=[r[0],r[1]+ft,r[0]+gt+ft,r[1]+ft,r[0]-gt+ft,r[1]+ft,r[0],r[1]+ft].map(((n,o)=>o%2===0?n+e.value.scrollLeft-t.value.left:n+e.value.scrollTop-t.value.top))),"out"===Qe(l)&&(c.value=[r[0]+2*ft,r[1]+ft,r[0]+gt+ft,r[1]+ft,r[0]-gt+ft,r[1],r[0],r[1]].map(((n,o)=>o%2===0?n+e.value.scrollLeft-t.value.left:n+e.value.scrollTop-t.value.top)))},h=({ev:n,originEl:o})=>{"in"===Qe(o)&&(c.value=[n.pageX,n.pageY,n.pageX+gt,n.pageY,...c.value.slice(4)].map(((n,o)=>o<=3?o%2===0?n+e.value.scrollLeft-t.value.left:n+e.value.scrollTop-t.value.top:n))),"out"===Qe(o)&&(c.value=[...c.value.slice(0,4),n.pageX-gt,n.pageY,n.pageX,n.pageY].map(((n,o)=>o>=4?o%2===0?n+e.value.scrollLeft-t.value.left:n+e.value.scrollTop-t.value.top:n)))},m=({ev:n,originEl:l})=>{const r=n.target,a=[r.getBoundingClientRect().x,r.getBoundingClientRect().y];let s,d=[];"in"===Qe(l)&&(d=[a[0]+2*ft,a[1]+ft,a[0]+gt+ft,a[1]+ft,...c.value.slice(4)].map(((n,o)=>o<=3?o%2===0?n+e.value.scrollLeft-t.value.left:n+e.value.scrollTop-t.value.top:n)),s={pathDArguments:d,id:L(),to:f.value,from:v.value}),"out"===Qe(l)&&(d=[...c.value.slice(0,4),a[0]-gt+ft,a[1]+ft,a[0],a[1]+ft].map(((n,o)=>o>=4?o%2===0?n+e.value.scrollLeft-t.value.left:n+e.value.scrollTop-t.value.top:n)),s={pathDArguments:d,id:L(),from:f.value,to:v.value});try{hn(s),o(s),"out"===Qe(l)?(i(s,f,v),v.value?.vm?.afterPathConnected?.()):(i(s,v,f),f.value?.vm?.afterPathConnected?.())}catch(p){nn.Z.error(p.message),u.error(p)}f.value=null,v.value=null,c.value.fill(0)},y=()=>{u.debug("canceled"),f.value=null,v.value=null,c.value.fill(0)},w=({vm:e,originEl:t,ev:n})=>{v.value={vm:e,attr:n.target?.dataset?.feAttr??"",el:t}},D=n=>{n.out.forEach((n=>{const o=[n.from.el?.getBoundingClientRect().x??0,n.from.el?.getBoundingClientRect().y??0];n.pathDArguments=[o[0]+2*ft,o[1]+ft,o[0]+gt+ft,o[1]+ft,...n.pathDArguments.slice(4)].map(((n,o)=>o<=3?o%2===0?n+e.value.scrollLeft-t.value.left:n+e.value.scrollTop-t.value.top:n))})),n.in.forEach((n=>{const o=[n.to.el?.getBoundingClientRect().x??0,n.to.el?.getBoundingClientRect().y??0];n.pathDArguments=[...n.pathDArguments.slice(0,4),o[0]-gt+ft,o[1]+ft,o[0],o[1]+ft].map(((n,o)=>o>=4?o%2===0?n+e.value.scrollLeft-t.value.left:n+e.value.scrollTop-t.value.top:n))}))},R=(0,_.f3)(T),x=(0,_.f3)(M),F=(0,b.iH)([0,0]),V=(0,b.OT)({in:[],out:[]}),A=(0,_.f3)(C),U=async n=>{const{nodes:l,nodeForms:r,links:a}=n.stuff;Object.values(l).forEach((e=>{A(e)})),await(0,_.Y3)(),Object.entries(r).forEach((([e,t])=>{Object.keys(t).forEach((n=>{[(0,$.RI)(s.value[e].nodeConfigRef.feAttrValue,n),"feMerge"===l[e].is].includes(!0)&&(s.value[e].nodeConfigRef.feAttrValue[n]=t[n])}))})),await(0,_.Y3)(),Object.values(a).map((n=>{const o=window.structuredClone(n);o.from.vm=s.value[n.from.vmId],o.from.el=o.from.vm.$el.querySelector(`[data-fe-attr="${n.from.attr}"]`);const l=[o.from.el.getBoundingClientRect().x,o.from.el.getBoundingClientRect().y];o.to.vm=s.value[n.to.vmId],o.to.el=o.to.vm.$el.querySelector(`[data-fe-attr="${n.to.attr}"]`);const r=[o.to.el.getBoundingClientRect().x,o.to.el.getBoundingClientRect().y];return o.pathDArguments=[l[0]+2*ft,l[1]+ft,l[0]+gt+ft,l[1]+ft,r[0]-gt+ft,r[1]+ft,r[0],r[1]+ft].map(((n,o)=>o%2===0?n+e.value.scrollLeft-t.value.left:n+e.value.scrollTop-t.value.top)),o})).forEach((e=>{try{hn(e),o(e),i(e,e.from,e.to),v.value=e.to,f.value=e.from,e.to.vm?.afterPathConnected?.()}catch(t){u.error(t)}f.value=null,v.value=null}))};return{canvasScrollEl:e,svgCanvasRect:t,ghostPathD:p,ghostNodeRef:R,ghostNodeType:x,ghostNodePosition:F,nodes:r,setNodeRefMap:d,linkedPaths:n,handlePortStart:g,handlePortMove:h,handlePortConnect:m,handlePortCancel:y,handleDestinationChange:w,handleNodeMove:D,fromPort:f,toPort:v,defaultRelativePath:V,relativePathMapIndexedByNodeId:a,removePath:l,loadCanvasStuffFromSerializedData:U}}});const _n=(0,K.Z)(yn,[["render",he],["__scopeId","data-v-9339612a"]]);var wn=_n;const bn={class:"node-library-panel"},Pn={class:"menu-list"},Cn=["onMousedown"];function Dn(e,t,n,o,l,r){return(0,_.wg)(),(0,_.iD)("div",bn,[((0,_.wg)(!0),(0,_.iD)(_.HY,null,(0,_.Ko)(e.menuGroup,((t,n)=>((0,_.wg)(),(0,_.iD)("div",{key:n},[(0,_._)("h4",null,(0,$.zw)(e.menuGroup.title),1),(0,_._)("ul",Pn,[((0,_.wg)(!0),(0,_.iD)(_.HY,null,(0,_.Ko)(t.children,((t,n)=>((0,_.wg)(),(0,_.iD)("li",{key:n,onMousedown:n=>e.handleIconMousedown(n,t)},(0,$.zw)(t.title),41,Cn)))),128))])])))),128))])}const Sn=[{title:"组1",children:Object.keys(Xe).map((e=>({title:e})))}];var In=(0,_.aZ)({name:"NodeLibraryPanel",setup(e,{emit:t}){const n=(0,_.f3)(B),o=(0,_.Fl)((()=>n.value.svgCanvasRect)),l=(0,_.f3)(T),r=(0,_.f3)(M),a=(0,_.f3)(C),i=function(e,t){Ce(e,{start(e,{originEl:a}){r.value=t.title,(0,_.Y3)((()=>l.value.$emit("update:position",[e.clientX+n.value.$el.scrollLeft-o.value.left,e.clientY+n.value.$el.scrollTop-o.value.top])))},move(e,{originEl:t}){u.debug(l.value),l.value.$emit("update:position",[e.clientX+n.value.$el.scrollLeft-o.value.left,e.clientY+n.value.$el.scrollTop-o.value.top])},up(e,{originEl:l}){const i=n.value?.$el.getBoundingClientRect();e.clientX>i.x&&e.clientX<i.x+i.width&&e.clientY>i.y&&e.clientY<i.y+i.height&&a({is:t.title,id:L(),position:[e.clientX+n.value.$el.scrollLeft-o.value.left,e.clientY+n.value.$el.scrollTop-o.value.top]}),r.value=null}})};return{handleIconMousedown:i,menuGroup:Sn,filterLibraryPanelWidth:dt}}});const En=(0,K.Z)(In,[["render",Dn],["__scopeId","data-v-8b169662"]]);var kn=En;const Nn=e=>((0,_.dD)("data-v-63d263a7"),e=e(),(0,_.Cn)(),e),On={class:"stuff-config-panel"},Rn={class:"stuff-config-panel__title-bar"},xn={class:"stuff-config-panel__main"},Fn={key:0},Vn={key:1},Mn=Nn((()=>(0,_._)("h3",null,"Opus! 🫢",-1))),Tn=Nn((()=>(0,_._)("br",null,null,-1)));function An(e,t,n,o,l,r){const a=(0,_.up)("form-item");return(0,_.wg)(),(0,_.iD)("div",On,[(0,_._)("div",Rn,[e.focusingNode?((0,_.wg)(),(0,_.iD)(_.HY,{key:0},[(0,_.Uk)(" 👀 Editing - "+(0,$.zw)(e.focusingNode?.is),1)],64)):((0,_.wg)(),(0,_.iD)(_.HY,{key:1},[(0,_.Uk)(" 👈 Click a node, then configure it ! ")],64))]),(0,_._)("div",xn,[e.focusingNode?((0,_.wg)(),(0,_.iD)("div",Fn,[e.formFieldConfig&&Object.values(e.formFieldConfig.ports).some((e=>[void 0,!0].includes(e.showInConfigPanel)))?((0,_.wg)(),(0,_.iD)("form",{key:0,onSubmit:t[0]||(t[0]=(0,y.iM)((()=>{}),["prevent"]))},[((0,_.wg)(!0),(0,_.iD)(_.HY,null,(0,_.Ko)(e.formFieldConfig.ports,((e,t)=>((0,_.wg)(),(0,_.j4)(a,{key:t,schema:e,"field-id":t,style:{marginBottom:"16px"}},null,8,["schema","field-id"])))),128))],32)):((0,_.wg)(),(0,_.iD)("div",Vn,[Mn,(0,_.Uk)(" No field can be edit here."),Tn,(0,_.Uk)(" Just look around the canvas, and create links between the available ports. ")]))])):(0,_.kq)("",!0)])])}const Un=e=>((0,_.dD)("data-v-4b07fcca"),e=e(),(0,_.Cn)(),e),jn={key:0},Bn=Un((()=>(0,_._)("br",null,null,-1))),Hn=["value"],Gn=["min","max","step"];var Jn=(0,_.aZ)({__name:"FormItem",props:{schema:{type:Object},fieldId:{type:String}},setup(e){const t=e,n=(0,_.Fl)((()=>t.fieldId)),[o]=(0,_.f3)(U),l=(0,_.Fl)((()=>(0,b.SU)(o)?.nodeConfigRef?.feAttrValue??{})),r=(0,_.Fl)((()=>(0,b.SU)(o)?.nodeConfigRef?.foreignPortValue??{})),a=(0,_.Fl)((()=>(0,$.RI)((0,b.SU)(r),n.value))),i=(e,t)=>e,s=(0,_.Fl)((()=>({disabled:(0,b.SU)(a),value:(0,b.SU)(a)?i(r.value[(0,b.SU)(n)],(0,b.SU)(n)):l.value[(0,b.SU)(n)],onChange:e=>{e.stopPropagation(),l.value[(0,b.SU)(n)]=e.target.value}})));return(t,o)=>!1!==e.schema?.showInConfigPanel?((0,_.wg)(),(0,_.iD)("div",jn,[(0,_._)("label",null,(0,$.zw)((0,b.SU)(n)),1),Bn,"text"!==e.schema?.type&&e.schema?.type?(0,_.kq)("",!0):((0,_.wg)(),(0,_.iD)(_.HY,{key:0},[Array.isArray(e.schema?.enum)?((0,_.wg)(),(0,_.iD)("select",(0,_.dG)({key:0,is:"ui-select"},(0,b.SU)(s)),[((0,_.wg)(!0),(0,_.iD)(_.HY,null,(0,_.Ko)(e.schema.enum,(e=>((0,_.wg)(),(0,_.iD)("option",{key:e&&"object"===typeof e?e.value:e,value:e&&"object"===typeof e?e.value:e},(0,$.zw)(e&&"object"===typeof e?e.label:e),9,Hn)))),128))],16)):((0,_.wg)(),(0,_.iD)("input",(0,_.dG)({key:1,is:"ui-input",type:"text",size:"20"},(0,b.SU)(s)),null,16))],64)),"color"===e.schema?.type?((0,_.wg)(),(0,_.iD)("input",(0,_.dG)({key:1,is:"ui-color",type:"color-opacity"},(0,b.SU)(s)),null,16)):"number"===e.schema?.type?((0,_.wg)(),(0,_.iD)("input",(0,_.dG)({key:2,is:"ui-input",type:"number",size:"20"},(0,b.SU)(s)),null,16)):"range"===e.schema?.type?((0,_.wg)(),(0,_.iD)("input",(0,_.dG)({key:3,is:"ui-range",type:"range",min:e.schema.range[0],max:e.schema.range[1],step:e.schema.step??1},(0,b.SU)(s)),null,16,Gn)):(0,_.kq)("",!0)])):(0,_.kq)("",!0)}});const Ln=(0,K.Z)(Jn,[["__scopeId","data-v-4b07fcca"]]);var Wn=Ln,$n=(0,_.aZ)({name:"StuffConfigPanel",components:{FormItem:Wn},setup(e,{emit:t}){const[n]=(0,_.f3)(U),o=(0,_.Fl)((()=>(0,b.SU)(n)&&(0,b.SU)(n)?.is?Xe[(0,b.SU)(n).is]:null));return{stuffConfigPanelWidth:ct,focusingNode:n,formFieldConfig:o}}});const qn=(0,K.Z)($n,[["render",An],["__scopeId","data-v-63d263a7"]]);var Zn=qn;const Yn=e=>((0,_.dD)("data-v-771f5442"),e=e(),(0,_.Cn)(),e),zn={class:"output-preview-panel__menu-bar"},Xn={class:"output-preview-panel__drag-move-handler"},Kn=Yn((()=>(0,_._)("span",{class:"output-preview-panel__menu-bar-text"},"Preview",-1))),Qn={class:"output-preview-panel__content"},eo=["src"],to={key:1,class:"output-preview-panel__image-placeholder"},no=Yn((()=>(0,_._)("br",null,null,-1))),oo={class:"output-preview-panel__image__drag-is-hovering__tip"},lo=Yn((()=>(0,_._)("div",{class:"output-preview-panel__tools"},null,-1))),ro={class:"output-preview-panel__se-resize-corner"};function ao(e,t,n,o,l,r){const a=(0,_.up)("Rank"),i=(0,_.up)("el-icon"),s=(0,_.up)("filter-def"),u=(0,_.Q2)("move"),d=(0,_.Q2)("resize");return(0,_.wg)(),(0,_.iD)("div",{class:"output-preview-panel",ref:e.outputPreviewPanelRootEl},[(0,_._)("div",zn,[(0,_.wy)(((0,_.wg)(),(0,_.iD)("div",Xn,[(0,_.Wm)(i,{size:24,color:"#fff"},{default:(0,_.w5)((()=>[(0,_.Wm)(a)])),_:1})])),[[u]]),Kn]),(0,_._)("div",Qn,[(0,_.Wm)(s,{"filter-el-id":"previewingFilter"}),(0,_._)("div",{class:"output-preview-panel__image-wrap",onDragstart:t[4]||(t[4]=(0,y.iM)((()=>{}),["stop","prevent"])),onDragover:t[5]||(t[5]=(0,y.iM)((t=>e.dragIsHovering=!0),["stop","prevent"])),onDragleave:t[6]||(t[6]=(0,y.iM)((t=>e.dragIsHovering=!1),["stop","prevent"])),onDrop:t[7]||(t[7]=(0,y.iM)(((...t)=>e.handleDropOnImageWrap&&e.handleDropOnImageWrap(...t)),["stop","prevent"]))},[e.sourceImageSrc?((0,_.wg)(),(0,_.iD)("img",{key:0,class:"output-preview-panel__image",src:e.sourceImageSrc,onError:t[0]||(t[0]=t=>e.sourceImageSrc="")},null,40,eo)):((0,_.wg)(),(0,_.iD)("div",to,[(0,_._)("div",null,[(0,_.Uk)(" Drop your image here, then use it as the source image."),no,(0,_.Uk)(" You can also "),(0,_._)("input",{ref:"fileInputEl",type:"file",style:{display:"block",opacity:0,position:"fixed",visibility:"hidden"},onChange:t[1]||(t[1]=(...t)=>e.handleFileInputChange&&e.handleFileInputChange(...t))},null,544),(0,_._)("button",{is:"ui-button","data-type":"primary",onClick:t[2]||(t[2]=()=>{e.fileInputEl.click()})},"choose a image"),(0,_.Uk)("  or  "),(0,_._)("button",{is:"ui-button","data-type":"primary",onClick:t[3]||(t[3]=(...t)=>e.loadSampleImage&&e.loadSampleImage(...t))},"use sample image"),(0,_.Uk)(". ")])])),(0,_.wy)((0,_._)("div",oo,null,512),[[y.F8,e.dragIsHovering]])],32),lo]),(0,_.wy)((0,_._)("div",ro,null,512),[[d]])],512)}const io={class:"filter-def"},so=["id"];function uo(e,t,n,o,l,r){return(0,_.wg)(),(0,_.iD)("div",io,[((0,_.wg)(),(0,_.iD)("svg",null,[(0,_._)("defs",null,[(0,_._)("filter",{id:e.filterElId},[((0,_.wg)(!0),(0,_.iD)(_.HY,null,(0,_.Ko)(e.renderOfOrderedAllDescendants,((e,t)=>((0,_.wg)(),(0,_.j4)((0,_.LL)(e),{key:t})))),128))],8,so)])]))])}var co=(0,_.aZ)({name:"FeDef",props:{filterElId:{type:String}},setup(){const[e]=(0,_.f3)(U),t=(0,_.Fl)((()=>e.value?.renderOfOrderedAllDescendants??(()=>null)));return{focusingNode:e,renderOfOrderedAllDescendants:t}}});const po=(0,K.Z)(co,[["render",uo],["__scopeId","data-v-3b8b776a"]]);var fo=po,vo=(0,_.aZ)({name:"OutputPreviewPanel",components:{FilterDef:fo},directives:{move:{mounted(e){e.__vDragMainElToBeDragged__=document.querySelector(".output-preview-panel");const t=t=>Ce(t,{start(t){const n=e.getBoundingClientRect();e.__vDragClickedRelativePosition__=[t.pageX-n?.left,t.pageY-n?.top]},move(t){const n=[t.pageX-e.__vDragClickedRelativePosition__[0],t.pageY-e.__vDragClickedRelativePosition__[1]];e.__vDragMainElToBeDragged__.style.left=n[0]+"px",e.__vDragMainElToBeDragged__.style.top=n[1]+"px"},up(){n(),delete e.__vDragClickedRelativePosition__}});function n(){const t=e.__vDragMainElToBeDragged__.getBoundingClientRect();t.x<=0?e.__vDragMainElToBeDragged__.style.left="0px":t.x+t.width>window.innerWidth&&(e.__vDragMainElToBeDragged__.style.left=window.innerWidth-t.width+"px"),t.y<=0?e.__vDragMainElToBeDragged__.style.top="0px":t.y+t.height>window.innerHeight&&(e.__vDragMainElToBeDragged__.style.top=window.innerHeight-t.height+"px")}window.addEventListener("resize",n),e.addEventListener("mousedown",t),e.__vDragDispose__=()=>{delete e.__vDragDispose__,delete e.__vDragMainElToBeDragged__,e.removeEventListener("mousedown",t),window.removeEventListener("resize",n)}},unmounted(e){e.__vDragDispose__()}},resize:{mounted(e){e.__vResizeMainElToBeResized__=document.querySelector(".output-preview-panel");const t=t=>Ce(t,{move(t){const n=e.__vResizeMainElToBeResized__.getBoundingClientRect(),o=[t.pageX-n.x,t.pageY-n.y];n.x+o[0]>=window.innerWidth&&(o[0]-=t.pageX-window.innerWidth),n.y+o[1]>window.innerHeight&&(o[1]-=t.pageY-window.innerHeight),n.width>=window.innerWidth&&(o[0]=window.innerWidth),n.height>=window.innerHeight&&(o[1]=window.innerWidth),e.__vResizeMainElToBeResized__.style.width=o[0]+"px",e.__vResizeMainElToBeResized__.style.height=o[1]+"px"}});e.addEventListener("mousedown",t),e.__vResizeDispose__=()=>{delete e.__vResizeDispose__,delete e.__vResizeMainElToBeResized__,e.removeEventListener("mousedown",t)}},unmounted(e){e.__vResizeDispose__()}}},setup(){const e=(0,b.iH)();(0,_.YP)(e,((e,t)=>{URL.revokeObjectURL(t)})),(0,_.Ah)((()=>{URL.revokeObjectURL((0,b.SU)(e))}));const t=()=>{e.value="./demo/assets/rinkysplash.jpg"},n=(0,b.iH)(),o=(0,b.iH)(!1),l=t=>{o.value=!1;const n=t.dataTransfer?.files[0];n&&(e.value=URL.createObjectURL(n))},r=(0,b.XI)(),a=t=>{const n=t.target.files?.[0];n&&(e.value=URL.createObjectURL(n))};return{sourceImageSrc:e,loadSampleImage:t,outputPreviewPanelRootEl:n,dragIsHovering:o,handleDropOnImageWrap:l,fileInputEl:r,handleFileInputChange:a}}});const go=(0,K.Z)(vo,[["render",ao],["__scopeId","data-v-771f5442"]]);var ho=go;n(541);const mo="Untitled",yo={class:"about-content"},_o=(0,_._)("br",null,null,-1),wo=(0,_._)("a",{target:"_blank",href:"https://github.com/gogoend"},"gogoend",-1),bo=(0,_.uE)('<p> The project is inspired by the following project: </p><ul><li><a target="_blank" href="https://github.com/poletaevvlad/svg-filter-editor">poletaevvlad / svg-filter-editor</a></li><li><a target="_blank" href="https://github.com/yoksel/svg-filters">yoksel / svg-filters</a></li></ul><p> The program includes some source code from the following open source projects: </p><ul><li><a target="_blank" href="https://github.com/vuejs/core">vuejs / core</a></li><li><a target="_blank" href="https://github.com/element-plus/element-plus">dexie / Dexie.js</a></li><li><a target="_blank" href="https://github.com/yued-fe/lulu">yued-fe / lulu</a></li><li><a target="_blank" href="https://github.com/element-plus/element-plus">element-plus / element-plus</a></li></ul><p> The sample image is downloaded from the website of <a target="_blank" href="https://peach.blender.org/media-gallery/"><i>Big Buck Bunny</i></a> - a movie is totally made with open source digital content creators. </p><p> Thanks to my employer, <a target="_blank" href="https://www.aicloud.com/">Beijing SinoVoice Technology Co.,Ltd.</a> (aka. <a target="_blank" href="https://www.aicloud.com/">北京捷通华声科技股份有限公司</a> in Chinese), which gives me a WLB life style to let me do my hobby after work. </p>',6);var Po=(0,_.aZ)({__name:"AboutContent",setup(e){return(e,t)=>((0,_.wg)(),(0,_.iD)("div",yo,[(0,_._)("p",null,[(0,_.Uk)(" SVG Filter Node Builder v"+(0,$.zw)((0,b.SU)(r).version)+" ",1),_o,(0,_.Uk)(" ©️2021-2022 "),wo]),bo]))}});const Co=Po;var Do=Co;function So(){let e=null;new W.Z({title:"About",content:'<div class="about-dialog-dialog" />',width:"480px",buttons:[{value:"Close"}],async onShow(){const t=this.querySelector(".about-dialog-dialog");e=(0,y.ri)(Do),e.mount(t)},onRemove(){e.unmount(),e=null}})}const Io=e=>((0,_.dD)("data-v-3265635a"),e=e(),(0,_.Cn)(),e),Eo={class:"menu-bar"},ko={class:"menu-bar__left"},No={class:"seg-content menu-entry-list"},Oo=["onMouseenter","onMouseleave"],Ro={class:"submenu-list",style:{position:"absolute",top:"100%",left:0}},xo=["onMouseenter","onMouseleave","onClick"],Fo={key:0},Vo={class:"menu-bar__center"},Mo={class:"seg-content"},To=Io((()=>(0,_._)("div",{class:"menu-bar__right"},[(0,_._)("div",{class:"seg-content"},[(0,_._)("a",{target:"_blank",href:"https://github.com/gogoend/svg-filter-graph-builder"},"GitHub")])],-1)));var Ao=(0,_.aZ)({__name:"TopMenuBar",setup(e){const t=(0,b.iH)({}),n=e=>{t.value[e]=!0},o=e=>{delete t.value[e]},l=(0,_.f3)(ne),r=(0,_.f3)(oe),a=(0,_.f3)(ae),i=(0,_.f3)(ie),s=(0,_.Fl)((()=>[{id:"File",label:"File",subMenu:[{id:"Open",label:"Open...",onClick(){i()}},{id:"Save",label:"Save",async onClick(){await l(),nn.Z.success("Saved successfully","success")}},{id:"Save As...",label:"Save As...",async onClick(){await r(),nn.Z.success("Saved successfully","success")}},{id:"Close",label:"Close",onClick(){a()}}]},{id:"Help",label:"Help",subMenu:[{id:"SVG Filter specification on W3C",label:"SVG Filter specification on W3C",onClick(){window.open("https://www.w3.org/TR/filter-effects-1/")}},{id:"SVG Filter documents on MDN",label:"SVG Filter documents on MDN",onClick(){window.open("https://developer.mozilla.org/en-US/docs/Web/SVG/Element/filter")}},{id:"Hr between spec and contact",type:"hr"},{id:"Issue",label:"Issue",onClick(){window.open("https://github.com/gogoend/svg-filter-graph-builder/issues")}},{id:"Contact @gogoend via mail",label:"Contact @gogoend via mail",onClick(){window.open("mailto:gogoend@qq.com")}},{id:"About",label:"About",onClick(){So()}}]}])),u=(0,_.f3)(le),d=(0,_.Fl)((()=>{const e=["SVG Filter Graph Builder"];return u?.value?e.unshift(u.value.project.name):e.unshift(mo),e.join(" - ")}));return(e,l)=>((0,_.wg)(),(0,_.iD)("div",Eo,[(0,_._)("div",ko,[(0,_._)("ul",No,[((0,_.wg)(!0),(0,_.iD)(_.HY,null,(0,_.Ko)((0,b.SU)(s),(e=>((0,_.wg)(),(0,_.iD)("li",{key:e.id,class:(0,$.C_)(["menu-entry-item",{"menu-entry-item__active":t.value[e.id]}]),onMouseenter:t=>n(e.id),onMouseleave:t=>o(e.id)},[(0,_._)("div",null,(0,$.zw)(e.label),1),(0,_.wy)((0,_._)("ul",Ro,[((0,_.wg)(!0),(0,_.iD)(_.HY,null,(0,_.Ko)(e.subMenu,(e=>((0,_.wg)(),(0,_.iD)("li",{key:e.id,class:(0,$.C_)(["submenu-item",{"submenu-item--active":t.value[e.id],"submenu-item__is-hr":"hr"===e.type}]),onMouseenter:t=>n(e.id),onMouseleave:t=>o(e.id),onMousedown:l[0]||(l[0]=(0,y.iM)((()=>{}),["prevent"])),onClick:(0,y.iM)((()=>{e.onClick?.(),t.value={}}),["prevent"])},["hr"===e.type?((0,_.wg)(),(0,_.iD)("div",Fo)):((0,_.wg)(),(0,_.iD)(_.HY,{key:1},[(0,_.Uk)((0,$.zw)(e.label),1)],64))],42,xo)))),128))],512),[[y.F8,t.value[e.id]]])],42,Oo)))),128))])]),(0,_._)("div",Vo,[(0,_._)("div",Mo,(0,$.zw)((0,b.SU)(d)),1)]),To]))}});const Uo=(0,K.Z)(Ao,[["__scopeId","data-v-3265635a"]]);var jo=Uo,Bo=(0,_.aZ)({name:"AppMain",components:{TopMenuBar:jo,SvgCanvas:wn,NodeLibraryPanel:kn,StuffConfigPanel:Zn,OutputPreviewPanel:ho},setup(){const e=(0,_.f3)(H),t=({el:e})=>{const t=e.getBoundingClientRect();e.style.left=window.innerWidth-t.width+"px",e.style.top=window.innerHeight-t.height+"px"};return{setSvgCanvasVm:e,handleOutputPreviewPanelMounted:t,filterLibraryPanelWidth:dt,stuffConfigPanelWidth:ct,topMenuBarHeight:pt}}});const Ho=(0,K.Z)(Bo,[["render",ce],["__scopeId","data-v-66a02df6"]]);var Go=Ho,Jo=(0,_.aZ)({name:"App",components:{AppMain:Go},setup(){ue()}});const Lo=(0,K.Z)(Jo,[["render",w]]);var Wo=Lo,$o=n(2482);class qo{constructor(){(0,$o.Z)(this,"listeners",void 0),this.listeners={}}on(e,t){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(t)}once(e,t){e in this.listeners||(this.listeners[e]=[]);const n=(...o)=>{t.call(this,...o),this.off(e,n)};this.listeners[e].push(n)}off(e,t){if(!(e in this.listeners))return;const n=this.listeners[e];if(t){for(let o=0;o<n.length;o++)if(n[o]===t)return void n.splice(o,1)}else n.length=0}emit(e,t){if(!(e in this.listeners))return;const n=this.listeners[e].concat();for(let o=0;o<n.length;o++)n[o].call(this,t)}getListeners(e){return e?this.listeners[e]:this.listeners}}const Zo=(0,y.ri)(Wo);Zo.config.globalProperties.$eventHub=new qo,Zo.use(m),Zo.mount("#app"),Zo.config.warnHandler=(...e)=>u.warn("[Vue]",e[0],e[2]),Zo.config.errorHandler=(...e)=>u.error("[Vue]",e[0],e[2])}},t={};function n(o){var l=t[o];if(void 0!==l)return l.exports;var r=t[o]={exports:{}};return e[o](r,r.exports,n),r.exports}n.m=e,function(){var e=[];n.O=function(t,o,l,r){if(!o){var a=1/0;for(d=0;d<e.length;d++){o=e[d][0],l=e[d][1],r=e[d][2];for(var i=!0,s=0;s<o.length;s++)(!1&r||a>=r)&&Object.keys(n.O).every((function(e){return n.O[e](o[s])}))?o.splice(s--,1):(i=!1,r<a&&(a=r));if(i){e.splice(d--,1);var u=l();void 0!==u&&(t=u)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[o,l,r]}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var l,r,a=o[0],i=o[1],s=o[2],u=0;if(a.some((function(t){return 0!==e[t]}))){for(l in i)n.o(i,l)&&(n.m[l]=i[l]);if(s)var d=s(n)}for(t&&t(o);u<a.length;u++)r=a[u],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(d)},o=self["webpackChunk_gogoend_svg_filter_graph_builder"]=self["webpackChunk_gogoend_svg_filter_graph_builder"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(3686)}));o=n.O(o)})();
//# sourceMappingURL=app.e776cd38.js.map