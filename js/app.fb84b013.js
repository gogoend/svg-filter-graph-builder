(function(){"use strict";var e={8395:function(e,t,n){var o=n(5205);(0,o.z)("/svg-filter-graph-builder/service-worker.js",{ready(){},registered(){},cached(){},updatefound(){},updated(){},offline(){},error(e){}});n(987);var a=n(9520);const l=async()=>{const e=new a.ZP("gogoend");return e.version(1).stores({products:"id,name"}),e.table("products").where("id").equals(window.__sfgb_runtime_config__.name).toArray().then((t=>{if(0===t.length)return e.table("products").add({id:window.__sfgb_runtime_config__.name,name:window.__sfgb_runtime_config__.name,version:window.__sfgb_runtime_config__.version,buildVersion:window.__sfgb_runtime_config__.buildVersion,buildHash:window.__sfgb_runtime_config__.buildHash})}))};var r=l;const i=[];for(let ka=0;ka<256;ka++)i[ka]=(ka<16?"0":"")+ka.toString(16);function s(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,o=4294967295*Math.random()|0,a=i[255&e]+i[e>>8&255]+i[e>>16&255]+i[e>>24&255]+"-"+i[255&t]+i[t>>8&255]+"-"+i[t>>16&15|64]+i[t>>24&255]+"-"+i[63&n|128]+i[n>>8&255]+"-"+i[n>>16&255]+i[n>>24&255]+i[255&o]+i[o>>8&255]+i[o>>16&255]+i[o>>24&255];return a.toUpperCase()}let u,d,c,p;const f=async()=>{const e=new a.ZP(window.__sfgb_runtime_config__.name);e.version(2).stores({files:"id",userProfiles:"id",logs:"++id",app:"key"}),await e.table("userProfiles").toArray().then((t=>{if(0===t.length)return e.table("userProfiles").add({id:s(),name:"Default User",createdTime:Number(new Date),lastModifiedTime:Number(new Date)})})).then((()=>e.table("app").get("lastUserProfileId"))).then((t=>t?e.table("userProfiles").get(t.value):e.table("userProfiles").toCollection().first())).then((t=>e.table("app").put({key:"lastUserProfileId",value:t.id},["key"]))),u=e.table("files"),d=e.table("userProfiles"),c=e.table("logs"),p=e.table("app")};var g=f;const v=async()=>{await r(),await g()};var m;n(7658);(function(e){e[e["ERROR"]=1]="ERROR",e[e["WARNING"]=2]="WARNING",e[e["LOG"]=3]="LOG",e[e["DEBUG"]=4]="DEBUG"})(m||(m={}));const h=3,_=(...e)=>{const t=[];return e.forEach((e=>{if(["string","number","boolean","undefined","bigint"].includes(typeof e)||null===e)t.push(e);else if("symbol"===typeof e)t.push(`Symbol(${e.description})`);else if("function"===typeof e)t.push(e.toString());else if(e instanceof Error)t.push({message:e.message,stack:e.stack});else{let o={};try{o=JSON.parse(JSON.stringify(e))}catch(n){t.push({message:n.message,stack:n.stack})}t.push(o)}})),t},y={async debug(...e){const t=void 0;return h>=m.DEBUG&&await c.add(_(m[m.DEBUG],Number(new Date),(await p.get("lastUserProfileId"))?.value,...e)),t},async log(...e){const t=void 0;return h>=m.LOG&&await c.add(_(m[m.LOG],Number(new Date),(await p.get("lastUserProfileId"))?.value,...e)),t},async warn(...e){const t=void 0;return h>=m.WARNING&&await c.add(_(m[m.WARNING],Number(new Date),(await p.get("lastUserProfileId"))?.value,...e)),t},async error(...e){const t=void 0;return h>=m.ERROR&&await c.add(_(m[m.ERROR],Number(new Date),(await p.get("lastUserProfileId"))?.value,...e)),t}};var w=y;function b(){window.addEventListener("error",(e=>{w.error(e.error),e.preventDefault()})),window.addEventListener("unhandledrejection",(e=>{w.error(e.reason),e.preventDefault()}))}n(7763);var D=n(3096),E=n(5781),C={install(e){e.component("ElIcon",D.gn);for(const[t,n]of Object.entries(E))e.component(t,n)}},P=n(9963),I=n(6252);function F(e,t,n,o,a,l){const r=(0,I.up)("app-main");return(0,I.wg)(),(0,I.j4)(r)}var S=n(2262);const k=Symbol("Canvas上的所有节点"),B=Symbol("添加节点函数"),A=Symbol("移除节点函数"),x=Symbol("Canvas上的所有连线"),N=Symbol("节点对应所有出、入连线的映射关系"),R=Symbol("删除连线函数"),M=Symbol("添加连线函数"),O=Symbol("向 节点id->出、入连线 的映射中添加连线关系"),U=Symbol("Node组件映射"),V=Symbol("各节点表单内容"),T=Symbol("序列化的连线"),j=Symbol("清空Canvas上的所有内容");function H(){const{$eventHub:e}=(0,I.FN)().appContext.config.globalProperties,t=(0,S.iH)({});(0,I.JJ)(k,t);const n=e=>{t.value[e.id]=e};(0,I.JJ)(B,n);const o=e=>{const t=[...u.value[e]?.in?.map((e=>e.id))??[],...u.value[e]?.out?.map((e=>e.id))??[]];t.forEach((e=>{c(e)})),delete u.value[e]},a=n=>{o(n),delete t.value[n],e.emit("svg-canvas:node-removed",n)};(0,I.JJ)(A,a);const l=(0,S.iH)({});(0,I.JJ)(U,l);const r=(0,I.Fl)((()=>{const e={};return Object.entries(l.value).forEach((([t,n])=>{e[t]=n.nodeConfigRef.feAttrValue})),e}));(0,I.JJ)(V,r);const i=(0,S.iH)({});(0,I.JJ)(T,i);const s=(0,S.iH)([]);(0,I.JJ)(x,s);const u=(0,S.iH)({});(0,I.JJ)(N,u);const d=e=>{s.value.push(e),i.value[e.id]={id:e.id,from:{vmId:e.from.vm.nodeId,attr:e.from.attr},to:{vmId:e.to.vm.nodeId,attr:e.to.attr}}};(0,I.JJ)(M,d);const c=e=>{const t=s.value.findIndex((t=>t.id===e)),[n]=s.value.splice(t,1);delete i.value[e],Object.values(u.value).forEach((t=>{for(let n=0;n<t.in.length;)t.in[n].id!==e?n++:t.in.splice(n,1);for(let n=0;n<t.out.length;)t.out[n].id!==e?n++:t.out.splice(n,1)})),n.to.vm.afterPathRemoved?.(n)};(0,I.JJ)(R,c);const p=(e,t,n)=>{u.value[(0,S.SU)(t).vm.nodeId]||(u.value[(0,S.SU)(t).vm.nodeId]={in:[],out:[]}),u.value[(0,S.SU)(t).vm.nodeId].out.push(e),u.value[(0,S.SU)(n).vm.nodeId]||(u.value[(0,S.SU)(n).vm.nodeId]={in:[],out:[]}),u.value[(0,S.SU)(n).vm.nodeId].in.push(e)};(0,I.JJ)(O,p);const f=()=>{Object.keys(t.value).forEach((e=>{a(e)}))};(0,I.JJ)(j,f)}const G=Symbol("正在拖拽的项目"),$=Symbol("鬼影节点引用");function L(){const e=(0,S.iH)(null);(0,I.JJ)(G,e);const t=(0,S.iH)(null);(0,I.JJ)($,t)}const W=Symbol("被聚焦的节点");function J(){const e=(0,S.iH)(null),t=t=>{e.value=t},{$eventHub:n}=(0,I.FN)().appContext.config.globalProperties;n.on("svg-canvas:node-removed",(n=>{e.value?.nodeId===n&&t(null)})),(0,I.JJ)(W,[e,t])}const q=Symbol("SvgCanvas组件实例"),z=Symbol("设置SvgCanvas组件实例");function Z(){const e=(0,S.XI)();(0,I.JJ)(q,e);const t=t=>{e.value=t};(0,I.JJ)(z,t)}var Y=n(8985),X=n(3577);const K={class:"file-list"},Q=["value"],ee={class:"file-list__footer"},te=["disabled"];var ne=(0,I.aZ)({__name:"FileList",props:{handleConfirm:{type:Function,required:!0},handleCancel:{type:Function,required:!0}},setup(e){const t=(0,S.iH)([]),n=(0,S.iH)(""),o=async()=>await u.toArray();return o().then((e=>{t.value=e})),(o,a)=>((0,I.wg)(),(0,I.iD)("div",K,[(0,I._)("form",{class:"file-list__form",onSubmit:a[1]||(a[1]=(0,P.iM)((()=>{}),["prevent"]))},[(0,I.wy)((0,I._)("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>n.value=e),class:"file-list__select"},[((0,I.wg)(!0),(0,I.iD)(I.HY,null,(0,I.Ko)(t.value,((e,t)=>((0,I.wg)(),(0,I.iD)("option",{key:t,value:e.id},(0,X.zw)(e.project.name),9,Q)))),128))],512),[[P.bM,n.value]])],32),((0,I.wg)(),(0,I.j4)((0,I.LL)("template"),{class:"file-list__footer-template"},{default:(0,I.w5)((()=>[(0,I._)("div",ee,[(0,I._)("button",{is:"ui-button",disabled:!n.value,onClick:a[2]||(a[2]=(0,P.iM)((t=>e.handleConfirm(n.value)),["prevent"]))},"Open",8,te),(0,I._)("button",{is:"ui-button",onClick:a[3]||(a[3]=(0,P.iM)((t=>e.handleCancel()),["prevent"]))},"Cancel")])])),_:1}))]))}}),oe=n(3744);const ae=(0,oe.Z)(ne,[["__scopeId","data-v-7a3fd6c0"]]);var le=ae;function re(){let e,t,n=null;const o=new Promise(((n,o)=>{e=n,t=o}));return new Y.Z({title:"Choose a file",content:'<div class="file-chooser-dialog" />',async onShow(){const o=this.querySelector(".file-chooser-dialog");n=(0,P.ri)(le,{handleConfirm:t=>{e(t),this.hide()},handleCancel:()=>{t(new Error("[File Chooser] 用户没有选择文件")),this.hide()}}),n.mount(o),await(0,I.Y3)();const a=this.querySelector(".ui-dialog-footer"),l=this.querySelector(".file-list__footer-template");while(l.children.length)a.appendChild(l.children[0])},onHide(){n.unmount(),n=null,this.remove()}}),o}const ie={id:"CAF2FD8E-77B0-4A5B-A967-C301614D0DEB",stuff:{nodes:{"040822F7-D416-4325-B428-8BE8433B166C":{is:"feComponentTransfer",id:"040822F7-D416-4325-B428-8BE8433B166C",position:[285.00372314453125,54.0089111328125]},"0D126B0D-841E-4193-95F1-D67412EFAD6E":{is:"SourceGraphic",id:"0D126B0D-841E-4193-95F1-D67412EFAD6E",position:[30.000030517578125,20.00787353515625]},"A432BA04-FCA6-4546-9E01-188D4125BB6B":{is:"feMorphology",id:"A432BA04-FCA6-4546-9E01-188D4125BB6B",position:[525.0057983398438,51.008575439453125]},"6EF3BF7F-03DE-4D91-AB81-8D1B0E8F340D":{is:"feFuncXUsingGamma",id:"6EF3BF7F-03DE-4D91-AB81-8D1B0E8F340D",position:[30,104.00851440429688]},"E4B91ED1-5995-48A1-8574-F352B937FE2E":{is:"feBlend",id:"E4B91ED1-5995-48A1-8574-F352B937FE2E",position:[1026.0023193359375,8.00787353515625]},"547A7FE0-3D96-4932-9683-0D5936C5CEF0":{is:"feColorMatrixUsingMatrix",id:"547A7FE0-3D96-4932-9683-0D5936C5CEF0",position:[763,65]},"509C12B3-D2B1-478D-9335-5697A716D24E":{is:"matrixInFeColorMatrix",id:"509C12B3-D2B1-478D-9335-5697A716D24E",position:[494,197]},"CC8C51D7-5C24-4E44-B25E-FD8A6483A77C":{is:"StringLiteral",id:"CC8C51D7-5C24-4E44-B25E-FD8A6483A77C",position:[753,265]}},nodeForms:{"040822F7-D416-4325-B428-8BE8433B166C":{},"A432BA04-FCA6-4546-9E01-188D4125BB6B":{in:"",operator:"dilate",radius:"5.8"},"6EF3BF7F-03DE-4D91-AB81-8D1B0E8F340D":{},"E4B91ED1-5995-48A1-8574-F352B937FE2E":{in:"",in2:"",mode:"hard-light"},"547A7FE0-3D96-4932-9683-0D5936C5CEF0":{in:"",type:"matrix",values:"1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"},"509C12B3-D2B1-478D-9335-5697A716D24E":["1","0",0,"0",0,"0","1.1","0",0,0,"0","0","1","0",0,0,0,"0","1",0],"CC8C51D7-5C24-4E44-B25E-FD8A6483A77C":{value:"hard-light"}},links:{"8FD762D2-9CBF-4272-A9AA-C2F597E218CB":{id:"8FD762D2-9CBF-4272-A9AA-C2F597E218CB",from:{vmId:"0D126B0D-841E-4193-95F1-D67412EFAD6E",attr:"result"},to:{vmId:"040822F7-D416-4325-B428-8BE8433B166C",attr:"in"}},"6A85F753-933F-43F2-87D2-B9E59159E0DE":{id:"6A85F753-933F-43F2-87D2-B9E59159E0DE",from:{vmId:"040822F7-D416-4325-B428-8BE8433B166C",attr:"result"},to:{vmId:"A432BA04-FCA6-4546-9E01-188D4125BB6B",attr:"in"}},"B634C54D-646D-49F2-BD68-D28001BA1E72":{id:"B634C54D-646D-49F2-BD68-D28001BA1E72",from:{vmId:"6EF3BF7F-03DE-4D91-AB81-8D1B0E8F340D",attr:"result"},to:{vmId:"040822F7-D416-4325-B428-8BE8433B166C",attr:"B"}},"AE0B9E89-5332-4B9E-A87D-70E367E93BC9":{id:"AE0B9E89-5332-4B9E-A87D-70E367E93BC9",from:{vmId:"0D126B0D-841E-4193-95F1-D67412EFAD6E",attr:"result"},to:{vmId:"E4B91ED1-5995-48A1-8574-F352B937FE2E",attr:"in"}},"A71F700A-465C-4358-8D6F-A6E3B4E3DA61":{id:"A71F700A-465C-4358-8D6F-A6E3B4E3DA61",from:{vmId:"509C12B3-D2B1-478D-9335-5697A716D24E",attr:"result"},to:{vmId:"547A7FE0-3D96-4932-9683-0D5936C5CEF0",attr:"values"}},"7EAEA517-FEA0-4B18-87DE-854CBFB9EA8B":{id:"7EAEA517-FEA0-4B18-87DE-854CBFB9EA8B",from:{vmId:"A432BA04-FCA6-4546-9E01-188D4125BB6B",attr:"result"},to:{vmId:"547A7FE0-3D96-4932-9683-0D5936C5CEF0",attr:"in"}},"A7C2B894-0422-411D-BF06-D8C9CEC45BB3":{id:"A7C2B894-0422-411D-BF06-D8C9CEC45BB3",from:{vmId:"547A7FE0-3D96-4932-9683-0D5936C5CEF0",attr:"result"},to:{vmId:"E4B91ED1-5995-48A1-8574-F352B937FE2E",attr:"in2"}},"1F6E3EE6-AFB7-484D-954C-22C01E1C3382":{id:"1F6E3EE6-AFB7-484D-954C-22C01E1C3382",from:{vmId:"CC8C51D7-5C24-4E44-B25E-FD8A6483A77C",attr:"result"},to:{vmId:"E4B91ED1-5995-48A1-8574-F352B937FE2E",attr:"mode"}}}},product:{name:"@gogoend/svg-filter-graph-builder",version:"0.1.1",buildVersion:0},project:{authorIds:["E5D9F285-4610-47AC-8703-6D8D12184B28"],createdTime:1668689298273,lastModifierId:"E5D9F285-4610-47AC-8703-6D8D12184B28",lastModifiedTime:1668689298273,name:"Hello World"}},se=[ie];var ue=se;const de=Symbol("保存项目"),ce=Symbol("另存为项目"),pe=Symbol("已打开的项目"),fe=Symbol("设置已打开的项目"),ge=(Symbol("关闭并新建项目"),Symbol("关闭项目")),ve=Symbol("尝试打开打开文件对话框"),me=Symbol("尝试打开示例项目文件");function he(){const e=(0,I.FN)().proxy,t=e.$.provides[j],n=e.$.provides[q],o=(0,S.XI)();(0,I.JJ)(pe,o);const a=e=>{o.value=e};(0,I.JJ)(fe,a);const l=()=>{t(),a(null)},r=async()=>{await new Promise(((e,t)=>{(new Y.Z).confirm("<h6>ATTENTION</h6><p>Any unsaved changes will be lost. Continue?</p>",{buttons:[{value:"Continue",events(t){e(void 0),t.dialog.remove()}},{value:"Cancel",events(e){t(new Error("[关闭文件提示] 用户取消了操作")),e.dialog.remove()}}]})})),l()};(0,I.JJ)(ge,r);const i=async()=>{await r();const e=await re();if(e===o.value?.id)return;const[t]=await u.where({id:e}).toArray();if(!t)return Promise.reject(new Error("[打开文件弹窗] 未找到此项目，程序可能发生了内部错误"));l(),await(0,I.Y3)(),a(t),n.value.loadCanvasStuffFromSerializedData(t)};(0,I.JJ)(ve,i);const d=async()=>{const t=e.$.provides[k],n=e.$.provides[V],a=e.$.provides[T],l={nodes:t.value,nodeForms:n.value,links:a.value},r={name:window.__sfgb_runtime_config__.name,version:window.__sfgb_runtime_config__.version,buildVersion:window.__sfgb_runtime_config__.buildVersion},i=(await p.get("lastUserProfileId")).value,s={authorIds:[...new Set([...o.value?.project.authorIds??[],i])],createdTime:o.value?.project.createdTime??Number(new Date),lastModifiedTime:Number(new Date),lastModifierId:i,name:o.value?.project.name??""},u={id:o.value?.id,stuff:l,product:r,project:s};return JSON.parse(JSON.stringify(u))},c=async()=>{const e=o.value?.id;if(e){const t=await d();await u.where("id").equals(e).modify(((e,n)=>{n.value=t}))}else await f()};(0,I.JJ)(de,c);const f=async()=>{const e=await d();e.id=s();let t="";while(""===t?.trim())t=window.prompt("Enter the name of the your project");if(null===t)return Promise.reject(new Error("[projectInfoState][另存为] 用户取消保存"));e.project.name=t;const n={id:s(),...e};await u.add(n),a(n)};(0,I.JJ)(ce,f);const g=async e=>{const t=ue.find((t=>t.id===e));await r(),n.value.loadCanvasStuffFromSerializedData(t)};(0,I.JJ)(me,g)}const _e=Symbol("安装PWA"),ye=Symbol("PWA等待安装事件对象");function we(){const e=(0,S.XI)(null);async function t(){if(e.value){e.value.prompt();const t=await e.value.userChoice;w.log("[pwa 安装程序] 安装结果：",t),"accepted"===t.outcome&&(e.value=null)}}window.addEventListener("beforeinstallprompt",(t=>{t.preventDefault(),w.log("[pwa 安装程序] 用户未在本机安装pwa"),e.value=t})),(0,I.JJ)(ye,e),(0,I.JJ)(_e,t)}function be(){[we,H,L,J,Z,he].forEach((e=>e()))}const De={class:"app-wrap"};function Ee(e,t,n,o,a,l){const r=(0,I.up)("ping-ping"),i=(0,I.up)("top-menu-bar"),s=(0,I.up)("svg-canvas"),u=(0,I.up)("svg-canvas-overlay-tip"),d=(0,I.up)("node-library-panel"),c=(0,I.up)("stuff-config-panel"),p=(0,I.up)("output-preview-panel");return(0,I.wg)(),(0,I.iD)("div",De,[(0,I.Wm)(r),(0,I.Wm)(i,{class:"top-menu-bar",style:(0,X.j5)({height:`${e.topMenuBarHeight}px`})},null,8,["style"]),(0,I._)("div",{class:"workbench-wrap",style:(0,X.j5)({top:`${e.topMenuBarHeight}px`})},[(0,I.Wm)(s,{class:"svg-canvas",style:(0,X.j5)({left:e.filterLibraryPanelWidth+"px",width:`calc(100% - ${e.stuffConfigPanelWidth}px - ${e.filterLibraryPanelWidth}px)`}),onVnodeMounted:t[0]||(t[0]=t=>{e.setSvgCanvasVm(t.component.proxy)})},null,8,["style"]),(0,I.Wm)(u,{class:"svg-canvas__overlay-tip",style:(0,X.j5)({left:e.filterLibraryPanelWidth+"px",width:`calc(100% - ${e.stuffConfigPanelWidth}px - ${e.filterLibraryPanelWidth}px)`})},null,8,["style"]),(0,I.Wm)(d,{class:"node-library-panel",style:(0,X.j5)({left:0,right:`calc(100% - ${e.filterLibraryPanelWidth}px)`})},null,8,["style"]),(0,I.Wm)(c,{class:"stuff-config-panel",style:(0,X.j5)({right:0,left:`calc(100% - ${e.stuffConfigPanelWidth}px)`})},null,8,["style"]),(0,I.Wm)(p,{class:"output-preview-panel",style:{width:"640px",height:"384px"},onVnodeMounted:e.handleOutputPreviewPanelMounted},null,8,["onVnodeMounted"])],4)])}const Ce={ref:"canvasScrollEl"},Pe={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 4000 4000","xml:space":"preserve",class:"svg-canvas-board"},Ie={class:"ghost"},Fe=["d"];function Se(e,t,n,o,a,l){const r=(0,I.up)("io-node"),i=(0,I.up)("io-path");return(0,I.wg)(),(0,I.iD)("div",Ce,[((0,I.wg)(),(0,I.iD)("svg",Pe,[((0,I.wg)(!0),(0,I.iD)(I.HY,null,(0,I.Ko)(e.nodes,(t=>((0,I.wg)(),(0,I.j4)(r,{ref_for:!0,ref:e.setNodeRefMap,key:t.id,is:t.is,"node-id":t.id,onPortStart:e.handlePortStart,onPortMove:e.handlePortMove,onPortConnect:e.handlePortConnect,onPortCancel:e.handlePortCancel,onDestinationChange:e.handleDestinationChange,"relative-paths":e.relativePathMapIndexedByNodeId[t.id]??e.defaultRelativePath,onNodeMove:e.handleNodeMove,position:t.position,"onUpdate:position":e=>t.position=e},null,8,["is","node-id","onPortStart","onPortMove","onPortConnect","onPortCancel","onDestinationChange","relative-paths","onNodeMove","position","onUpdate:position"])))),128)),((0,I.wg)(!0),(0,I.iD)(I.HY,null,(0,I.Ko)(e.linkedPaths,(e=>((0,I.wg)(),(0,I.j4)(i,{key:e.id,"path-id":e.id,"path-d-arguments":e.pathDArguments,from:e.from,to:e.to},null,8,["path-id","path-d-arguments","from","to"])))),128)),(0,I._)("g",Ie,[(0,I._)("path",{class:"ghost-path",d:e.ghostPathD},null,8,Fe),e.ghostNodeType?((0,I.wg)(),(0,I.j4)(r,{key:0,ref:"ghostNodeRef",style:{opacity:"0.5"},is:e.ghostNodeType,nodeId:"0",position:e.ghostNodePosition,"onUpdate:position":t[0]||(t[0]=t=>e.ghostNodePosition=t),relativePaths:e.defaultRelativePath},null,8,["is","position","relativePaths"])):(0,I.kq)("",!0)])]))],512)}n(2801),n(1295);const ke=["transform"],Be={class:"io-node__inner"},Ae={class:"io-node__head"},xe={transform:"matrix(1 0 0 1 0 8)",class:"fill-fff module-name"};function Ne(e,t,n,o,a,l){const r=(0,I.up)("Delete"),i=(0,I.up)("el-icon"),s=(0,I.Q2)("pingping");return(0,I.wg)(),(0,I.iD)("g",{class:(0,X.C_)(["io-node",{"io-node--focused":e.isFocused}]),onMousedown:t[6]||(t[6]=(0,P.iM)(((...t)=>e.handleNodeMousedown&&e.handleNodeMousedown(...t)),["stop"])),transform:`translate(${e.position[0]}, ${e.position[1]})`,ref:"ioNodeEl"},[((0,I.wg)(),(0,I.iD)("foreignObject",Be,[(0,I._)("div",{class:"io-node__body",xmlns:"http://www.w3.org/1999/xhtml",onClick:t[5]||(t[5]=(0,P.iM)(((...t)=>e.handleNodeBodyClick&&e.handleNodeBodyClick(...t)),["exact","stop"]))},[(0,I.kq)("",!0),(0,I._)("div",Ae,[(0,I._)("em",{class:"port out","data-port-type":"out",style:(0,X.j5)({width:2*e.POINT_R+"px",height:2*e.POINT_R+"px",borderWidth:`${e.POINT_BORDER_W}px`}),"data-fe-attr":"result",ref:e.setFeAttrEls,onMouseenter:t[0]||(t[0]=(...t)=>e.handlePortMouseenter&&e.handlePortMouseenter(...t))},null,36),(0,I._)("span",xe,(0,X.zw)(e.is),1)]),((0,I.wg)(),(0,I.j4)((0,I.LL)(e.InternalNodeImplement),(0,I.dG)({ref:"nodeConfigRef"},{is:e.is,nodeId:e.nodeId,relativePaths:e.relativePaths}),null,16)),(0,I._)("div",{class:"io-node__toolbox",onClick:t[4]||(t[4]=(0,P.iM)((()=>{}),["stop"]))},[(0,I.wy)(((0,I.wg)(),(0,I.iD)("button",{class:"io-node__toolbox-button lu-ui__extend-small",is:"ui-button",onClick:t[1]||(t[1]=t=>e.copySvgFilterCode(e.nodeId)),title:"Copy SVG Filter Code"},[(0,I.Uk)(" <SVG> ")])),[[s,{remark:`[io-node] ${e.is} 按下了复制SVG滤镜代码按钮`}]]),(0,I.wy)(((0,I.wg)(),(0,I.iD)("button",{class:"io-node__toolbox-button lu-ui__extend-small",is:"ui-button",onClick:t[2]||(t[2]=t=>e.copyCssRule(e.nodeId)),title:"Copy CSS Rule"},[(0,I.Uk)(" CSS Rule ")])),[[s,{remark:`[io-node] ${e.is} 按下了复制CSS规则按钮`}]]),(0,I.wy)(((0,I.wg)(),(0,I.iD)("button",{class:"io-node__toolbox-button lu-ui__extend-small",is:"ui-button",onClick:t[3]||(t[3]=t=>e.removeNode(e.nodeId)),title:"Remove Node","data-type":"danger"},[(0,I.Wm)(i,null,{default:(0,I.w5)((()=>[(0,I.Wm)(r)])),_:1})])),[[s,{remark:`[io-node] ${e.is} 按下了删除按钮`}]])])])]))],42,ke)}const Re=function(e,t){const n=t?.start||(()=>{}),o=t?.move||(()=>{}),a=t?.up||(()=>{}),l=e.target;n(e,{originEl:l});const r=e=>{switch(e.type){case"mousemove":o(e,{originEl:l});break;case"mouseup":document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",r),a(e,{originEl:l});break}};document.addEventListener("mousemove",r),document.addEventListener("mouseup",r)};var Me=Re;const Oe={type:"source",ports:{}},Ue={type:"source",ports:{}},Ve={type:"normal",ports:{in:{showInConfigPanel:!1},kernelMatrix:{defaultValue:"0 1 0, 1 1 1, 0 1 0"},order:{defaultValue:"3, 3"},divisor:{type:"range",range:[.01,100],step:.01,defaultValue:1},bias:{type:"range",range:[-1,1],step:.01,defaultValue:0},targetX:{type:"range",range:[0,10],step:1,defaultValue:0},targetY:{type:"range",range:[0,10],step:1,defaultValue:0},edgeMode:{type:"text",defaultValue:"duplicate",enum:["duplicate","wrap","none"]},kernelUnitLength:{type:"range",range:[1,100],step:1,defaultValue:2},preserveAlpha:{type:"text",defaultValue:"true",enum:["true","false"]}}},Te={type:"normal",ports:{type:{type:"text",defaultValue:"fractalNoise",enum:[{label:"fractalNoise",value:"fractalNoise"},{label:"turbulence",value:"turbulence"}]},baseFrequency:{type:"range",defaultValue:.05,range:[0,1],step:.01},numOctaves:{type:"range",defaultValue:1,step:1,range:[0,20]},stitchTiles:{defaultValue:"stitch",enum:["stitch","noStitch"]},seed:{type:"range",defaultValue:0,step:.01,range:[-1e4,1e4]}}},je={type:"normal",ports:{in:{showInConfigPanel:!1},dx:{type:"range",defaultValue:0,step:.01,range:[-1e3,1e3]},dy:{type:"range",defaultValue:0,step:.01,range:[-1e3,1e3]},stdDeviation:{type:"range",defaultValue:0,step:.01,range:[0,100]},"flood-color":{type:"color"},"flood-opacity":{type:"range",defaultValue:1,step:.01,range:[0,1]}}},He={type:"merge",ports:{in:{showInConfigPanel:!1}}},Ge={type:"normal",ports:{in:{showInConfigPanel:!1},dx:{type:"range",defaultValue:0,step:.01,range:[-1e3,1e3]},dy:{type:"range",defaultValue:0,step:.01,range:[-1e3,1e3]}}},$e={type:"normal",tag:"feColorMatrix",ports:{in:{showInConfigPanel:!1},type:{showInConfigPanel:!1,showOnNode:!1,defaultValue:"matrix"},values:{defaultValue:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0].join(" ")}}},Le={type:"matrix-in-fe-color-matrix",ports:{}},We={tag:"feColorMatrix",type:"normal",ports:{in:{showInConfigPanel:!1},type:{showInConfigPanel:!1,showOnNode:!1,defaultValue:"saturate"},values:{type:"range",defaultValue:1,step:.01,range:[-10,10]}}},Je={tag:"feColorMatrix",type:"normal",ports:{in:{showInConfigPanel:!1},type:{showInConfigPanel:!1,showOnNode:!1,defaultValue:"hueRotate"},values:{type:"range",defaultValue:0,step:.01,range:[0,360]}}},qe={tag:"feColorMatrix",type:"normal",ports:{in:{showInConfigPanel:!1},type:{showInConfigPanel:!1,showOnNode:!1,defaultValue:"luminanceToAlpha"},values:{}}},ze={type:"normal",ports:{in:{showInConfigPanel:!1}}},Ze={type:"normal",ports:{in:{showInConfigPanel:!1},in2:{showInConfigPanel:!1},scale:{type:"range",defaultValue:0,step:.01,range:[-100,100]},xChannelSelector:{defaultValue:"A",enum:["R","G","B","A"]},yChannelSelector:{defaultValue:"A",enum:["R","G","B","A"]}}},Ye={type:"normal",ports:{href:{}}},Xe={type:"normal",ports:{in:{showInConfigPanel:!1},in2:{showInConfigPanel:!1},mode:{defaultValue:"normal",enum:["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}}},Ke={type:"normal",tag:"feComposite",ports:{in:{showInConfigPanel:!1},in2:{showInConfigPanel:!1},operator:{enum:["over","in","out","atop","xor","lighter"]}}},Qe={type:"normal",tag:"feComposite",ports:{in:{showInConfigPanel:!1},in2:{showInConfigPanel:!1},operator:{showInConfigPanel:!1,showOnNode:!1,defaultValue:"arithmetic"},k1:{type:"range",range:[-5,5],defaultValue:.5},k2:{type:"range",range:[-5,5],defaultValue:.5},k3:{type:"range",range:[-5,5],defaultValue:.5},k4:{type:"range",range:[-5,5],defaultValue:.5}}},et={type:"normal",ports:{"flood-color":{type:"color"},"flood-opacity":{type:"range",defaultValue:1,step:.01,range:[0,1]}}},tt={type:"normal",ports:{in:{showInConfigPanel:!1},stdDeviation:{type:"range",defaultValue:0,step:.01,range:[0,100]},edgeMode:{type:"text",enum:["duplicate","wrap","none"],defaultValue:"none"}}},nt={type:"normal",ports:{in:{showInConfigPanel:!1},operator:{enum:["erode","dilate"],defaultValue:"erode"},radius:{type:"range",defaultValue:0,step:.01,range:[0,50]}}},ot={type:"component-transfer-root",ports:{in:{showInConfigPanel:!1},R:{showInConfigPanel:!1},G:{showInConfigPanel:!1},B:{showInConfigPanel:!1},A:{showInConfigPanel:!1}}},at={type:"component-transfer-child",ports:{type:{defaultValue:"identity",showInConfigPanel:!1,showOnNode:!1}}},lt={type:"component-transfer-child",ports:{type:{defaultValue:"table",showInConfigPanel:!1,showOnNode:!1},tableValues:{defaultValue:"1 1 1 1"}}},rt={type:"component-transfer-child",ports:{type:{defaultValue:"linear",enum:["linear","discrete"]},slope:{type:"number",defaultValue:1},intercept:{type:"number",defaultValue:0}}},it={type:"component-transfer-child",ports:{type:{defaultValue:"gamma",showInConfigPanel:!1,showOnNode:!1},amplitude:{type:"number",defaultValue:1},exponent:{type:"number",defaultValue:0},offset:{type:"number",defaultValue:0}}},st={type:"string-literal",ports:{value:{type:"text"}}};var ut={SourceGraphic:Oe,SourceAlpha:Ue,feConvolveMatrix:Ve,feTurbulence:Te,feDropShadow:je,feMerge:He,feOffset:Ge,feColorMatrixUsingMatrix:$e,matrixInFeColorMatrix:Le,feColorMatrixUsingSaturate:We,feColorMatrixUsingHueRotate:Je,feColorMatrixUsingLuminanceToAlpha:qe,feTile:ze,feDisplacementMap:Ze,feImage:Ye,feBlend:Xe,feCompositeWithoutK:Ke,feCompositeWithK:Qe,feFlood:et,feGaussianBlur:tt,feMorphology:nt,feComponentTransfer:ot,feFuncXUsingIdentity:at,feFuncXUsingTable:lt,feFuncXUsingLinearOrDiscrete:rt,feFuncXUsingGamma:it,StringLiteral:st};const dt=Symbol("SvgCanvas组件的范围");function ct(e){return e.dataset.portType}function pt(e){return["in","out"].includes(e.dataset.portType)}function ft(e){const{props:t,type:n}=e;let o=e.children;const a=document.createElementNS("http://www.w3.org/2000/svg",n);return t&&Object.keys(t).forEach((e=>{["number","string"].includes(typeof t?.[e])&&String(t?.[e]).length&&a.setAttribute(e,t?.[e])})),"object"===typeof o&&null!==o?Array.isArray(o)||(o=[o]):o=[],(o||[]).forEach((e=>{a.append(ft(e))})),a}const gt=e=>{const t=new Map,n=new Map;e.forEach((e=>{const[o,a]=[e.from.vm,e.to.vm];t.has(o)||(t.set(o,0),n.set(o,[])),t.has(a)||(t.set(a,0),n.set(a,[])),t.set(a,t.get(a)+1),n.get(o).push(a)}));const o=[],a=[];for(const l of t)0===l[1]&&o.push(l[0]);while(o.length){const e=o.shift();a.push(e);const l=n.get(e);l.forEach((e=>{t.set(e,t.get(e)-1),0===t.get(e)&&o.push(e)}))}return a},vt=(...e)=>{},mt={key:0,class:"io-node__li"},ht=["data-fe-attr"],_t={class:"io-node__port-text"},yt={class:"port-name"};function wt(e,t,n,o,a,l){return(0,I.wg)(!0),(0,I.iD)(I.HY,null,(0,I.Ko)(e.fe[e.is].ports,((n,o)=>((0,I.wg)(),(0,I.iD)(I.HY,{key:o},[!1!==n.showOnNode?((0,I.wg)(),(0,I.iD)("div",mt,[(0,I._)("em",{class:"port in",style:(0,X.j5)({width:2*e.POINT_R+"px",height:2*e.POINT_R+"px",borderWidth:`${e.POINT_BORDER_W}px`}),"data-port-type":"in",r:"10","data-fe-attr":o,ref_for:!0,ref:e.setFeAttrEls,onMouseenter:t[0]||(t[0]=(...t)=>e.handlePortMouseenter&&e.handlePortMouseenter(...t))},null,44,ht),(0,I._)("label",_t,[(0,I._)("span",yt,(0,X.zw)(o),1)])])):(0,I.kq)("",!0)],64)))),128)}var bt=()=>{const e=(0,I.f3)("fromPort"),t=(0,I.f3)("toPort"),n=(0,S.iH)(),o=(0,S.iH)([]),a=e=>{e&&o.value.push(e)};(0,I.Xn)((()=>{o.value=[]}));const l=(0,I.f3)("allDescendants"),r=(0,I.f3)("orderedAllDescendants"),i=(0,I.f3)("handlePortMouseenter"),s=(0,I.Fl)((()=>{const e="data:image/svg+xml,",t=(0,I.h)("filter",{id:"filter"},(r?.value??[]).map(((e,t)=>e.getVNodeFragment(e,t)))),n=`\n<svg xmlns="http://www.w3.org/2000/svg" id="SVGFilter" width="40" height="40" viewBox="0 0 256 256">\n<defs>${ft(t).outerHTML}</defs>\n<g filter="url(#filter)">\n  <linearGradient id="SVGID_1_" gradientUnits="userSpaceOnUse" x1="0" y1="64" x2="64" y2="64">\n    <stop offset="0" style="stop-color:#EE7E77" /><stop offset="0.5" style="stop-color:#E7334C" /><stop offset="1" style="stop-color:#DA0439" />\n  </linearGradient>\n  <rect style="fill:url(#SVGID_1_);" width="64" height="128" />\n  <linearGradient id="SVGID_2_" gradientUnits="userSpaceOnUse" x1="64" y1="64" x2="128" y2="64">\n    <stop offset="0" style="stop-color:#F29847" /><stop offset="0.5" style="stop-color:#EE7300" /><stop offset="1" style="stop-color:#D45E12" />\n  </linearGradient>\n  <rect x="64" style="fill:url(#SVGID_2_);" width="64" height="128" />\n  <linearGradient id="SVGID_3_" gradientUnits="userSpaceOnUse" x1="128" y1="64" x2="192" y2="64">\n    <stop offset="0" style="stop-color:#FFF9AC" /><stop offset="0.5" style="stop-color:#FFF000" /><stop offset="1" style="stop-color:#FFDC00" />\n  </linearGradient>\n  <rect x="128" style="fill:url(#SVGID_3_);" width="64" height="128" />\n  <linearGradient id="SVGID_4_" gradientUnits="userSpaceOnUse" x1="192" y1="64" x2="256" y2="64">\n    <stop offset="0" style="stop-color:#66BC81" /><stop offset="0.5" style="stop-color:#009944" /><stop offset="1" style="stop-color:#008A43" />\n  </linearGradient>\n  <rect x="192" style="fill:url(#SVGID_4_);" width="64" height="128" />\n  <linearGradient id="SVGID_5_" gradientUnits="userSpaceOnUse" x1="0" y1="192" x2="64" y2="192">\n    <stop offset="0" style="stop-color:#3EAFCD" /><stop offset="0.5" style="stop-color:#0091B8" /><stop offset="1" style="stop-color:#00767F" />\n  </linearGradient>\n  <rect y="128" style="fill:url(#SVGID_5_);" width="64" height="128" />\n  <linearGradient id="SVGID_6_" gradientUnits="userSpaceOnUse" x1="64" y1="192" x2="128" y2="192">\n    <stop offset="0" style="stop-color:#584C9D" /><stop offset="0.5" style="stop-color:#1D2088" /><stop offset="1" style="stop-color:#39396C" />\n  </linearGradient>\n  <rect x="64" y="128" style="fill:url(#SVGID_6_);" width="64" height="128" />\n  <linearGradient id="SVGID_7_" gradientUnits="userSpaceOnUse" x1="128" y1="192" x2="192" y2="192">\n    <stop offset="0" style="stop-color:#B87FB5" /><stop offset="0.5" style="stop-color:#8E2E8C" /><stop offset="1" style="stop-color:#731485" />\n  </linearGradient>\n  <rect x="128" y="128" style="fill:url(#SVGID_7_);" width="64" height="128" />\n  <linearGradient id="SVGID_8_" gradientUnits="userSpaceOnUse" x1="192" y1="192" x2="256" y2="192">\n    <stop offset="0" style="stop-color:#EB70A6" /><stop offset="0.5" style="stop-color:#E4007F" /><stop offset="1" style="stop-color:#CE0080" />\n  </linearGradient>\n  <rect x="192" y="128" style="fill:url(#SVGID_8_);" width="64" height="128" />\n</g>\n</svg>\n`;return e+encodeURIComponent(n)}));return{fromPort:e,toPort:t,ioNodeEl:n,feAttrEls:o,setFeAttrEls:a,allDescendants:l,handlePortMouseenter:i,filterThumbUrl:s}};const Dt=150,Et=300,Ct=32,Pt=10,It=4,Ft=150,St=4;var kt=(0,I.aZ)({name:"NormalNode",props:{is:{type:String,required:!0},nodeId:{type:String,required:!0},relativePaths:{type:Object,required:!0}},setup(e){const{fromPort:t,toPort:n,ioNodeEl:o,setFeAttrEls:a,allDescendants:l,handlePortMouseenter:r,filterThumbUrl:i}=bt(),s=(0,S.iH)({}),u=(0,I.Fl)((()=>{const t={};return e.relativePaths.in.forEach((e=>{t[e.to.attr]=e.from.vm.mergedFeAttrValue[e.from.attr]})),t})),d=(0,I.Fl)((()=>({...s.value,...u.value,result:e.nodeId}))),c=(e,t)=>{const n=e.is,{mergedFeAttrValue:o}=e,a={};Object.keys(o||{}).forEach((e=>{void 0!==o[e]&&(a[e]=o[e]||""),a.in===a.result&&delete a.in,Object.prototype.hasOwnProperty.call(ut[n].ports,"in")&&!a.in&&(a.in="SourceGraphic"),Object.prototype.hasOwnProperty.call(ut[n].ports,"in2")&&!a.in2&&(a.in2="SourceGraphic")}));const l=ut[n].tag??n;return(0,I.h)(l,a)};if(w.debug(ut[e.is]),["normal",void 0].includes(ut[e.is].type)){const{ports:t}=ut[e.is];Object.keys(t).forEach((e=>{["number","range"].includes(t[e].type)?s.value[e]=t[e].defaultValue??0:s.value[e]=t[e].defaultValue??""}))}return{POINT_R:Pt,POINT_BORDER_W:It,fromPort:t,ioNodeEl:o,setFeAttrEls:a,feAttrValue:s,foreignPortValue:u,mergedFeAttrValue:d,afterPathConnected:vt,afterPathRemoved:vt,handlePortMouseenter:r,fe:ut,allDescendants:l,filterThumbUrl:i,getVNodeFragment:c}}});const Bt=(0,oe.Z)(kt,[["render",wt],["__scopeId","data-v-e7beee26"]]);var At=Bt;const xt=e=>((0,I.dD)("data-v-b64b5bd0"),e=e(),(0,I.Cn)(),e),Nt=["data-fe-attr"],Rt=xt((()=>(0,I._)("label",{class:"io-node__port-text"},[(0,I._)("span",{class:"port-name"},"in")],-1)));function Mt(e,t,n,o,a,l){return(0,I.wg)(!0),(0,I.iD)(I.HY,null,(0,I.Ko)(e.feAttrValue,((n,o)=>((0,I.wg)(),(0,I.iD)("div",{class:"io-node__li",key:o},[(0,I._)("em",{class:"port in",style:(0,X.j5)({width:2*e.POINT_R+"px",height:2*e.POINT_R+"px",borderWidth:`${e.POINT_BORDER_W}px`}),"data-port-type":"in",r:"10","data-fe-attr":o,ref_for:!0,ref:e.setFeAttrEls,onMouseenter:t[0]||(t[0]=(...t)=>e.handlePortMouseenter&&e.handlePortMouseenter(...t))},null,44,Nt),Rt])))),128)}var Ot=(0,I.aZ)({name:"MergeNode",props:{is:{type:String,required:!0},nodeId:{type:String,required:!0},relativePaths:{type:Object,required:!0}},setup(e){const{toPort:t,fromPort:n,ioNodeEl:o,setFeAttrEls:a,allDescendants:l,handlePortMouseenter:r,filterThumbUrl:i}=bt(),s=(0,S.iH)([""]),u=(0,I.Fl)((()=>({result:e.nodeId}))),d=(0,I.FN)().parent?.proxy,c=()=>{w.debug(t?.value,n?.value);const{attr:e}=[t?.value,n?.value].find((e=>e?.vm===d)),o=Number(e);s.value[o]=n.value.vm.nodeId,s.value[o+1]||(s.value[o+1]="")},p=e=>{const{attr:t}=e.to;s.value[Number(t)]=""},f=()=>{const{is:t,nodeId:n}=e;return(0,I.h)(t,{result:n},(0,S.SU)(s).filter((e=>!!e)).map((e=>(0,I.h)("feMergeNode",{in:e}))))};return{POINT_R:Pt,POINT_BORDER_W:It,fromPort:n,ioNodeEl:o,setFeAttrEls:a,feAttrValue:s,mergedFeAttrValue:u,afterPathConnected:c,afterPathRemoved:p,handlePortMouseenter:r,allDescendants:l,filterThumbUrl:i,getVNodeFragment:f}}});const Ut=(0,oe.Z)(Ot,[["render",Mt],["__scopeId","data-v-b64b5bd0"]]);var Vt=Ut;function Tt(e,t,n,o,a,l){return(0,I.wg)(),(0,I.iD)("div")}var jt=(0,I.aZ)({name:"SourceNode",props:{is:{type:String,required:!0},nodeId:{type:String,required:!0},relativePaths:{type:Object,required:!0}},setup(e){const{fromPort:t,ioNodeEl:n,setFeAttrEls:o,handlePortMouseenter:a,filterThumbUrl:l}=bt(),r=(0,S.OT)({result:e.is}),i=()=>(0,I.h)("feOffset",{in:e.is,result:e.nodeId});return{POINT_R:Pt,POINT_BORDER_W:It,fromPort:t,ioNodeEl:n,setFeAttrEls:o,mergedFeAttrValue:r,handlePortMouseenter:a,filterThumbUrl:l,getVNodeFragment:i}}});const Ht=(0,oe.Z)(jt,[["render",Tt],["__scopeId","data-v-28f48382"]]);var Gt=Ht;function $t(e,t,n,o,a,l){return(0,I.wy)(((0,I.wg)(),(0,I.iD)("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>e.feAttrValue.value=t)},null,512)),[[P.nr,e.feAttrValue.value,void 0,{lazy:!0}]])}var Lt=(0,I.aZ)({name:"SourceNode",props:{is:{type:String,required:!0},nodeId:{type:String,required:!0},relativePaths:{type:Object,required:!0}},setup(e){const{fromPort:t,ioNodeEl:n,setFeAttrEls:o,handlePortMouseenter:a,filterThumbUrl:l}=bt(),r=(0,S.iH)({value:""}),i=(0,I.Fl)((()=>({result:(0,S.SU)(r).value}))),s=()=>null;return{POINT_R:Pt,POINT_BORDER_W:It,fromPort:t,ioNodeEl:n,setFeAttrEls:o,mergedFeAttrValue:i,handlePortMouseenter:a,filterThumbUrl:l,getVNodeFragment:s,feAttrValue:r}}});const Wt=(0,oe.Z)(Lt,[["render",$t],["__scopeId","data-v-68f4c358"]]);var Jt=Wt;const qt=["onUpdate:modelValue"];function zt(e,t,n,o,a,l){return(0,I.wg)(),(0,I.iD)("div",null,[((0,I.wg)(!0),(0,I.iD)(I.HY,null,(0,I.Ko)(e.feAttrValue,((t,n)=>(0,I.wy)(((0,I.wg)(),(0,I.iD)("input",{key:n,"onUpdate:modelValue":t=>e.feAttrValue[n]=t,class:"input"},null,8,qt)),[[P.nr,e.feAttrValue[n]]]))),128))])}var Zt=(0,I.aZ)({name:"SourceNode",props:{is:{type:String,required:!0},nodeId:{type:String,required:!0},relativePaths:{type:Object,required:!0}},setup(e){const{fromPort:t,ioNodeEl:n,setFeAttrEls:o,handlePortMouseenter:a,filterThumbUrl:l}=bt(),r=(0,S.iH)((()=>{const e=new Array(20);return e.fill(0),e[0]=e[6]=e[12]=e[18]=1,e})()),i=(0,I.Fl)((()=>({result:r.value.join(" ")}))),s=()=>null;return{POINT_R:Pt,POINT_BORDER_W:It,fromPort:t,ioNodeEl:n,setFeAttrEls:o,feAttrValue:r,mergedFeAttrValue:i,handlePortMouseenter:a,filterThumbUrl:l,getVNodeFragment:s}}});const Yt=(0,oe.Z)(Zt,[["render",zt],["__scopeId","data-v-f802b5d6"]]);var Xt=Yt;const Kt={key:0,class:"io-node__li"},Qt=["data-fe-attr"],en={class:"io-node__port-text"},tn={class:"port-name"};function nn(e,t,n,o,a,l){return(0,I.wg)(!0),(0,I.iD)(I.HY,null,(0,I.Ko)(e.fe[e.is].ports,((n,o)=>((0,I.wg)(),(0,I.iD)(I.HY,{key:o},[!1!==n.showOnNode?((0,I.wg)(),(0,I.iD)("div",Kt,[(0,I._)("em",{class:"port in",style:(0,X.j5)({width:2*e.POINT_R+"px",height:2*e.POINT_R+"px",borderWidth:`${e.POINT_BORDER_W}px`}),"data-port-type":"in",r:"10","data-fe-attr":o,ref_for:!0,ref:e.setFeAttrEls,onMouseenter:t[0]||(t[0]=(...t)=>e.handlePortMouseenter&&e.handlePortMouseenter(...t))},null,44,Qt),(0,I._)("label",en,[(0,I._)("span",tn,(0,X.zw)(o),1)])])):(0,I.kq)("",!0)],64)))),128)}var on=(0,I.aZ)({name:"NormalNode",props:{is:{type:String,required:!0},nodeId:{type:String,required:!0},relativePaths:{type:Object,required:!0}},setup(e){const{fromPort:t,toPort:n,ioNodeEl:o,setFeAttrEls:a,allDescendants:l,handlePortMouseenter:r,filterThumbUrl:i}=bt(),s=(0,S.iH)({}),u=(0,I.Fl)((()=>{const t={};return e.relativePaths.in.forEach((e=>{t[e.to.attr]=e.from.vm.mergedFeAttrValue[e.from.attr]})),t})),d=(0,I.Fl)((()=>({in:u.value.in,result:e.nodeId}))),c=(0,I.f3)(U),p=e=>{const t=e.is,{mergedFeAttrValue:n}=e,o={};Object.keys(n||{}).forEach((e=>{void 0!==n[e]&&(o[e]=n[e]||""),o.in===o.result&&delete o.in,Object.prototype.hasOwnProperty.call(ut[t].ports,"in")&&!o.in&&(o.in="SourceGraphic"),Object.prototype.hasOwnProperty.call(ut[t].ports,"in2")&&!o.in2&&(o.in2="SourceGraphic")}));const a=ut[t].tag??t,l={R:{type:"identity"},G:{type:"identity"},B:{type:"identity"},A:{type:"identity"}};return Object.keys(l).forEach((e=>{u.value[e]&&Object.assign(l[e],c.value[u.value[e]].mergedFeAttrValue)})),(0,I.h)(a,o,Object.entries(l).map((([e,t])=>(0,I.h)(`feFunc${e}`,t))))};if(w.debug(ut[e.is]),["normal",void 0].includes(ut[e.is].type)){const{ports:t}=ut[e.is];Object.keys(t).forEach((e=>{["number","range"].includes(t[e].type)?s.value[e]=t[e].defaultValue??0:s.value[e]=t[e].defaultValue??""}))}return{POINT_R:Pt,POINT_BORDER_W:It,fromPort:t,ioNodeEl:o,setFeAttrEls:a,feAttrValue:s,foreignPortValue:u,mergedFeAttrValue:d,afterPathConnected:vt,afterPathRemoved:vt,handlePortMouseenter:r,fe:ut,allDescendants:l,filterThumbUrl:i,getVNodeFragment:p}}});const an=(0,oe.Z)(on,[["render",nn],["__scopeId","data-v-4866aacc"]]);var ln=an;const rn={key:0,class:"io-node__li"},sn=["data-fe-attr"],un={class:"io-node__port-text"},dn={class:"port-name"};function cn(e,t,n,o,a,l){return(0,I.wg)(!0),(0,I.iD)(I.HY,null,(0,I.Ko)(e.fe[e.is].ports,((n,o)=>((0,I.wg)(),(0,I.iD)(I.HY,{key:o},[!1!==n.showOnNode?((0,I.wg)(),(0,I.iD)("div",rn,[(0,I._)("em",{class:"port in",style:(0,X.j5)({width:2*e.POINT_R+"px",height:2*e.POINT_R+"px",borderWidth:`${e.POINT_BORDER_W}px`}),"data-port-type":"in",r:"10","data-fe-attr":o,ref_for:!0,ref:e.setFeAttrEls,onMouseenter:t[0]||(t[0]=(...t)=>e.handlePortMouseenter&&e.handlePortMouseenter(...t))},null,44,sn),(0,I._)("label",un,[(0,I._)("span",dn,(0,X.zw)(o),1)])])):(0,I.kq)("",!0)],64)))),128)}var pn=(0,I.aZ)({name:"NormalNode",props:{is:{type:String,required:!0},nodeId:{type:String,required:!0},relativePaths:{type:Object,required:!0}},setup(e){const{fromPort:t,toPort:n,ioNodeEl:o,setFeAttrEls:a,allDescendants:l,handlePortMouseenter:r,filterThumbUrl:i}=bt(),s=(0,S.iH)({}),u=(0,I.Fl)((()=>{const t={};return e.relativePaths.in.forEach((e=>{t[e.to.attr]=e.from.vm.mergedFeAttrValue[e.from.attr]})),t})),d=(0,I.Fl)((()=>({type:ut[e.is].ports.type.defaultValue,...s.value,...u.value,result:e.nodeId}))),c=()=>null;if(w.debug(ut[e.is]),["normal",void 0].includes(ut[e.is].type)){const{ports:t}=ut[e.is];Object.keys(t).forEach((e=>{["number","range"].includes(t[e].type)?s.value[e]=t[e].defaultValue??0:s.value[e]=t[e].defaultValue??""}))}return{POINT_R:Pt,POINT_BORDER_W:It,fromPort:t,ioNodeEl:o,setFeAttrEls:a,feAttrValue:s,foreignPortValue:u,mergedFeAttrValue:d,afterPathConnected:vt,afterPathRemoved:vt,handlePortMouseenter:r,fe:ut,allDescendants:l,filterThumbUrl:i,getVNodeFragment:c}}});const fn=(0,oe.Z)(pn,[["render",cn],["__scopeId","data-v-2d4cd09e"]]);var gn=fn,vn=n(7282);const mn=(0,I.aZ)({components:{NormalNode:At,MergeNode:Vt,SourceNode:Gt,StringLiteralNode:Jt,MatrixInFeColorMatrixNode:Xt,ComponentTransferRootNode:ln,ComponentTransferChildNode:gn},name:"IoNode",props:{is:{type:String,required:!0},nodeId:{type:String,required:!0},relativePaths:{type:Object,required:!0},position:{type:Array,required:!0}},setup(e,{emit:t}){const n=(0,I.FN)().proxy,o=(0,I.f3)(dt),a=(0,I.f3)("fromPort"),l=(0,I.f3)("toPort"),r=(0,S.iH)(),i=(0,S.iH)([0,0]),s=(0,S.iH)([]),u=e=>{e&&s.value.push(e)};(0,I.Xn)((()=>{s.value=[]}));const d=(0,I.Fl)((()=>{const t=e.is;return["normal",void 0].includes(ut[t].type)?At:["merge"].includes(ut[t].type)?Vt:["source"].includes(ut[t].type)?Gt:["string-literal"].includes(ut[t].type)?Jt:["matrix-in-fe-color-matrix"].includes(ut[t].type)?Xt:["component-transfer-root"].includes(ut[t].type)?ln:["component-transfer-child"].includes(ut[t].type)?gn:"div"})),c=(0,S.iH)(),p=(0,I.Fl)((()=>c.value?.filterThumbUrl??"")),f=(0,I.Fl)((()=>c.value?.mergedFeAttrValue??{})),g=(0,I.Fl)((()=>c.value?.getVNodeFragment)),v=(0,I.Fl)((()=>c.value?.afterPathConnected??(()=>{}))),m=(0,I.Fl)((()=>c.value?.afterPathRemoved??(()=>{}))),h=(0,I.f3)("canvasScrollEl"),_=function(s){Me(s,{start(e,{originEl:o}){if(pt(o))t("port-start",{ev:e,originEl:o,vm:n});else{const t=r.value?.getBoundingClientRect();i.value=[e.pageX-t?.left-h.value.scrollLeft,e.pageY-t?.top-h.value.scrollTop]}},move(a,{originEl:l}){if(pt(l))t("port-move",{ev:a,originEl:l,vm:n});else{const n=[a.pageX-i.value[0]-o.value.left,a.pageY-i.value[1]-o.value.top];t("update:position",n),(0,I.Y3)((()=>{const n=r.value?.getBoundingClientRect();i.value=[a.pageX-n?.left-h.value.scrollLeft,a.pageY-n?.top-h.value.scrollTop],t("node-move",e.relativePaths)}))}},up(e,{originEl:o}){pt(o)&&(pt(e.target)&&a?.value&&l?.value?t("port-connect",{ev:e,originEl:o,vm:n}):t("port-cancel",{ev:e,originEl:o,vm:n})),i.value=[0,0]}})},y=function(e){a?.value&&(t("destination-change",{ev:e,vm:null,originEl:null}),e.target?.removeEventListener("mouseout",y))},w=function(e){a?.value&&(t("destination-change",{ev:e,vm:n,originEl:e.target}),e.target?.addEventListener("mouseout",y))};(0,I.JJ)("handlePortMouseenter",w);const b=(0,I.Fl)((()=>{const e=new Set,t=n=>{e.add(n),n.relativePaths.in.forEach((e=>{t(e.from.vm)}))};return t(n),[...e]}));(0,I.JJ)("allDescendants",b);const D=(0,I.Fl)((()=>{const e=[];return b?.value.forEach((t=>{e.push(...t.relativePaths.in)})),e.length?gt(e):[n]}));(0,I.JJ)("orderedAllDescendants",D);const E=(0,I.Fl)((()=>D.value.map((e=>()=>e.getVNodeFragment(e))))),[C,F]=(0,I.f3)(W),k=()=>{F(n)},B=(0,I.Fl)((()=>C.value===n)),x=(0,I.f3)(A),N=async()=>{const t=()=>(0,I.h)("filter",{id:e.nodeId},E.value.map((e=>e()))),n=(0,P.ri)(t),o=document.createElementNS("http://www.w3.org/2000/svg","svg");n.mount(o),await(0,I.Y3)();const a=o.outerHTML;n.unmount(),await navigator.clipboard.writeText(a),vn.Z.success("SVG filter code has been copied successfully.","success")},R=async()=>{const t=`filter: url(#${e.nodeId})`;await navigator.clipboard.writeText(t),vn.Z.success("CSS rule code has been copied successfully.","success")};return{POINT_R:Pt,POINT_BORDER_W:It,fromPort:a,ioNodeEl:r,InternalNodeImplement:d,setFeAttrEls:u,handleNodeMousedown:_,handlePortMouseenter:w,fe:ut,allDescendants:b,afterPathConnected:v,afterPathRemoved:m,nodeConfigRef:c,filterThumbUrl:p,mergedFeAttrValue:f,getVNodeFragment:g,orderedAllDescendants:D,renderOfOrderedAllDescendants:E,focusingNode:C,handleNodeBodyClick:k,isFocused:B,removeNode:x,copySvgFilterCode:N,copyCssRule:R}}});var hn=mn;const _n=(0,oe.Z)(hn,[["render",Ne],["__scopeId","data-v-06f83674"]]);var yn=_n;const wn=["d"],bn=["transform"];function Dn(e,t,n,o,a,l){const r=(0,I.up)("Delete"),i=(0,I.up)("el-icon"),s=(0,I.Q2)("pingping");return(0,I.wg)(),(0,I.iD)("g",{class:(0,X.C_)(["linked-path",{"linked-path__focused":e.focused}]),onFocus:t[4]||(t[4]=t=>e.focused=!0),onBlur:t[5]||(t[5]=t=>e.focused=!1)},[(0,I._)("path",{class:(0,X.C_)(["linked-path-path",{"linked-path__focused-path":e.focused}]),style:(0,X.j5)({strokeWidth:`${e.PATH_STROKE_W}px`}),d:e.pathD,onClick:t[0]||(t[0]=(...t)=>e.handlePathClick&&e.handlePathClick(...t)),ref:"pathRef"},null,14,wn),e.focused?((0,I.wg)(),(0,I.iD)("foreignObject",{key:0,transform:`translate(\n        ${e.p[0]},\n        ${e.p[1]}\n      )`,style:{overflow:"visible"}},[(0,I._)("div",{class:"linked-path__toolbox",xmlns:"http://www.w3.org/1999/xhtml",onClick:t[3]||(t[3]=(0,P.iM)((()=>{}),["stop"]))},[(0,I.wy)(((0,I.wg)(),(0,I.iD)("button",{class:"linked-path__toolbox-button",is:"ui-button",onMousedown:t[1]||(t[1]=(0,P.iM)((()=>{}),["prevent"])),onClick:t[2]||(t[2]=(0,P.iM)((t=>e.removePath(e.pathId)),["prevent"])),title:"Remove Link","data-type":"danger"},[(0,I.Wm)(i,null,{default:(0,I.w5)((()=>[(0,I.Wm)(r)])),_:1})],32)),[[s,{remark:`[io-path] ${e.from.vm.is} ${e.from.attr} 到 ${e.to.vm.is} ${e.to.attr} 的连线 按下了删除按钮`}]])])],8,bn)):(0,I.kq)("",!0)],34)}var En=(0,I.aZ)({name:"IoPath",props:{pathDArguments:{type:Array,required:!0},pathId:{type:String,required:!0},from:{type:Object,required:!0},to:{type:Object,required:!0}},setup(e){const t=(0,I.Fl)((()=>{const t=e.pathDArguments;return`\n      M ${t[0]}, ${t[1]}\n      C ${t[2]}, ${t[3]}, ${t[4]}, ${t[5]}, ${t[6]}, ${t[7]}`})),n=(0,S.iH)(null),o=(0,S.iH)(!1),a=(0,I.Fl)((()=>{t.value,o.value;const{x:e,y:a}=n.value?.getPointAtLength(n.value?.getTotalLength()/2)||{x:0,y:0};return[e,a]})),l=(0,I.f3)(R),r=e=>{w.debug(e)},i=e=>{w.debug(e)};return{PATH_STROKE_W:St,focused:o,pathRef:n,pathD:t,p:a,removePath:l,handlePathClick:r,handlePathBlur:i}}});const Cn=(0,oe.Z)(En,[["render",Dn],["__scopeId","data-v-36397aac"]]);var Pn=Cn;function In(e){const{to:t,from:n}=e;let o=!1;const a=e=>{if(t.vm!==e.vm)for(let t=0;t<e.vm.relativePaths.in.length;t++){if(o)break;const n=e.vm.relativePaths.in[t];a(n.from)}else o=!0};return a(n),o}function Fn(e){const{to:t,from:n}=e,o=t.vm.relativePaths.in.filter((e=>t.attr===e.to.attr&&t.vm===e.to.vm));return o.length>0}function Sn(e){if(e.from.vm===e.to.vm)throw new TypeError("Cannot link to self");if(e.from.el?.dataset.portType===e.to.el?.dataset.portType)throw new TypeError("Cannot create link when the two ports have same direction");if(Fn(e))throw new TypeError("Cannot create duplicate link");if(In(e))throw new TypeError("Cannot create link when loop is detected");w.debug(e.to.vm.relativePaths.in[0]?.from.vm.relativePaths.in[0]?.from.vm.relativePaths.in)}function kn(){const e=(0,S.XI)(null),t=(0,I.FN)().proxy;let n=new ResizeObserver((([t],n)=>{e.value=t.target.getBoundingClientRect(),w.debug(e.value)}));return(0,I.bv)((()=>{n.observe(t.$el),(0,I.Jd)((()=>{n.disconnect()})),n=null})),{elRect:e}}var Bn=(0,I.aZ)({name:"SvgCanvas",components:{IoNode:yn,IoPath:Pn},setup(){const e=(0,S.XI)();(0,I.JJ)("canvasScrollEl",e);const t=kn().elRect;(0,I.JJ)(dt,t);const n=(0,I.f3)(x),o=(0,I.f3)(M),a=(0,I.f3)(k),l=(0,I.f3)(N),r=(0,I.f3)(O),i=(0,I.f3)(U),u=e=>{e&&(i.value[e.nodeId]=e)};(0,I.Xn)((()=>{i.value={}}));const d=(0,S.iH)([0,0,0,0,0,0,0,0]),c=(0,I.Fl)((()=>{const e=d.value;return`\nM ${e[0]}, ${e[1]}\nC ${e[2]}, ${e[3]}, ${e[4]}, ${e[5]}, ${e[6]}, ${e[7]}`})),p=(0,S.iH)(null),f=(0,S.iH)(null);(0,I.JJ)("fromPort",p),(0,I.JJ)("toPort",f);const g=({originEl:n,vm:o})=>{const a=n;p.value={vm:o,attr:n.dataset?.feAttr??"",el:n};const l=[a.getBoundingClientRect().x,a.getBoundingClientRect().y];"in"===ct(a)&&(d.value=[l[0],l[1]+Pt,l[0]+Ft+Pt,l[1]+Pt,l[0]-Ft+Pt,l[1]+Pt,l[0],l[1]+Pt].map(((n,o)=>o%2===0?n+e.value.scrollLeft-t.value.left:n+e.value.scrollTop-t.value.top))),"out"===ct(a)&&(d.value=[l[0]+2*Pt,l[1]+Pt,l[0]+Ft+Pt,l[1]+Pt,l[0]-Ft+Pt,l[1],l[0],l[1]].map(((n,o)=>o%2===0?n+e.value.scrollLeft-t.value.left:n+e.value.scrollTop-t.value.top)))},v=({ev:n,originEl:o})=>{"in"===ct(o)&&(d.value=[n.pageX,n.pageY,n.pageX+Ft,n.pageY,...d.value.slice(4)].map(((n,o)=>o<=3?o%2===0?n+e.value.scrollLeft-t.value.left:n+e.value.scrollTop-t.value.top:n))),"out"===ct(o)&&(d.value=[...d.value.slice(0,4),n.pageX-Ft,n.pageY,n.pageX,n.pageY].map(((n,o)=>o>=4?o%2===0?n+e.value.scrollLeft-t.value.left:n+e.value.scrollTop-t.value.top:n)))},m=({ev:n,originEl:a})=>{const l=n.target,i=[l.getBoundingClientRect().x,l.getBoundingClientRect().y];let u,c=[];"in"===ct(a)&&(c=[i[0]+2*Pt,i[1]+Pt,i[0]+Ft+Pt,i[1]+Pt,...d.value.slice(4)].map(((n,o)=>o<=3?o%2===0?n+e.value.scrollLeft-t.value.left:n+e.value.scrollTop-t.value.top:n)),u={pathDArguments:c,id:s(),to:p.value,from:f.value}),"out"===ct(a)&&(c=[...d.value.slice(0,4),i[0]-Ft+Pt,i[1]+Pt,i[0],i[1]+Pt].map(((n,o)=>o>=4?o%2===0?n+e.value.scrollLeft-t.value.left:n+e.value.scrollTop-t.value.top:n)),u={pathDArguments:c,id:s(),from:p.value,to:f.value},w.log(`[svg-canvas] 建立了一条${u.from.vm.is} ${u.from.attr} 到 ${u.to.vm.is} ${u.to.attr} 的连线`));try{Sn(u),o(u),"out"===ct(a)?(r(u,p,f),f.value?.vm?.afterPathConnected?.()):(r(u,f,p),p.value?.vm?.afterPathConnected?.())}catch(g){vn.Z.error(g.message),w.error(g)}p.value=null,f.value=null,d.value.fill(0)},h=()=>{w.log(`[svg-canvas] ${p.value?.vm.is} ${p.value?.attr} 到 ${f.value?.vm.is} ${f.value?.attr} 的连线已取消`),w.debug("canceled"),p.value=null,f.value=null,d.value.fill(0)},_=({vm:e,originEl:t,ev:n})=>{f.value={vm:e,attr:n.target?.dataset?.feAttr??"",el:t}},y=n=>{n.out.forEach((n=>{const o=[n.from.el?.getBoundingClientRect().x??0,n.from.el?.getBoundingClientRect().y??0];n.pathDArguments=[o[0]+2*Pt,o[1]+Pt,o[0]+Ft+Pt,o[1]+Pt,...n.pathDArguments.slice(4)].map(((n,o)=>o<=3?o%2===0?n+e.value.scrollLeft-t.value.left:n+e.value.scrollTop-t.value.top:n))})),n.in.forEach((n=>{const o=[n.to.el?.getBoundingClientRect().x??0,n.to.el?.getBoundingClientRect().y??0];n.pathDArguments=[...n.pathDArguments.slice(0,4),o[0]-Ft+Pt,o[1]+Pt,o[0],o[1]+Pt].map(((n,o)=>o>=4?o%2===0?n+e.value.scrollLeft-t.value.left:n+e.value.scrollTop-t.value.top:n))}))},b=(0,I.f3)($),D=(0,I.f3)(G),E=(0,S.iH)([0,0]),C=(0,S.OT)({in:[],out:[]}),P=(0,I.f3)(B),F=async n=>{const{nodes:a,nodeForms:l,links:s}=n.stuff;Object.values(a).forEach((e=>{P(e)})),await(0,I.Y3)(),Object.entries(l).forEach((([e,t])=>{Object.keys(t).forEach((n=>{[(0,X.RI)(i.value[e].nodeConfigRef.feAttrValue,n),"feMerge"===a[e].is].includes(!0)&&(i.value[e].nodeConfigRef.feAttrValue[n]=t[n])}))})),await(0,I.Y3)(),Object.values(s).map((n=>{const o=window.structuredClone(n);o.from.vm=i.value[n.from.vmId],o.from.el=o.from.vm.$el.querySelector(`[data-fe-attr="${n.from.attr}"]`);const a=[o.from.el.getBoundingClientRect().x,o.from.el.getBoundingClientRect().y];o.to.vm=i.value[n.to.vmId],o.to.el=o.to.vm.$el.querySelector(`[data-fe-attr="${n.to.attr}"]`);const l=[o.to.el.getBoundingClientRect().x,o.to.el.getBoundingClientRect().y];return o.pathDArguments=[a[0]+2*Pt,a[1]+Pt,a[0]+Ft+Pt,a[1]+Pt,l[0]-Ft+Pt,l[1]+Pt,l[0],l[1]+Pt].map(((n,o)=>o%2===0?n+e.value.scrollLeft-t.value.left:n+e.value.scrollTop-t.value.top)),o})).forEach((e=>{try{Sn(e),o(e),r(e,e.from,e.to),f.value=e.to,p.value=e.from,e.to.vm?.afterPathConnected?.()}catch(t){w.error(t)}p.value=null,f.value=null}))};return{canvasScrollEl:e,svgCanvasRect:t,ghostPathD:c,ghostNodeRef:b,ghostNodeType:D,ghostNodePosition:E,nodes:a,setNodeRefMap:u,linkedPaths:n,handlePortStart:g,handlePortMove:v,handlePortConnect:m,handlePortCancel:h,handleDestinationChange:_,handleNodeMove:y,fromPort:p,toPort:f,defaultRelativePath:C,relativePathMapIndexedByNodeId:l,loadCanvasStuffFromSerializedData:F}}});const An=(0,oe.Z)(Bn,[["render",Se],["__scopeId","data-v-e2e7568c"]]);var xn=An;const Nn=e=>((0,I.dD)("data-v-804d09c2"),e=e(),(0,I.Cn)(),e),Rn={key:0,class:"svg-canvas__overlay-tip"},Mn=Nn((()=>(0,I._)("h1",{style:{fontSize:"2em"}},"🥴 Embarrassed! No nodes here.",-1))),On=Nn((()=>(0,I._)("br",null,null,-1))),Un=Nn((()=>(0,I._)("strong",null,"drag",-1))),Vn=Nn((()=>(0,I._)("br",null,null,-1)));var Tn=(0,I.aZ)({__name:"SvgCanvasOverlayTip",setup(e){const t=(0,I.f3)(pe),n=(0,I.f3)(k),o=(0,I.f3)(me);return(e,a)=>0===Object.keys((0,S.SU)(n)).length?((0,I.wg)(),(0,I.iD)("div",Rn,[Mn,(0,I._)("p",{style:(0,X.j5)({fontSize:"1.5em"})},[(0,I.Uk)(" 👈 "),On,(0,I.Uk)(" To add a node, please "),Un,(0,I.Uk)(" a node definition from the left panel, "),Vn,(0,I.Uk)(" then drop it HERE. ")],4),(0,I.Uk)(" "+(0,X.zw)((0,S.SU)(t))+" ",1),(0,S.SU)(t)?(0,I.kq)("",!0):((0,I.wg)(),(0,I.iD)("div",{key:0,style:(0,X.j5)({fontSize:"1.5em"})},[(0,I.Uk)(" Are your new here? you can "),(0,I._)("a",{href:"javascript:;",onClick:a[0]||(a[0]=(0,P.iM)((e=>(0,S.SU)(o)((0,S.SU)(ue)[0].id)),["prevent"])),"data-type":"primary"},"open the sample project"),(0,I.Uk)(" and see how does the app work. ")],4))])):(0,I.kq)("",!0)}});const jn=(0,oe.Z)(Tn,[["__scopeId","data-v-804d09c2"]]);var Hn=jn;const Gn={class:"node-library-panel"},$n={class:"menu-list"},Ln=["onMousedown"];function Wn(e,t,n,o,a,l){const r=(0,I.Q2)("pingping");return(0,I.wg)(),(0,I.iD)("div",Gn,[((0,I.wg)(!0),(0,I.iD)(I.HY,null,(0,I.Ko)(e.menuGroup,((t,n)=>((0,I.wg)(),(0,I.iD)("div",{key:n},[(0,I._)("h4",null,(0,X.zw)(e.menuGroup.title),1),(0,I._)("ul",$n,[((0,I.wg)(!0),(0,I.iD)(I.HY,null,(0,I.Ko)(t.children,((t,n)=>(0,I.wy)(((0,I.wg)(),(0,I.iD)("li",{key:n,onMousedown:n=>e.handleIconMousedown(n,t)},[(0,I.Uk)((0,X.zw)(t.title),1)],40,Ln)),[[r,{remark:`[node-library-panel] ${t.title} 节点开始拖拽`}]]))),128))])])))),128))])}const Jn=[{title:"组1",children:Object.keys(ut).map((e=>({title:e})))}];var qn=(0,I.aZ)({name:"NodeLibraryPanel",setup(e,{emit:t}){const n=(0,I.f3)(q),o=(0,I.Fl)((()=>n.value.svgCanvasRect)),a=(0,I.f3)($),l=(0,I.f3)(G),r=(0,I.f3)(B),i=function(e,t){Me(e,{start(e,{originEl:r}){l.value=t.title,(0,I.Y3)((()=>a.value.$emit("update:position",[e.clientX+n.value.$el.scrollLeft-o.value.left,e.clientY+n.value.$el.scrollTop-o.value.top])))},move(e,{originEl:t}){w.debug(a.value),a.value.$emit("update:position",[e.clientX+n.value.$el.scrollLeft-o.value.left,e.clientY+n.value.$el.scrollTop-o.value.top])},up(e,{originEl:a}){const i=n.value?.$el.getBoundingClientRect();e.clientX>i.x&&e.clientX<i.x+i.width&&e.clientY>i.y&&e.clientY<i.y+i.height?(r({is:t.title,id:s(),position:[e.clientX+n.value.$el.scrollLeft-o.value.left,e.clientY+n.value.$el.scrollTop-o.value.top]}),w.log(`[node-library-panel] ${t.title} 节点已被放置到canvas上`)):w.log(`[node-library-panel] ${t.title} 节点的创建过程已取消`),l.value=null}})};return{handleIconMousedown:i,menuGroup:Jn,filterLibraryPanelWidth:Dt}}});const zn=(0,oe.Z)(qn,[["render",Wn],["__scopeId","data-v-ffe3e260"]]);var Zn=zn;const Yn=e=>((0,I.dD)("data-v-d62e7784"),e=e(),(0,I.Cn)(),e),Xn={class:"stuff-config-panel"},Kn={class:"stuff-config-panel__title-bar"},Qn={class:"stuff-config-panel__main"},eo={key:0},to={key:1},no=Yn((()=>(0,I._)("h3",null,"Opus! 🫢",-1))),oo=Yn((()=>(0,I._)("br",null,null,-1)));function ao(e,t,n,o,a,l){const r=(0,I.up)("form-item");return(0,I.wg)(),(0,I.iD)("div",Xn,[(0,I._)("div",Kn,[e.focusingNode?((0,I.wg)(),(0,I.iD)(I.HY,{key:0},[(0,I.Uk)(" 👀 Editing - "+(0,X.zw)(e.focusingNode?.is),1)],64)):((0,I.wg)(),(0,I.iD)(I.HY,{key:1},[(0,I.Uk)(" 👈 Click a node, then configure it ! ")],64))]),(0,I._)("div",Qn,[e.focusingNode?((0,I.wg)(),(0,I.iD)("div",eo,[e.formFieldConfig&&Object.values(e.formFieldConfig.ports).some((e=>[void 0,!0].includes(e.showInConfigPanel)))?((0,I.wg)(),(0,I.iD)("form",{key:0,onSubmit:t[0]||(t[0]=(0,P.iM)((()=>{}),["prevent"]))},[((0,I.wg)(!0),(0,I.iD)(I.HY,null,(0,I.Ko)(e.formFieldConfig.ports,((e,t)=>((0,I.wg)(),(0,I.j4)(r,{key:t,schema:e,"field-id":t,style:{marginBottom:"16px"}},null,8,["schema","field-id"])))),128))],32)):((0,I.wg)(),(0,I.iD)("div",to,[no,(0,I.Uk)(" No fields can be edited here."),oo,(0,I.Uk)(" Look around this node on the canvas, and create links between the available ports. ")]))])):(0,I.kq)("",!0)])])}const lo=e=>((0,I.dD)("data-v-4b07fcca"),e=e(),(0,I.Cn)(),e),ro={key:0},io=lo((()=>(0,I._)("br",null,null,-1))),so=["value"],uo=["min","max","step"];var co=(0,I.aZ)({__name:"FormItem",props:{schema:{type:Object},fieldId:{type:String}},setup(e){const t=e,n=(0,I.Fl)((()=>t.fieldId)),[o]=(0,I.f3)(W),a=(0,I.Fl)((()=>(0,S.SU)(o)?.nodeConfigRef?.feAttrValue??{})),l=(0,I.Fl)((()=>(0,S.SU)(o)?.nodeConfigRef?.foreignPortValue??{})),r=(0,I.Fl)((()=>(0,X.RI)((0,S.SU)(l),n.value))),i=(e,t)=>e,s=(0,I.Fl)((()=>({disabled:(0,S.SU)(r),value:(0,S.SU)(r)?i(l.value[(0,S.SU)(n)],(0,S.SU)(n)):a.value[(0,S.SU)(n)],onChange:e=>{e.stopPropagation(),a.value[(0,S.SU)(n)]=e.target.value}})));return(t,o)=>!1!==e.schema?.showInConfigPanel?((0,I.wg)(),(0,I.iD)("div",ro,[(0,I._)("label",null,(0,X.zw)((0,S.SU)(n)),1),io,"text"!==e.schema?.type&&e.schema?.type?(0,I.kq)("",!0):((0,I.wg)(),(0,I.iD)(I.HY,{key:0},[Array.isArray(e.schema?.enum)?((0,I.wg)(),(0,I.iD)("select",(0,I.dG)({key:0,is:"ui-select"},(0,S.SU)(s)),[((0,I.wg)(!0),(0,I.iD)(I.HY,null,(0,I.Ko)(e.schema.enum,(e=>((0,I.wg)(),(0,I.iD)("option",{key:e&&"object"===typeof e?e.value:e,value:e&&"object"===typeof e?e.value:e},(0,X.zw)(e&&"object"===typeof e?e.label:e),9,so)))),128))],16)):((0,I.wg)(),(0,I.iD)("input",(0,I.dG)({key:1,is:"ui-input",type:"text",size:"20"},(0,S.SU)(s)),null,16))],64)),"color"===e.schema?.type?((0,I.wg)(),(0,I.iD)("input",(0,I.dG)({key:1,is:"ui-color",type:"color-opacity"},(0,S.SU)(s)),null,16)):"number"===e.schema?.type?((0,I.wg)(),(0,I.iD)("input",(0,I.dG)({key:2,is:"ui-input",type:"number",size:"20"},(0,S.SU)(s)),null,16)):"range"===e.schema?.type?((0,I.wg)(),(0,I.iD)("input",(0,I.dG)({key:3,is:"ui-range",type:"range",min:e.schema.range[0],max:e.schema.range[1],step:e.schema.step??1},(0,S.SU)(s)),null,16,uo)):(0,I.kq)("",!0)])):(0,I.kq)("",!0)}});const po=(0,oe.Z)(co,[["__scopeId","data-v-4b07fcca"]]);var fo=po,go=(0,I.aZ)({name:"StuffConfigPanel",components:{FormItem:fo},setup(e,{emit:t}){const[n]=(0,I.f3)(W),o=(0,I.Fl)((()=>(0,S.SU)(n)&&(0,S.SU)(n)?.is?ut[(0,S.SU)(n).is]:null));return{stuffConfigPanelWidth:Et,focusingNode:n,formFieldConfig:o}}});const vo=(0,oe.Z)(go,[["render",ao],["__scopeId","data-v-d62e7784"]]);var mo=vo;const ho=e=>((0,I.dD)("data-v-142fdbf4"),e=e(),(0,I.Cn)(),e),_o={class:"output-preview-panel__menu-bar"},yo={class:"output-preview-panel__menu-bar__left-content"},wo={class:"output-preview-panel__drag-move-handler"},bo=ho((()=>(0,I._)("span",{class:"output-preview-panel__menu-bar-text"},"Preview",-1))),Do={class:"output-preview-panel__menu-bar__right-content"},Eo={class:"output-preview-panel__content",ref:"filteredContentEl"},Co=["src"],Po={key:1,class:"output-preview-panel__image-placeholder"},Io=ho((()=>(0,I._)("br",null,null,-1))),Fo={class:"output-preview-panel__image__drag-is-hovering__tip"},So=ho((()=>(0,I._)("div",{class:"output-preview-panel__tools"},null,-1))),ko={class:"output-preview-panel__se-resize-corner"};function Bo(e,t,n,o,a,l){const r=(0,I.up)("Rank"),i=(0,I.up)("el-icon"),s=(0,I.up)("filter-def"),u=(0,I.Q2)("pingping"),d=(0,I.Q2)("move"),c=(0,I.Q2)("resize");return(0,I.wg)(),(0,I.iD)("div",{class:"output-preview-panel",ref:e.outputPreviewPanelRootEl},[(0,I._)("div",_o,[(0,I._)("div",yo,[(0,I.wy)(((0,I.wg)(),(0,I.iD)("div",wo,[(0,I.Wm)(i,{size:24,color:"#fff"},{default:(0,I.w5)((()=>[(0,I.Wm)(r)])),_:1})])),[[u,{remark:"[output-preview-panel] 移动预览面板（左上角）"}],[d]]),bo]),(0,I._)("div",Do,[e.sourceImageSrc?(0,I.wy)(((0,I.wg)(),(0,I.iD)("button",{key:0,class:"lu-ui__extend-small",is:"ui-button",onClick:t[0]||(t[0]=(...t)=>e.removePreviewImage&&e.removePreviewImage(...t))},[(0,I.Uk)(" Remove Preview Image ")])),[[u,{remark:"[output-preview-panel] 移除示例图片"}]]):(0,I.kq)("",!0),e.sourceImageSrc?(0,I.wy)(((0,I.wg)(),(0,I.iD)("button",{key:1,class:"lu-ui__extend-small",is:"ui-button",onClick:t[1]||(t[1]=(...t)=>e.saveFilteredImage&&e.saveFilteredImage(...t))},[(0,I.Uk)(" Save as PNG ")])),[[u,{remark:"[output-preview-panel] 另存为PNG"}]]):(0,I.kq)("",!0)])]),(0,I._)("div",Eo,[(0,I.Wm)(s,{"filter-el-id":"previewingFilter"}),(0,I._)("div",{class:"output-preview-panel__image-wrap",onDragstart:t[7]||(t[7]=(0,P.iM)((()=>{}),["stop","prevent"])),onDragover:t[8]||(t[8]=(0,P.iM)((t=>e.dragIsHovering=!0),["stop","prevent"])),onDragleave:t[9]||(t[9]=(0,P.iM)((t=>e.dragIsHovering=!1),["stop","prevent"])),onDrop:t[10]||(t[10]=(0,P.iM)(((...t)=>e.handleDropOnImageWrap&&e.handleDropOnImageWrap(...t)),["stop","prevent"]))},[e.sourceImageSrc?((0,I.wg)(),(0,I.iD)("img",{key:0,class:"output-preview-panel__image",src:e.sourceImageSrc,onError:t[2]||(t[2]=t=>e.sourceImageSrc=""),ref:"sourceImageEl"},null,40,Co)):((0,I.wg)(),(0,I.iD)("div",Po,[(0,I._)("div",null,[(0,I.Uk)(" Drop your image here, then use it as the source image."),Io,(0,I.Uk)(" You can also "),(0,I._)("input",{ref:"fileInputEl",type:"file",style:{display:"block",opacity:0,position:"fixed",visibility:"hidden"},onChange:t[3]||(t[3]=(...t)=>e.handleFileInputChange&&e.handleFileInputChange(...t))},null,544),(0,I.wy)(((0,I.wg)(),(0,I.iD)("button",{class:"lu-ui__extend-small",is:"ui-button","data-type":"primary",onClick:t[4]||(t[4]=()=>{e.fileInputEl.click()})},[(0,I.Uk)("choose a image")])),[[u,{remark:"[output-preview-panel] 选择图片"}]]),(0,I.Uk)(", "),(0,I.wy)(((0,I.wg)(),(0,I.iD)("button",{class:"lu-ui__extend-small",is:"ui-button","data-type":"primary",onClick:t[5]||(t[5]=(...t)=>e.showImageUrlInputDialog&&e.showImageUrlInputDialog(...t))},[(0,I.Uk)("enter the url of the image")])),[[u]]),(0,I.Uk)("  or  "),(0,I.wy)(((0,I.wg)(),(0,I.iD)("button",{class:"lu-ui__extend-small",is:"ui-button","data-type":"primary",onClick:t[6]||(t[6]=(...t)=>e.loadSampleImage&&e.loadSampleImage(...t))},[(0,I.Uk)("use sample image")])),[[u,{remark:"[output-preview-panel] 使用示例图片"}]]),(0,I.Uk)(". ")])])),(0,I.wy)((0,I._)("div",Fo,null,512),[[P.F8,e.dragIsHovering]])],32),So],512),(0,I.wy)((0,I._)("div",ko,null,512),[[u,{remark:"[output-preview-panel] 调整预览面板大小（右下角）"}],[c]])],512)}n(3408),n(4590);const Ao={class:"filter-def"},xo=["id"];function No(e,t,n,o,a,l){return(0,I.wg)(),(0,I.iD)("div",Ao,[((0,I.wg)(),(0,I.iD)("svg",null,[(0,I._)("defs",null,[(0,I._)("filter",{id:e.filterElId},[((0,I.wg)(!0),(0,I.iD)(I.HY,null,(0,I.Ko)(e.renderOfOrderedAllDescendants,((e,t)=>((0,I.wg)(),(0,I.j4)((0,I.LL)(e),{key:t})))),128))],8,xo)])]))])}var Ro=(0,I.aZ)({name:"FeDef",props:{filterElId:{type:String}},setup(){const[e]=(0,I.f3)(W),t=(0,I.Fl)((()=>e.value?.renderOfOrderedAllDescendants??(()=>null)));return{focusingNode:e,renderOfOrderedAllDescendants:t}}});const Mo=(0,oe.Z)(Ro,[["render",No],["__scopeId","data-v-3b8b776a"]]);var Oo=Mo,Uo=n(9306),Vo=n.n(Uo),To=(0,I.aZ)({name:"OutputPreviewPanel",components:{FilterDef:Oo},directives:{move:{mounted(e){e.__vDragMainElToBeDragged__=document.querySelector(".output-preview-panel");const t=t=>Me(t,{start(t){const n=e.getBoundingClientRect();e.__vDragClickedRelativePosition__=[t.pageX-n?.left,t.pageY-n?.top]},move(t){const o=[t.pageX-e.__vDragClickedRelativePosition__[0],t.pageY-e.__vDragClickedRelativePosition__[1]];e.__vDragMainElToBeDragged__.style.left=o[0]+"px",e.__vDragMainElToBeDragged__.style.top=o[1]+"px",n()},up(){n(),w.log("[output-preview-panel] [输出预览面板] 当前位置及尺寸",[e.__vDragMainElToBeDragged__.style.left,e.__vDragMainElToBeDragged__.style.top,e.__vDragMainElToBeDragged__.style.width,e.__vDragMainElToBeDragged__.style.height].map((e=>parseInt(e)))),delete e.__vDragClickedRelativePosition__}});function n(){const t=e.__vDragMainElToBeDragged__.getBoundingClientRect();t.x<=0?e.__vDragMainElToBeDragged__.style.left="0px":t.x+t.width>window.innerWidth&&(e.__vDragMainElToBeDragged__.style.left=window.innerWidth-t.width+"px"),t.y<=0?e.__vDragMainElToBeDragged__.style.top="0px":t.y+t.height>window.innerHeight&&(e.__vDragMainElToBeDragged__.style.top=window.innerHeight-t.height+"px")}window.addEventListener("resize",n),e.addEventListener("mousedown",t),e.__vDragDispose__=()=>{delete e.__vDragDispose__,delete e.__vDragMainElToBeDragged__,e.removeEventListener("mousedown",t),window.removeEventListener("resize",n)}},unmounted(e){e.__vDragDispose__()}},resize:{mounted(e){e.__vResizeMainElToBeResized__=document.querySelector(".output-preview-panel");const t=t=>Me(t,{move(t){const n=e.__vResizeMainElToBeResized__.getBoundingClientRect(),o=[t.pageX-n.x,t.pageY-n.y];n.x+o[0]>=window.innerWidth&&(o[0]-=t.pageX-window.innerWidth),n.y+o[1]>window.innerHeight&&(o[1]-=t.pageY-window.innerHeight),n.width>=window.innerWidth&&(o[0]=window.innerWidth),n.height>=window.innerHeight&&(o[1]=window.innerWidth),e.__vResizeMainElToBeResized__.style.width=o[0]+"px",e.__vResizeMainElToBeResized__.style.height=o[1]+"px"},up(){w.log("[output-preview-panel] [输出预览面板] 当前位置及尺寸",[e.__vResizeMainElToBeResized__.style.left,e.__vResizeMainElToBeResized__.style.top,e.__vResizeMainElToBeResized__.style.width,e.__vResizeMainElToBeResized__.style.height].map((e=>parseInt(e))))}});e.addEventListener("mousedown",t),e.__vResizeDispose__=()=>{delete e.__vResizeDispose__,delete e.__vResizeMainElToBeResized__,e.removeEventListener("mousedown",t)}},unmounted(e){e.__vResizeDispose__()}}},setup(){const e=(0,S.iH)();(0,I.YP)(e,((e,t)=>{URL.revokeObjectURL(t)})),(0,I.Ah)((()=>{URL.revokeObjectURL((0,S.SU)(e))}));const t=()=>{e.value="./demo/assets/rinkysplash.jpg"},n=()=>{e.value=""},o=(0,S.iH)(),a=(0,S.iH)(!1),l=t=>{a.value=!1;const n=t.dataTransfer?.files[0];n&&(w.log("[output-preview-panel] [加载示例图片] 用户通过拖拽加载了示例图片"),e.value=URL.createObjectURL(n))},r=(0,S.XI)(),i=t=>{const n=t.target.files?.[0];n&&(w.log("[output-preview-panel] [加载示例图片] 用户通过文件选择器加载了示例图片"),e.value=URL.createObjectURL(n))},s=()=>{let t="";while(""===t?.trim())t=window.prompt("Enter the url of the your image");if(null===t)return Promise.reject(new Error("[output-preview-panel][输入图片url] 用户取消输入"));w.log("[output-preview-panel][加载示例图片] 用户通过输入图片URL加载了示例图片"),e.value=t},u=(0,S.iH)(),d=(0,S.XI)(),c=async()=>{try{if(!e.value)return void vn.Z.error("No image can be exported, please select a image.");const n=u.value.cloneNode(!0),o=n.querySelector(".output-preview-panel__image");await new Promise(((e,t)=>{o.addEventListener("load",e,{once:!0}),o.addEventListener("error",t,{once:!0})})),o.style.minWidth=o.naturalWidth+"px",o.style.minHeight=o.naturalHeight+"px";const a=document.createElement("div");a.append(n),Object.assign(a.style,{position:"absolute",top:0,right:0,bottom:0,left:0,width:0,height:0,overflow:"hidden"}),document.body.append(a);let l="";try{l=await Vo().toPng(n)}catch(t){throw w.log("[output-preview-panel][生成图片]",e.value),w.error("[output-preview-panel][生成图片] 生成图片过程发生错误，请稍后重试",t),t}finally{a.remove()}const r=atob((()=>{const e=l.split(",");return e[e.length-1]})()),i=new Uint8Array(r.length);for(let e=0;e<i.length;e++)i[e]=r.charCodeAt(e);const s=new Blob([i],{type:"image/png"}),d=URL.createObjectURL(s);window.open(d,"_blank")}catch(t){vn.Z.error("We encountered a error when generating the result image. Maybe the image is from other website and cannot be accessed by the app.")}};return{sourceImageSrc:e,loadSampleImage:t,removePreviewImage:n,outputPreviewPanelRootEl:o,dragIsHovering:a,handleDropOnImageWrap:l,showImageUrlInputDialog:s,fileInputEl:r,handleFileInputChange:i,sourceImageEl:d,filteredContentEl:u,saveFilteredImage:c}}});const jo=(0,oe.Z)(To,[["render",Bo],["__scopeId","data-v-142fdbf4"]]);var Ho=jo;n(541);const Go="Untitled",$o={class:"about-content"},Lo=(0,I._)("br",null,null,-1),Wo=(0,I._)("a",{target:"_blank",href:"https://github.com/gogoend"},"gogoend",-1),Jo=(0,I._)("br",null,null,-1),qo=(0,I._)("br",null,null,-1),zo=(0,I._)("br",null,null,-1),Zo=(0,I.uE)('<p> The project is inspired by the following project: </p><ul><li><a target="_blank" href="https://github.com/poletaevvlad/svg-filter-editor">poletaevvlad / svg-filter-editor</a></li><li><a target="_blank" href="https://github.com/yoksel/svg-filters">yoksel / svg-filters</a></li></ul><p> The program includes some source code from the following open source projects: </p><ul><li><a target="_blank" href="https://github.com/vuejs/core">vuejs / core</a></li><li><a target="_blank" href="https://github.com/element-plus/element-plus">dexie / Dexie.js</a></li><li><a target="_blank" href="https://github.com/yued-fe/lulu">yued-fe / lulu</a></li><li><a target="_blank" href="https://github.com/element-plus/element-plus">element-plus / element-plus</a></li><li><a target="_blank" href="https://github.com/tsayen/dom-to-image">tsayen / dom-to-image</a></li></ul><p> The sample image is downloaded from the website of <a target="_blank" href="https://peach.blender.org/media-gallery/"><i>Big Buck Bunny</i></a> - a movie is totally made with open source digital content creators. </p><p> Thanks to my employer, <a target="_blank" href="https://www.aicloud.com/">Beijing SinoVoice Technology Co.,Ltd.</a> (aka. <a target="_blank" href="https://www.aicloud.com/">北京捷通华声科技股份有限公司</a> in Chinese), which gives me a WLB life style to let me do my hobby after work. </p>',6);var Yo=(0,I.aZ)({__name:"AboutContent",setup(e){const t=window.__sfgb_runtime_config__;return(e,n)=>((0,I.wg)(),(0,I.iD)("div",$o,[(0,I._)("p",null,[(0,I.Uk)(" SVG Filter Node Builder v"+(0,X.zw)((0,S.SU)(t).version)+" ",1),Lo,(0,I.Uk)(" ©️2021-2022 "),Wo,Jo,(0,I.Uk)(" Build Time: "+(0,X.zw)(new Date((0,S.SU)(t).buildTime))+" ",1),qo,(0,I.Uk)(" Git Commit: "+(0,X.zw)((0,S.SU)(t).buildHash)+" ",1),zo,(0,I.Uk)(" Build Version: "+(0,X.zw)((0,S.SU)(t).buildVersion),1)]),Zo]))}});const Xo=Yo;var Ko=Xo;function Qo(){let e=null;new Y.Z({title:"About",content:'<div class="about-dialog-dialog" />',width:"480px",buttons:[{value:"Close"}],async onShow(){const t=this.querySelector(".about-dialog-dialog");e=(0,P.ri)(Ko),e.mount(t)},onRemove(){e.unmount(),e=null}})}const ea={class:"menu-bar"},ta={class:"menu-bar__left"},na={class:"seg-content menu-entry-list"},oa=["onMouseenter","onMouseleave"],aa={class:"submenu-list",style:{position:"absolute",top:"100%",left:0}},la=["onMouseenter","onMouseleave","onClick"],ra={key:0},ia={class:"menu-bar__center"},sa={class:"seg-content"},ua={class:"menu-bar__right"},da={class:"seg-content"},ca={target:"_blank",href:"https://github.com/gogoend/svg-filter-graph-builder"};var pa=(0,I.aZ)({__name:"TopMenuBar",setup(e){const t=(0,S.iH)({}),n=e=>{e.disabled||(t.value[e.id]=!0)},o=e=>{e.disabled||delete t.value[e.id]},a=(0,I.f3)(de),l=(0,I.f3)(ce),r=(0,I.f3)(ge),i=(0,I.f3)(ve),s=(0,I.f3)(ye),u=(0,I.f3)(_e),d=(0,I.f3)(me),c=(0,I.Fl)((()=>[{id:"File",label:"File",subMenu:[{id:"Open",label:"Open...",onClick(){i()}},{id:"Save",label:"Save",async onClick(){await a(),vn.Z.success("Saved successfully","success")}},{id:"Save As...",label:"Save As...",async onClick(){await l(),vn.Z.success("Saved successfully","success")}},{id:"Close",label:"Close",onClick(){r()}},{id:"Hr between close and install",type:"hr"},{id:"Install Desktop Icon",label:"Install Desktop Icon",disabled:null===s.value,async onClick(){u()}}]},{id:"Sample",label:"Sample",subMenu:ue.map((e=>({id:e.id,label:e.project.name,onClick(){d(e.id)}})))},{id:"Help",label:"Help",subMenu:[{id:"SVG Filter specification on W3C",label:"SVG Filter specification on W3C",onClick(){window.open("https://www.w3.org/TR/filter-effects-1/")}},{id:"SVG Filter documents on MDN",label:"SVG Filter documents on MDN",onClick(){window.open("https://developer.mozilla.org/en-US/docs/Web/SVG/Element/filter")}},{id:"Hr between spec and contact",type:"hr"},{id:"Issue",label:"Issue",onClick(){window.open("https://github.com/gogoend/svg-filter-graph-builder/issues")}},{id:"Contact @gogoend via mail",label:"Contact @gogoend via mail",onClick(){window.open("mailto:gogoend@qq.com")}},{id:"About",label:"About",onClick(){Qo()}}]}])),p=(0,I.f3)(pe),f=(0,I.Fl)((()=>{const e=["SVG Filter Graph Builder"];return p?.value?e.unshift(p.value.project.name):e.unshift(Go),e.join(" - ")}));return(e,a)=>{const l=(0,I.Q2)("pingping");return(0,I.wg)(),(0,I.iD)("div",ea,[(0,I._)("div",ta,[(0,I._)("ul",na,[((0,I.wg)(!0),(0,I.iD)(I.HY,null,(0,I.Ko)((0,S.SU)(c),(e=>((0,I.wg)(),(0,I.iD)("li",{key:e.id,class:(0,X.C_)(["menu-entry-item",{"menu-entry-item__active":t.value[e.id]}]),onMouseenter:t=>n(e),onMouseleave:t=>o(e)},[(0,I._)("div",null,(0,X.zw)(e.label),1),(0,I.wy)((0,I._)("ul",aa,[((0,I.wg)(!0),(0,I.iD)(I.HY,null,(0,I.Ko)(e.subMenu,(e=>(0,I.wy)(((0,I.wg)(),(0,I.iD)("li",{key:e.id,class:(0,X.C_)(["submenu-item",{"submenu-item--active":t.value[e.id],"submenu-item--disabled":!0===e.disabled,"submenu-item__is-hr":"hr"===e.type}]),onMouseenter:t=>n(e),onMouseleave:t=>o(e),onMousedown:a[0]||(a[0]=(0,P.iM)((()=>{}),["prevent"])),onClick:(0,P.iM)((()=>{e.disabled||(e.onClick?.(),t.value={})}),["prevent"])},["hr"===e.type?((0,I.wg)(),(0,I.iD)("div",ra)):((0,I.wg)(),(0,I.iD)(I.HY,{key:1},[(0,I.Uk)((0,X.zw)(e.label),1)],64))],42,la)),[[l,{remark:`[top-menu] ${e.id} 菜单项被点击`}]]))),128))],512),[[P.F8,t.value[e.id]]])],42,oa)))),128))])]),(0,I._)("div",ia,[(0,I.wy)(((0,I.wg)(),(0,I.iD)("div",sa,[(0,I.Uk)((0,X.zw)((0,S.SU)(f)),1)])),[[l,{remark:"[top-menu-bar] 标题被点击"}]])]),(0,I._)("div",ua,[(0,I._)("div",da,[(0,I.wy)(((0,I.wg)(),(0,I.iD)("a",ca,[(0,I.Uk)("GitHub")])),[[l,{remark:"[top-menu-bar] GitHub链接被点击"}]])])])])}}});const fa=(0,oe.Z)(pa,[["__scopeId","data-v-f7d30d52"]]);var ga=fa;const va={class:"ping-ping"};var ma=(0,I.aZ)({__name:"PingPing",setup(e){const t=1e4,n=window.__sfgb_runtime_config__.logDestination;let o=!1;(0,I.Ah)((()=>{o=!0}));const a=()=>{w.debug("[日志] 开始收集"),setTimeout((async()=>{w.debug("[日志] 结束收集并准备发送");let e=await c.limit(100).toArray();const t=e.map((e=>e.id));if(!e.length)return w.debug("[日志] 没有可以发送的日志"),void(!o&&a());e=e.map((e=>JSON.stringify(e)));const l=new FormData;l.append("file",new Blob([e.join("\n")]));try{const e=await(await fetch(n,{body:l,method:"post"})).json();0===e.code&&c.bulkDelete(t)}catch(r){w.error(r)}!o&&a()}),t)};return n&&a(),(e,t)=>(0,I.wy)(((0,I.wg)(),(0,I.iD)("div",va,null,512)),[[P.F8,!1]])}});const ha=ma;var _a=ha,ya=(0,I.aZ)({name:"AppMain",components:{TopMenuBar:ga,SvgCanvas:xn,SvgCanvasOverlayTip:Hn,NodeLibraryPanel:Zn,StuffConfigPanel:mo,OutputPreviewPanel:Ho,PingPing:_a},setup(){const e=(0,I.f3)(z),t=({el:e})=>{const t=e.getBoundingClientRect();e.style.left=window.innerWidth-t.width+"px",e.style.top=window.innerHeight-t.height+"px"};return(0,I.bv)((()=>{w.log("[Hello] 用户界面已加载",[location.href,window.__sfgb_runtime_config__,navigator.userAgent])})),{setSvgCanvasVm:e,handleOutputPreviewPanelMounted:t,filterLibraryPanelWidth:Dt,stuffConfigPanelWidth:Et,topMenuBarHeight:Ct}}});const wa=(0,oe.Z)(ya,[["render",Ee],["__scopeId","data-v-47c8650c"]]);var ba=wa,Da=(0,I.aZ)({name:"App",components:{AppMain:ba},setup(){be()}});const Ea=(0,oe.Z)(Da,[["render",F]]);var Ca=Ea,Pa=n(2482);class Ia{constructor(){(0,Pa.Z)(this,"listeners",void 0),this.listeners={}}on(e,t){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(t)}once(e,t){e in this.listeners||(this.listeners[e]=[]);const n=(...o)=>{t.call(this,...o),this.off(e,n)};this.listeners[e].push(n)}off(e,t){if(!(e in this.listeners))return;const n=this.listeners[e];if(t){for(let o=0;o<n.length;o++)if(n[o]===t)return void n.splice(o,1)}else n.length=0}emit(e,t){if(!(e in this.listeners))return;const n=this.listeners[e].concat();for(let o=0;o<n.length;o++)n[o].call(this,t)}getListeners(e){return e?this.listeners[e]:this.listeners}}const Fa={beforeMount(e,{value:t},n){const o=e=>{t?.remark?w.log(t.remark):w.log(`[用户界面] 用户按下了CSS类为“${e.target.className}”的${e.target.tagName}元素`)};e.addEventListener("mousedown",o),e.__vPingpingDispose__=()=>{delete e.__vPingpingDispose__,e.removeEventListener("mousedown",o)}},unmounted(e){e.__vPingpingDispose__()}};var Sa=Fa;fetch("./runtime-config.json").then((e=>e.json())).then((e=>{window.__sfgb_runtime_config__=e})).then((()=>v())).then((()=>b())).then((()=>{const e=(0,P.ri)(Ca);e.config.globalProperties.$eventHub=new Ia,e.use(C),e.directive("pingping",Sa),e.mount("#app"),e.config.warnHandler=(...e)=>w.warn("[Vue]",e[0],e[2]),e.config.errorHandler=(...e)=>w.error("[Vue]",e[0],e[2])}))}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var l=t[o]={exports:{}};return e[o].call(l.exports,l,l.exports,n),l.exports}n.m=e,function(){var e=[];n.O=function(t,o,a,l){if(!o){var r=1/0;for(d=0;d<e.length;d++){o=e[d][0],a=e[d][1],l=e[d][2];for(var i=!0,s=0;s<o.length;s++)(!1&l||r>=l)&&Object.keys(n.O).every((function(e){return n.O[e](o[s])}))?o.splice(s--,1):(i=!1,l<r&&(r=l));if(i){e.splice(d--,1);var u=a();void 0!==u&&(t=u)}}return t}l=l||0;for(var d=e.length;d>0&&e[d-1][2]>l;d--)e[d]=e[d-1];e[d]=[o,a,l]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,l,r=o[0],i=o[1],s=o[2],u=0;if(r.some((function(t){return 0!==e[t]}))){for(a in i)n.o(i,a)&&(n.m[a]=i[a]);if(s)var d=s(n)}for(t&&t(o);u<r.length;u++)l=r[u],n.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return n.O(d)},o=self["webpackChunk_gogoend_svg_filter_graph_builder"]=self["webpackChunk_gogoend_svg_filter_graph_builder"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(8395)}));o=n.O(o)})();